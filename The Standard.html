<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>
	<style>
	@media print {
    @page {
        size: A4;
    }

    .highlight,
    p,
    pre,
    th,
    tr,
    table,
    thead,
    tbody {
        page-break-inside: avoid;
        break-inside: avoid;
    }

    h1,
    h2,
    h3,
    h4,
    h5 {
        page-break-after: avoid;

    }

    h1:not(:first-child) {
        page-break-before: always;
    }

    article:not(:first-child) {
        page-break-before: always;
    }
}
#readme{
	margin-left: 52px;
	margin-right: 27px;
	
}
path,
svg {
    display: none !important;
}

pre,
span {
    font-size: 18;
    font-weight: bolder !important;
}

body {
    background-color: #fff;
}

code {
    font-family: monospace;
    background-color: #fafbfc;
    padding: 5px;
    border-radius: 5px;
}

* {
    color: #000;
    tab-size: 2;
}

th,
td {
    border: 2px solid;
}

p {
    margin: 15;
}

pre {
    margin-left: 7;
}

h5 {
    margin: 0;
}

h1,
h2,
h3,
h4,
h5 {
    padding: 0;
    margin: 0;
}

table {
    padding: 2px;
}

.pl-c {
    color: #6a737d;
}

.pl-c1,
.pl-s .pl-v {
    color: #005cc5;
}

.pl-e,
.pl-en {
    color: #6f42c1;
}

.pl-smi,
.pl-s .pl-s1 {
    color: #000;
}

.pl-ent {
    color: #22863a;
}

.pl-k {
    color: #d73a49;
}

.pl-s,
.pl-pds,
.pl-s .pl-pse .pl-s1,
.pl-sr,
.pl-sr .pl-cce,
.pl-sr .pl-sre,
.pl-sr .pl-sra {
    color: #032f62;
}

.pl-v,
.pl-smw {
    color: #e36209;
}

.pl-bu {
    color: #b31d28;
}

.pl-ii {
    color: #fafbfc;
    background-color: #b31d28;
}

.pl-c2 {
    color: #fafbfc;
    background-color: #d73a49;
}

.pl-c2::before {
    content: "^M";
}

.pl-sr .pl-cce {
    font-weight: bold;
    color: #22863a;
}

.pl-ml {
    color: #735c0f;
}

.pl-mh,
.pl-mh .pl-en,
.pl-ms {
    font-weight: bold;
    color: #005cc5;
}

.pl-mi {
    font-style: italic;
    color: #24292e;
}

.pl-mb {
    font-weight: bold;
    color: #24292e;
}

.pl-md {
    color: #b31d28;
    background-color: #ffeef0;
}

.pl-mi1 {
    color: #22863a;
    background-color: #f0fff4;
}

.pl-mc {
    color: #e36209;
    background-color: #ffebda;
}

.pl-mi2 {
    color: #f6f8fa;
    background-color: #005cc5;
}

.pl-mdr {
    font-weight: bold;
    color: #6f42c1;
}

.pl-ba {
    color: #586069;
}

.pl-sg {
    color: #959da5;
}

.pl-corl {
    text-decoration: underline;
    color: #032f62;
}
	</style>
</head>
<body>
	<font size="+3" >
	<div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
		<article class="markdown-body entry-content container-lg" itemprop="text">
			<h1 dir="auto"><a id="user-content-0-introduction" class="anchor" aria-hidden="true" href="#0-introduction"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>0 Introduction</h1>
			<p dir="auto">This is The Standard. A collection of decades of experience in the engineering industry. I authored it to help you find your way through the wide ocean of knowledge. The Standard is not perfect and never will be, and it reflects the ongoing evolution of the engineering industry. While it may be written by one person, it is the collection of thoughts from hundreds of engineers that I've had the honor to interact with and learn from throughout my life.</p>
			<p dir="auto">The Standard holds hundreds of years of collective experiences from many different engineers. As I have traveled the world and worked in various industries, I've had the chance to work with many kinds of engineers - some of them were mad scientists who would fixate on the smallest details of every single routine. And some others have been business engineers who cared more about the end results than the means to get to these results. In addition to others, I've learned from all of them: what makes a simple engineering guide that can light the way for all other engineers to be inspired by it and hopefully follow it. And therefore, I have made this Standard, hoping it will be a compass for engineers to find the best way to engineer solutions that will hopefully change the world.</p>
			<p dir="auto">This Standard is an appeal to engineers worldwide: read through it and make extracts of their experiences and knowledge to enrich an engineering Standard worthy of the industry of software. We live today knowing the origins of the earth, of man, and all the animals. We know how hot boiling water is; how long, a yard. Our ships' masters know the precise measurements of latitude and longitude. Yet, we have neither chart nor compass to guide us through the wide sea of code. The time has come to accord this great craft of ours with the same dignity and respect as the other standards defined by science.</p>
			<p dir="auto">The value of this Standard IS immense for those in the industry who are still finding their way or even those who have lost their way, and the Standard can guide them towards a better future. But more importantly, The Standard is written for everyone, equally, to inspire every engineer or engineer-to-be to look forward to focusing on what matters the most about engineering--its purpose, not its technicalities. When engineers have any form of Standard, I have observed that they start focusing more on what can be accomplished in our world today. And when a team of engineers follows some form of Standard, their energy and focus become more about what can be accomplished, not how it should be accomplished.</p>
			<p dir="auto">I collected, then authored this Standard, hoping it will eliminate much of the confusion and enable engineers to focus on what matters most--use technology as a means for higher purposes and to establish its equivalent goals. The art and science of designing software have come a long way and have proven to be one of the most powerful tools a person could have today. It deserves a proper introduction, and how we educate youth about it matters.</p>
			<p dir="auto">In essence, The Standard is my interpretation of SOLID principles and many other practices and patterns that continue to enrich our designs and development to achieve truly solid systems. The Standard aims to help every engineer find guidance in their day-to-day work. But more importantly, the Standard can ensure every engineer that when they need to build rugged systems that can land on the moon, solve the most complex problems, and ensure the survival of humankind and its evolution--they have the guidance required.</p>
			<p dir="auto">The Standard is intentionally technology-agnostic. Its principles can apply to any programming language, and its tri-nature of foundation can guide any development or design decisions beyond software. I will be using C# on the .NET framework to only materialize and realize the concepts of this Standard. But know that at the early stages of forming this Standard, I was heavily using Scala as a programming language. The Standard shall not be tied to any particular technology, nor shall it be a limitation to those who want to follow it, regardless of their language of preference.
			But what's more important about The Standard? It's also meant to play the role of inspiration for generations of engineers to come to either follow it, improve on it, or come up with their own. The alternative is to build software without standards, which is subject to chaos and injustice when it comes to investing the best time into the best efforts. Our industry today is in chaos in terms of standardization. Unqualified individuals may have or take leadership positions and influence those who are much more qualified to make unfortunate decisions. The Standard is the option to set a measure for expertise, influence, and knowledge depth before making any decisions.</p>
			<p dir="auto">The Standard is also my labor of love for the rest of the world. It is driven by and written with a passion for enhancing the engineering experience and producing efficient, rugged, configurable, pluggable, and reliable systems that can withstand any challenges or changes as it occurs almost daily in our industry.</p>
			<p dir="auto">[*] <a href="https://www.youtube.com/watch?v=8PveoymxCok" rel="nofollow">Introduction to The Standard</a></p>
			<p dir="auto">[*] <a href="https://www.youtube.com/watch?v=Au7G_y4BkbY" rel="nofollow">Questions about The Standard</a></p>				
		</article>
		<article class='markdown-body entry-content container-lg' itemprop='text'>
			<h1 dir='auto'><a id='user-content-00-the-theory' class='anchor' aria-hidden='true'
					href='#00-the-theory'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1' width='16'
						height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>0.0 The Theory</h1>
			<h2 dir='auto'><a id='user-content-000-introduction' class='anchor' aria-hidden='true'
					href='#000-introduction'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>0.0.0 Introduction</h2>
			<p dir='auto'>When designing any system, it is of utmost importance for the designer to backup their design
				with a certain theory. Theories play a massive role in ensuring the purposes, models and simulations of
				their design are cohesive and extensible within a certain domain.</p>
			<p dir='auto'>Any system out there regardless of how chaotic it may seem is mandatorily influenced by at
				least one theory either coined by the designer or inherited from previous designers or their systems.
			</p>
			<p dir='auto'>Regardless of what or who the influencer may be, it is important for the designer to fully
				understand the theory they follow or it will negatively impact their future decisions in terms of
				extending their design to keep up with a forever changing and expanding universe.</p>
			<p dir='auto'>I have realized early on that the simpler any theory is, the easier it becomes for other
				designers to adapt the theory and extend it's reach beyond the original designer's dreams. A universe
				built on top of simpler patterns can make it a lot easier for those who marvel at its beauty to better
				understand it and appreciate it much more than those who just give-in to the fact that it's complex
				beyond their comprehension.</p>
			<p dir='auto'>A theory about the universe could make life much more purposeful, enriched with all sorts of
				tales about survival, evolution and fulfillment.</p>
	
			<h2 dir='auto'><a id='user-content-001-finding-answers' class='anchor' aria-hidden='true'
					href='#001-finding-answers'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>0.0.1 Finding Answers</h2>
			<p dir='auto'>Early on in my life, I struggled with schooling. Nothing that was taught made any sense to me.
				It seemed that everyone at school was more concerned with memorizing and regurgitating what they've
				memorized during their exam than truly understanding consciously what was being taught and question it's
				origins and validate it's purposes.</p>
			<p dir='auto'>I realized at an earlier age that I needed some magical equation to help me distinguish
				between what's true and what's not. What's right and wrong. What's driven by a purpose and what's an
				imitation for those who have true purposes.</p>
			<p dir='auto'>So, I started my search in coming up with a theory that can explain the world to me. I was
				named all kinds of names during my schooling years. But I didn't mind much of that because my heart,
				mind and body were fully invested into finding the answer to everything.</p>
			<p dir='auto'>When looking for answers, it's important to keep your heart and mind open for all the options.
				Don't let any social or traditional structures limit your mind from seeking the truth about the universe
				and embracing the answers from everywhere.</p>
			<p dir='auto'>After years and years of search, I settled on a theory that made it simple for a simple person
				like myself to understand everything. I called it The Tri-Nature of Everything.</p>
	
			<h2 dir='auto'><a id='user-content-002-tri-nature' class='anchor' aria-hidden='true'
					href='#002-tri-nature'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>0.0.2 Tri-Nature</h2>
			<p dir='auto'>The Tri-Nature theory states that everything in this world is comprised of 3 main categories.
				Dependencies, purposes and exposures. Each one of these components plays a crucial role towards the
				survival of its system, its evolution and fulfillment.</p>
			<p dir='auto'>Let's talk about these components here.</p>
<div class="highlight">
			<h3 dir='auto'><a id='user-content-0020-purpose' class='anchor' aria-hidden='true' href='#0020-purpose'><svg
						class='octicon octicon-link' viewBox='0 0 16 16' version='1.1' width='16' height='16'
						aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>0.0.2.0 Purpose</h3>
			<p dir='auto'>Everything around us has a purpose. It was created and designed with a certain reason in the
				mind of it's creator. We design cars to take us from point A to point B. We design cups for drinking,
				plates for eating and shoes for walking. Everything in existence has a core purpose the governs it's
				design and legitimatizes it's existence.</p>		
</div>
			<h3 dir='auto'><a id='user-content-0021-dependency' class='anchor' aria-hidden='true'
					href='#0021-dependency'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>0.0.2.1 Dependency</h3>
			<p dir='auto'>But every system out there must have a dependency in one form or another in order. For
				instance, we as biological systems rely on food and water to survive. Cars rely on oil or electricity.
				Computer systems rely on power and electricity and so on. Every system no matter how small or big it may
				be, and regardless of it's impact and importance must have a dependency of some kind.</p>
<div class="highlight">
			<h3 dir='auto'><a id='user-content-0022-exposure' class='anchor' aria-hidden='true'
					href='#0022-exposure'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1' width='16'
						height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>0.0.2.2 Exposure</h3>
			<p dir='auto'>But in order for a dependency to become a dependency it needs to expose itself somehow for
				other systems to rely on it. For instance, power outlets are an exposure layer for power sources to
				allow other systems to plug in and consume its services. Gas stations are exposure layers for oil tanks
				buried underground to store that oil. And so on with every system out there it needs to expose itself to
				allow other systems to integrate with it and consume its capabilities.</p>
			
			<div align='center' style='padding: 5px;' dir='auto'>
				<a target='_blank' rel='noopener noreferrer'
					href='https://user-images.githubusercontent.com/1453985/166178078-c1ef6cb5-a78c-4496-9100-b6c9c31d273c.png'><img
						width='50%'
						src='https://user-images.githubusercontent.com/1453985/166178078-c1ef6cb5-a78c-4496-9100-b6c9c31d273c.png'
						style='max-width: 100%;'></a>
			</div>
			
		</div>
			<h3 dir='auto'><a id='user-content-003-everything-is-connected' class='anchor' aria-hidden='true'
					href='#003-everything-is-connected'><svg class='octicon octicon-link' viewBox='0 0 16 16'
						version='1.1' width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>0.0.3 Everything is Connected</h3>
			<p dir='auto'>In the larger scheme of things, all systems out there are connected to one another. A simple
				example of this is the food chain in nature. The sun is a dependency for the grass to grow, grasshoppers
				are consumers of grass while frogs feed on grasshoppers then snakes would feed off of frogs and so on.
			</p>
			<p dir='auto'>Every single member in the food chain is a system that has dependencies, purposes and
				exposure.</p>
			 	 
			<div align='center' style='padding: 5px;' dir='auto'>
				<a target='_blank' rel='noopener noreferrer'
					href='https://user-images.githubusercontent.com/1453985/166204227-b07470e3-56aa-46a7-a2e4-bccda9024af0.png'><img
						width='75%'
						src='https://user-images.githubusercontent.com/1453985/166204227-b07470e3-56aa-46a7-a2e4-bccda9024af0.png'
						style='max-width: 100%;'></a>
			</div>		
 			<p dir='auto'>Since computer systems are nothing but a reflection of our reality. These systems integrations
				represent a chain of infinite dependencies each one of these systems relies on one or more systems to
				fulfill its purpose. A simple mobile application could rely on a backend system to persist it's data.
				But the backend system relies on cloud-based system to store the data. And the cloud based system relies
				on file system to perform basic persistance operations and so on.</p>	
			<div class="highlight">
				<h3 dir='auto'><a id='user-content-004-fractal-pattern' class='anchor' aria-hidden='true'
					href='#004-fractal-pattern'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>0.0.4 Fractal Pattern</h3>
			<p dir='auto'>The Tri-Nature pattern could also be perceived at the lowest scale of any system as well as
				the highest scale. That's what we call a fractal pattern. Every system out there is infinity comprised
				of three components each one of them has three components as well and so on.</p>
			<p dir='auto'>For instance, the smallest known component in the universe are the quarks within neutron
				within an atom. these quarks are three components, two down quarks and one up quark. but if you zoom out
				slightly you would see the larger system where these quarks reside is also comprised of three components
				which are the electrons, protons and neutrons.</p>
			</div>			 
			<div align='center' style='padding: 5px;' dir='auto'>
				<a target='_blank' rel='noopener noreferrer'
					href='https://user-images.githubusercontent.com/1453985/166233617-87b51836-010a-4744-9ad0-194dada5a5b7.png'><img
						width='75%'
						src='https://user-images.githubusercontent.com/1453985/166233617-87b51836-010a-4744-9ad0-194dada5a5b7.png'
						style='max-width: 100%;'></a>
			</div>

			
			<p dir='auto'>If we zoom far out from the sub-atomic level to the solar system, the pattern continues to
				repeat itself at a massive scale. Our solar system is comprised of a sun, planets and moons. and they
				fall exactly within the dependency purposing and exposure patterns as the components in the sub-atomic
				level as follows:</p>
			
 			<div align='center' style='padding: 5px;' dir='auto'>
				<a target='_blank' rel='noopener noreferrer'
					href='https://user-images.githubusercontent.com/1453985/166234576-18613bdd-e972-4562-8761-15cf8ea875cf.png'><img
						width='75%'
						src='https://user-images.githubusercontent.com/1453985/166234576-18613bdd-e972-4562-8761-15cf8ea875cf.png'
						style='max-width: 100%;'></a>
			</div>

			
			<p dir='auto'>And if we zoom further out at scale, we find out that galaxies are made out of dust, gas and
				dark matter.</p>
			<p dir='auto'>The Tri-Nature pattern continues to repeat itself into every aspect of our lives. Every
				component in our universe from the smallest sub-atomic parts to a massive scale galaxies and solar
				systems the follow the same rule.</p>
		<div class="highlight">
			<h3 dir='auto'><a id='user-content-005-systems-design--architecture' class='anchor' aria-hidden='true'
					href='#005-systems-design--architecture'><svg class='octicon octicon-link' viewBox='0 0 16 16'
						version='1.1' width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>0.0.5 Systems Design &amp; Architecture</h3>
			<p dir='auto'>It is now evident that a good theory that we can follow to design systems has been discovered!
				We can now develop every single component in our software with accordance to The Tri-Nature of
				Everything. The rules and guidelines that govern designing software according to The Theory is called
				The Standard. It refers to the universal standard in designing systems in every matter.</p>
			<p dir='auto'>The Standard dictates at the low-level architecture that every system out there should be
				comprised of brokers (dependencies) and services (purposes) and exposers (exposures).</p>
			<p dir='auto'>For instance, when designing a simple RESTful API, we may need to integrate with a database
				system, then validate incoming data based on certain business rules then expose these capabilities to
				the outside world for the API consumers to be able to integrate with it.</p>
			<p dir='auto'>According to The Standard that system would look like this:</p>	
			
			<div align='center' style='padding: 5px;' dir='auto'>
				<a target='_blank' rel='noopener noreferrer'
					href='https://user-images.githubusercontent.com/1453985/166236209-362ae38d-9455-4ae2-b5d5-a10c92bf0b46.png'><img
						width='75%'
						src='https://user-images.githubusercontent.com/1453985/166236209-362ae38d-9455-4ae2-b5d5-a10c92bf0b46.png'
						style='max-width: 100%;'></a>
			</div>	
		</div>
			

			<p dir='auto'>When digging deeper into any of these components, the same pattern would repeat itself. For
				instance, a service is comprised of validation components, processing components and integration
				components. And then if we zoom in a bit further, these very validation components are comprised of
				three finer components which are the structural validations, the logical validations and external
				validations. The pattern continues to go on and on to the lowest level of our design as shown here:</p>
			
			<div align='center' style='padding: 5px;' dir='auto'>
				<a target='_blank' rel='noopener noreferrer'
					href='https://user-images.githubusercontent.com/1453985/166237622-ff4dc0e8-2513-4d7e-834d-ef15caee3d30.png'><img
						width='75%'
						src='https://user-images.githubusercontent.com/1453985/166237622-ff4dc0e8-2513-4d7e-834d-ef15caee3d30.png'
						style='max-width: 100%;'></a>
			</div>
				
			<p dir='auto'>The same pattern also applies to larger systems if we zoom out of the one system realm into
				distributed modern systems such as microservice architectures - the same pattern should apply as
				follows:</p>
			
			<div align='center' style='padding: 5px;' dir='auto'>
				<a target='_blank' rel='noopener noreferrer'
					href='https://user-images.githubusercontent.com/1453985/166238298-f3f0c040-d57a-4a56-a6bc-13c564aef5e1.png'><img
						width='65%'
						src='https://user-images.githubusercontent.com/1453985/166238298-f3f0c040-d57a-4a56-a6bc-13c564aef5e1.png'
						style='max-width: 100%;'></a>
			</div>
				
			<p dir='auto'>In a distributed system, some services play the role of ambassadors to external or local
				resources which is the equivalent of a broker component at the service level. But then a purpose-driven
				component must come into play to orchestrate business flows by combining one or many primitive
				resource-consumption operations from these ambassador services. The final part which is the exposure
				layer, a thin gatekeeper layer that becomes the first point of contact between the outside world and
				your microservice architecture.</p>
			<p dir='auto'>The same pattern of tri-nature will continue to repeat itself across several systems may it be
				large across multiple organizations or small within one single service.</p>

			<h3 dir='auto'><a id='user-content-006-conclusion' class='anchor' aria-hidden='true'
					href='#006-conclusion'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>0.0.6 Conclusion</h3>
			<p dir='auto'>In conclusion, The Tri-Nature of Everything is the theory that powers up The Standard. Every
				single aspect in the rules and guidelines of The Standard are heavily influenced by The Tri-Nature
				theory. But it's important to understand that the theory goes well beyond designing some software
				system. It can apply to management styles, writing books, making meals, establishing relationships and
				every other aspect of our lives which goes beyond the purpose of The Standard here.</p>
			<p dir='auto'>It is quite evident now after so many years of research and experimentation with the
				Tri-Nature theory that it works! It helps simplify some of the most complex systems out there. It plays
				well with our intuition as human beings, and makes it even simpler for automatons in the future to
				expedite our development processes of software and hardware and everything else in between.</p>
			<p dir='auto'>Finally, The Standard is an ongoing journey of continuing to question The Tri-Nature theory.
				The further we go into uncharted waters in terms of business domains the more we discover some new
				territories where my theory still stands. Even for the most chaotic systems out there the theory applies
				in certain ways even if the components of said systems didn't quite adhere to The Standard form of
				distinction.</p>
		</article>
		<article class='markdown-body entry-content container-lg' itemprop='text'>
			<h1 dir='auto'><a id='user-content-01-purposing-modeling-and-simulation' class='anchor' aria-hidden='true'
					href='#01-purposing-modeling-and-simulation'><svg class='octicon octicon-link' viewBox='0 0 16 16'
						version='1.1' width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>0.1 Purposing, Modeling and Simulation</h1>
			<h2 dir='auto'><a id='user-content-010-introduction' class='anchor' aria-hidden='true'
					href='#010-introduction'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>0.1.0 Introduction</h2>
			<p dir='auto'>The Standard defines the process of software engineering in three main categories. Purposing,
				Modeling and Simulation. Each one of these aspects plays a crucial role in guiding the efforts of
				engineering towards producing a successful solution and fulfilling a particular purpose.</p>
			<p dir='auto'>The order in which these aspects are followed is also intentional. A purpose must exist to
				shape the modeling process. And one can't simulate interactions with no models. But while that order at
				the initiation of the engineering process is crucial, It's important to understand that the process
				itself is selectively iterative. A change in the purpose may reflect as a change in the simulation but
				not necessarily the modeling. A change in the models may not neccessarily require a change in either the
				purpose nor the simulation.</p>
			
			<div align='center' style='padding: 5px;' dir='auto'>
				<a target='_blank' rel='noopener noreferrer'
					href='https://user-images.githubusercontent.com/1453985/148862410-f4ce62ad-deaa-4376-af1c-c43b9aa53473.png'><img
						width='50%'
						src='https://user-images.githubusercontent.com/1453985/148862410-f4ce62ad-deaa-4376-af1c-c43b9aa53473.png'
						style='max-width: 100%;'></a>
			</div>
			

			<h2 dir='auto'><a id='user-content-011-purposing' class='anchor' aria-hidden='true'
					href='#011-purposing'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1' width='16'
						height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>0.1.1 Purposing</h2>
			<p dir='auto'>The purposing process is our ability to find out <em>why</em> we need a solution. For
				instance, if we are having an issue with knowing how many items are on the shelf in some grocery store.
				We deem the manual process of counting to be inefficient and a system needs to be put in place to ensure
				we have the proper count of items.</p>
			<p dir='auto'>Purposing therefore, is to find a reason to take an action. Reasoning relies heavily on
				observability. Our ability to observe problems and then being able to articulate the problem to better
				device a solution that addresses the given problem.</p>
			<p dir='auto'>So, we have the observation, the articulation of the reasoning (the problem) and the intent
				for a solution. All of these aspects constitute the Purposing portion of engineering software.</p>

			<h3 dir='auto'><a id='user-content-0110-observation' class='anchor' aria-hidden='true'
					href='#0110-observation'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>0.1.1.0 Observation</h3>
			<p dir='auto'>We live in a world full of observables. Our inspiration is triggered by our ambition to
				achieve more. Our dreams reveal blockers in our way that we need to solve to continue our journey and
				fulfill our dreams. From the moment a young student uses a calculator to solve a complex equation to the
				moment that very student becomes an astronaut, calculatoring the trajectory of satellites orbiting our
				planet.</p>
			<p dir='auto'>Observation is our ability to detect an issue that's blocking a goal from being achieved.
				Issues can be as simple as coming up with the proper count of items on a grocery store shelf. All the
				way up to understanding why we can't capture images of planets millions of light years away from us.
				These are all what engineers would describe an observable problem.</p>
			<p dir='auto'>The greater the purpose, the more complex a problem is going to be. But these smaller purposes
				are our way to train our minds to tackle bigger ones. Step by step, one problem at a time.</p>

			<h3 dir='auto'><a id='user-content-0111-articulation' class='anchor' aria-hidden='true'
					href='#0111-articulation'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>0.1.1.1 Articulation</h3>
			<p dir='auto'>Describing the observable is an art in and of itself. Because describing a problem properly is
				half way to its solution. The clearer the articulation of the problem is, the more likely the problem is
				to be understood by others helping us to solve that very same problems.</p>
			<p dir='auto'>Articulation isn't always with words. It's also with figures and shapes. It is not an accident
				that some of the most advanced ancient cultures have used figures and shapes to describe their times and
				their history. Figures are a universal language, understood and interpreted by anyone who could relate
				to them much faster than learning a spoken language. In fact, a figure or shape might be the most
				optimum way to illustrate an idea as it pictures are worthy of thousands of words.</p>
			<p dir='auto'>Articulation requires the passion to solve the issue. Whether it's written, said or
				illustrated. A passionate mind shall convey the hidden message of the criticality of the problem to be
				solved. Articulating a problem is a big part of how one can sell their solution. Our ability to convey
				an idea towards other engineers and then those who will be investing and using this solution is one of
				the most important aspects of engineering software.</p>
				<div class="highlight">
			<h3 dir='auto'><a id='user-content-0112-solutioning' class='anchor' aria-hidden='true'
					href='#0112-solutioning'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>0.1.1.2 Solutioning</h3>
			<p dir='auto'>A part of the purpose is the way to fulfil it. In the engineering industry, fulfilling the
				goals can't just be by -any- means. A huge aspect of why so many massive pieces of software fails around
				the world is because the solutioning aspect was overlooked as a trivial part of the purpose. You may
				have heard of those who were pressured against a deadline so they decided to cut corners to achieve the
				goal. In our Standard, this is a violation. A solution <em>must</em> be not just fulfilling to a goal,
				but it must be a purpose in and of itself. This is in terms of optimization, readability,
				configurability and longevity. Solutioning as part of the purpose is software craftmanship.</p>
			</div>
			<h2 dir='auto'><a id='user-content-012-modeling' class='anchor' aria-hidden='true' href='#012-modeling'><svg
						class='octicon octicon-link' viewBox='0 0 16 16' version='1.1' width='16' height='16'
						aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>0.1.2 Modeling</h2>
			<p dir='auto'>Modeling is the second most important aspect of software engineering. It's our ability to
				extract models from the actors in any problem. Whether these actors are living beings, objects or other.
				For instance, in a problem where we are trying to count the items on a grocery store shelf, a model
				would be for these items. Extracting only the attributes that are relevant to the problem we are trying
				to solve, and discarding everything else.</p>
			<p dir='auto'>A simpler example would be detecting the items in a grocery store that are perishable. The
				only attribute we are concerned with here is the expiration date on the item. Everything else including
				the label, color, weight or any other details are out of the scope of the modeling process and the
				solution.</p>
			<p dir='auto'>Modeling then cannot exist without a purpose. As the purpose defines the scope or the
				framework of which the modeling should occur. Modeling without a purpose leaves the door open for
				attracting infinite number of attributes every single element in the observable universe may have.</p>
			<p dir='auto'>The relationship between the purposing and modeling attributes is proportional. The more
				complex the purpose is, the more likely the modeling process will require more attributes from the real
				world to resemble in a prototype.</p>
			<p dir='auto'>We express our models in programming languages as a <code>class</code>. The aforementioned
				perishable items problem above can be represented as follows:</p>	
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
	<pre><span class='pl-k'>public</span> <span class='pl-k'>class</span> <span class='pl-en'>Item</span>
{
	<span class='pl-k'>public</span> <span class='pl-en'>DateTimeOffset</span> <span class='pl-en'>ExpirationDate</span> {<span class='pl-k'>get</span>; <span class='pl-k'>set</span>;}
}</pre>
</div>

			<p dir='auto'>The name of the <code>class</code> represents the overall <em>type</em> of the item. Since all
				items have the exact same attribute of <code>ExpirationDate</code> then the name shall stay as generic
				as it can be.</p>
			<p dir='auto'>Now, imagine if our purpose grew a bit more complex. Let's assume the new problem is to be
				able to identify the more expensive perishable items so the store can put them up front for selling
				before the less expensive items. In this case our model would require a new attribute such as
				<code>Price</code> so a computer program or a solution can determine which is more valuable. This is how
				our new model would look like:</p>	
 
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
	<pre><span class='pl-k'>public</span> <span class='pl-k'>class</span> <span class='pl-en'>Item</span>
{
	<span class='pl-k'>public</span> <span class='pl-k'>double</span> <span class='pl-en'>Price</span> {<span class='pl-k'>get</span>; <span class='pl-k'>set</span>;}
	<span class='pl-k'>public</span> <span class='pl-en'>DateTimeOffset</span> <span class='pl-en'>ExpirationDate</span> {<span class='pl-k'>get</span>; <span class='pl-k'>set</span>;}
}</pre>	</div>

			<h3 dir='auto'><a id='user-content-0120-model-types' class='anchor' aria-hidden='true'
					href='#0120-model-types'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>0.1.2.0 Model Types</h3>
			<p dir='auto'>Models govern the entire process of simulating a problem (and its solution). Models themselves
				break into three main categories, Data Carriers, Operational and Configurations. Let's discuss those
				types in the following sections:</p>
			<h4 dir='auto'><a id='user-content-01200-data-carrier-models' class='anchor' aria-hidden='true'
					href='#01200-data-carrier-models'><svg class='octicon octicon-link' viewBox='0 0 16 16'
						version='1.1' width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>0.1.2.0.0 Data Carrier Models</h4>
			<p dir='auto'>Data carrier models have one main purpose which is to carry data points across systems. Data
				carrier models can vary based on the type of data they carry. Some data carrier models will carry other
				models to represent a complex system. Some others will just represent references to the original data
				points it represents.</p>
			<p dir='auto'>Data carrier models in a relational fashion can be broken into three different categories.
				These categories makes it a lot clearer what the areas of priority are in terms of development, design
				and engineering. For instance, we can't start developing secondary/supporting models if we don't have
				our primary models in place first. Let's talk about these categoris in details:</p> 	
			<h4 dir='auto'><a id='user-content-012000-primary-models' class='anchor' aria-hidden='true'
					href='#012000-primary-models'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>0.1.2.0.0.0 Primary Models</h4>
			<p dir='auto'>Primary models are the pillars of every system. Any given system cannot proceed in terms of
				design and engineering without a clear definition and a materialization of these primary models. For
				instance, if we are building a schooling system, models like <code>Student</code>, <code>Teacher</code>
				and <code>Course</code> are considered Primary models.</p>
			<p dir='auto'>We call these models Primary because they are self-sufficient. They don't rely physically on
				some other model in order for them to exist. Which means that a given Primary model like
				<code>Student</code> may still exist in a schooling system whether a <code>Teacher</code> record existed
				or not. This is called physical dependency. Primary models in a relational storage schema do not contain
				any foreign keys or references to any other physical model.</p>
			<p dir='auto'>Primary models however may rely conceptually or logically on other models. For instance, a
				<code>Student</code> model has a logical relationship to a <code>Teacher</code>. Simply because there
				can never be a student without a teacher and vice versa. A <code>Student</code> model also has a
				conceptual relationship with its host and neighboring hosting services. For instance, there's a
				conceptual relationship between a <code>Student</code> model and a <code>Notification</code> model in
				terms of business flow. Any given student in any school conceptually relies on notifications to attend
				certain classes, complete certain assignments or any other events.</p>
			<div class="highlight">
				<h4 dir='auto'><a id='user-content-012001-secondary-models' class='anchor' aria-hidden='true'
					href='#012001-secondary-models'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>0.1.2.0.0.1 Secondary Models</h4>
			<p dir='auto'>Secondary models on the other hand, have a hard-dependency on Primary models. In a relational
				database model, secondary models usually have foreign keys referencing another model in the overall
				database schema. But even in non-relational storage systems, secondary models can be represented as
				nested entities within a given larger entity or have a loose reference to another entity.</p>
			<p dir='auto'>Let's talk about some examples for secondary models. a <code>Comment</code> model in a social
				media platform cannot exist without a <code>Post</code> model. You simply cannot comment on something
				that doesn't exist. In a relational database, the comments model would look something like this:</p>
				
			<div align='center' style='padding: 5px;' dir='auto'>
				<a target='_blank' rel='noopener noreferrer'
					href='https://user-images.githubusercontent.com/1453985/155897099-5dd8aa3d-f6c2-4504-ba42-5e911c21a09a.png'><img
						src='https://user-images.githubusercontent.com/1453985/155897099-5dd8aa3d-f6c2-4504-ba42-5e911c21a09a.png'
						style='max-width: 100%;'></a>
			</div>						
		</div>
				 

			<p dir='auto'>In the example above, a secondary model <code>Comment</code> has a foreign key
				<code>PostId</code> referencing the primary key <code>Id</code> in a <code>Post</code> model. In a
				non-relational system, secondary models can easily be identified as nested objects within a given
				entity. Here's an example:</p> 	
			<div class='highlight highlight-source-json position-relative overflow-auto'>
	<pre>{
	<span class='pl-ent'>'id'</span>: <span class='pl-s'><span class='pl-pds'>'</span>some-id<span class='pl-pds'>'</span></span>,
	<span class='pl-ent'>'content'</span>: <span class='pl-s'><span class='pl-pds'>'</span>some post<span class='pl-pds'>'</span></span>,
	<span class='pl-ent'>'comments'</span>: [
		{
			<span class='pl-ent'>'id'</span>: <span class='pl-s'><span class='pl-pds'>'</span>comment-id<span class='pl-pds'>'</span></span>,
			<span class='pl-ent'>'content'</span>: <span class='pl-s'><span class='pl-pds'>'</span>some comment<span class='pl-pds'>'</span></span>
		}
	]
}</pre>
		
			<p dir='auto'>Secondary models in general may have logical and conceptual relations to other models within
				their host, neighboring or external systems. However, their chances of having these conceptual relations
				are much less than the Primary models.</p>		
			</div>
			<div class="highlight">
			<h4 dir='auto'><a id='user-content-012002-relational-models' class='anchor' aria-hidden='true'
					href='#012002-relational-models'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>0.1.2.0.0.2 Relational Models</h4>
			<p dir='auto'>Relational models are connectors between two Primary models. Their main responsibility is to
				materialize a many-to-many relationship between two entities. For instance, a <code>Student</code> may
				have multiple teachers; and a <code>Teacher</code> may have multiple students. In this case an
				intermediary model.</p>
			<p dir='auto'>Relational models are not supposed to have any details in them. They only contain references
				to other models and that is their primary key. A composite key that aggregates two or more foreign keys
				within it. Let's take a look at an example:</p>
			
 
			<div align='center' style='padding: 5px;' dir='auto'>
				<a target='_blank' rel='noopener noreferrer'
					href='https://user-images.githubusercontent.com/1453985/155897988-f865d0ef-9e22-421f-afe8-8d987bb67464.png'><img
						src='https://user-images.githubusercontent.com/1453985/155897988-f865d0ef-9e22-421f-afe8-8d987bb67464.png'
						style='max-width: 100%;'></a>
			</div>
 			</div>
				<div class="highlight">
				<h4 dir='auto'><a id='user-content-012003-hybrid-models' class='anchor' aria-hidden='true'
					href='#012003-hybrid-models'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>0.1.2.0.0.3 Hybrid Models</h4>
			<p dir='auto'>There's a situation where a model is connecting multiple entities but is also carrying its own
				data. I highly advise against following that path to maintain a level of purity in your system design
				and control the complexity of your models. However, sometimes this approach is a necessary option to
				proceed with a certain implementation or a business flow. In which case, we can propose a hybrid model
				that can carry certain details about the relationship between two independent entities.</p>
			<p dir='auto'>Here's an example of a hybrid model that can occur in reality. In a soft-delete scenario, a
				hybrid model can describe the detachment between two entities in a many-to-many relationship. Let's
				assume a group member does not want to be a part of a certain group anymore. We consider their group
				membership as <code>Deactivated</code> with a reason attached without actually fully delete the record.
				Here's how would that look like:</p>
			
 			<div align='center' style='padding: 5px;' dir='auto'>
				<a target='_blank' rel='noopener noreferrer'
					href='https://user-images.githubusercontent.com/1453985/155970437-3599c84c-b27a-471f-979a-17b624dd6b63.png'><img
						src='https://user-images.githubusercontent.com/1453985/155970437-3599c84c-b27a-471f-979a-17b624dd6b63.png'
						style='max-width: 100%;'></a>
			</div>
			</div>
			<p dir='auto'>In a non-relational data model the referencing integrity might become a bit more looser given
				the linear nature of that schema. Hybrid models combine both secondary models in the way they reference
				Primary models, and they implement a relational nature in which they allow multiple entities to relate
				to each other with no exclusivity.</p>
				<div class="highlight">

			<h4 dir='auto'><a id='user-content-01201-operational-models' class='anchor' aria-hidden='true'
					href='#01201-operational-models'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>0.1.2.0.1 Operational Models</h4>
			<p dir='auto'>Operational models mainly target the simulation aspect of any software system. Think about all
				primitive, complex and exposure operations a simple scenario could require for a successful simulation
				to be implemented. Let's assume we are trying to solve a problem where we can simplify students
				registrations in some school. The registration process will require some simulation to add these
				students information into a computerized system.</p>
			<p dir='auto'>Operational models will handle the exposure, processing and integration of that entire
				process, by offering services that offers APIs/UIs to enter, post, add and insert/persist students
				information into some schooling system.</p>
			<p dir='auto'>Operational models can be broken into three main categories, which are: Integration,
				Processing and Exposure. The Standard focuses heavily on operational models because they represent the
				core of any system in terms of business flows. Operational models are also where most of the resources
				of development and design go in any software development effort.</p>
			<p dir='auto'>Let's talk the operational models here.</p>
			</div>
			
 			<div class='highlight highlight-source-cs position-relative overflow-auto'>
				 <h4 dir='auto'><a id='user-content-012010-integration-models-brokers' class='anchor' aria-hidden='true'
					href='#012010-integration-models-brokers'><svg class='octicon octicon-link' viewBox='0 0 16 16'
						version='1.1' width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>0.1.2.0.1.0 Integration Models (Brokers)</h4>
			<p dir='auto'>Integration operational models main responsibility is to connect any existing system with
				external resources. These resources can be localized to the environment of that system like reading the
				current date or time or remote like calling an external API or persisting data in some database.</p>
			<p dir='auto'>We call these integration models Brokers. They play the role of a liaison between processing
				operational models and external systems. Here's an example:</p>	
	<pre><span class='pl-k'>public</span> <span class='pl-k'>partial</span> <span class='pl-k'>class</span> <span class='pl-en'>ApiBroker</span>
{
	<span class='pl-k'>public</span> <span class='pl-k'>async</span> <span class='pl-en'>ValueTask</span>&lt;<span class='pl-en'>Student</span>&gt; <span class='pl-en'>PostStudentAsync</span>(<span class='pl-en'>Student</span> <span class='pl-en'>student</span>) <span class='pl-k'>=&gt;</span>
		<span class='pl-k'>this</span>.<span class='pl-smi'>apiBroker</span>.<span class='pl-en'>PostAsync</span>&lt;<span class='pl-en'>Student</span>&gt;(<span class='pl-smi'>student</span>, <span class='pl-smi'>url</span>);
}</pre>

			<p dir='auto'>The integration model above, offers a capability to call an external API, while abstracting
				the configuration details away from the processing operational models.</p>
			<p dir='auto'>Just like any other operational model type, they don't hold data within them, but rather use
				private class members and constants to share internal data across it's public and private methods. The
				<code>ApiBroker</code> here as a model represents a simulation of integration with an external system.
			</p>
			<p dir='auto'>We will discuss Brokers extensively in upcoming chapters to shed some light on the rules and
				guidelines in developing brokers with any external resources or systems.</p>	
		</div>
		
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
					<h4 dir='auto'><a id='user-content-012011-processing-models-services' class='anchor' aria-hidden='true'
					href='#012011-processing-models-services'><svg class='octicon octicon-link' viewBox='0 0 16 16'
						version='1.1' width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>0.1.2.0.1.1 Processing Models (Services)</h4>
			<p dir='auto'>Processing models are the holders of all business-specific simulations. Things like student
				registrations, requesting a new library card or simply retrieving some student information based on a
				certain criteria. Processing models themselves can be either primitive/foundational,
				high-order/processing or advanced/orchestrators.</p>
			<p dir='auto'>Processing models in general either rely on integration models, or self-relying like
				computational processing services or rely on each other.</p>
			<p dir='auto'>Here's an example of a simple foundational/primitive service:</p>	
	<pre><span class='pl-k'>public</span> <span class='pl-k'>partial</span> <span class='pl-k'>class</span> <span class='pl-en'>StudentService</span> : <span class='pl-en'>IStudentService</span>
{
	<span class='pl-k'>private</span> <span class='pl-k'>readonly</span> <span class='pl-en'>IStorageBroker</span> <span class='pl-en'>storageBroker</span>;
	...

	<span class='pl-k'>public</span> <span class='pl-k'>async</span> <span class='pl-en'>ValueTask</span>&lt;<span class='pl-en'>Student</span>&gt; <span class='pl-en'>AddStudentAsync</span>(<span class='pl-en'>Student</span> <span class='pl-en'>student</span>) <span class='pl-k'>=&gt;</span>
		<span class='pl-k'>await</span> <span class='pl-k'>this</span>.<span class='pl-smi'>storageBroker</span>.<span class='pl-en'>InsertStudentAsync</span>(<span class='pl-smi'>student</span>);
}</pre>
			</div>
		 
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
				<p dir='auto'>A higher-order service would do/look as follows:</p>

	<pre><span class='pl-k'>public</span> <span class='pl-k'>partial</span> <span class='pl-k'>class</span> <span class='pl-en'>StudentProcessingService</span> : <span class='pl-en'>IStudentProcessingService</span>
{
	<span class='pl-k'>private</span> <span class='pl-k'>readonly</span> <span class='pl-en'>IStudentService</span> <span class='pl-en'>studentService</span>;
	...

	<span class='pl-k'>public</span> <span class='pl-k'>async</span> <span class='pl-en'>ValueTask</span>&lt;<span class='pl-en'>Student</span>&gt; <span class='pl-en'>UpsertStudentAsync</span>(<span class='pl-en'>Student</span> <span class='pl-en'>student</span>)
	{
		....

		<span class='pl-en'>Student</span> <span class='pl-en'>maybeStudent</span> <span class='pl-k'>=</span> <span class='pl-k'>await</span> <span class='pl-k'>this</span>.<span class='pl-smi'>studentService</span>
			.<span class='pl-en'>RetrieveStudentByIdAsync</span>(<span class='pl-smi'>student</span>.<span class='pl-smi'>Id</span>);
		
		<span class='pl-k'>return</span> <span class='pl-smi'>maybeStudent</span> <span class='pl-k'>switch</span>
		{
			<span class='pl-c1'>null</span> <span class='pl-k'>=&gt;</span> <span class='pl-k'>await</span> <span class='pl-k'>this</span>.<span class='pl-smi'>studentService</span>.<span class='pl-en'>AddStudentAsync</span>(<span class='pl-smi'>student</span>),
			_ <span class='pl-k'>=&gt;</span> <span class='pl-k'>await</span> <span class='pl-k'>this</span>.<span class='pl-smi'>studentService</span>.<span class='pl-en'>ModifyStudentAsync</span>(<span class='pl-smi'>student</span>)
		}
	}
}</pre> 
				<p dir='auto'>A more advanced orchestration-type services would combine from multiple processing or
					foundational services as follows:</p>
	<pre><span class='pl-k'>public</span> <span class='pl-k'>partial</span> <span class='pl-k'>class</span> <span class='pl-en'>StudentOrchestrationService</span> : <span class='pl-en'>IStudentOrchestrationService</span>
{
	<span class='pl-k'>private</span> <span class='pl-k'>readonly</span> <span class='pl-en'>IStudentProcessingService</span> <span class='pl-en'>studentProcessingService</span>;
	<span class='pl-k'>private</span> <span class='pl-k'>readonly</span> <span class='pl-en'>IStudentLibraryCardProcessingService</span> <span class='pl-en'>studentLibraryCardProcessingService</span>;
	...

	<span class='pl-k'>public</span> <span class='pl-k'>async</span> <span class='pl-en'>ValueTask</span>&lt;<span class='pl-en'>Student</span>&gt; <span class='pl-en'>RegisterStudentAsync</span>(<span class='pl-en'>Student</span> <span class='pl-en'>student</span>)
	{
		....
		<span class='pl-en'>Student</span> <span class='pl-en'>upsertedStudent</span> <span class='pl-k'>=</span> <span class='pl-k'>await</span> <span class='pl-k'>this</span>.<span class='pl-smi'>studentProcessingService</span>
			.<span class='pl-en'>UpsertStudentAsync</span>(<span class='pl-smi'>student</span>);

		...

		<span class='pl-k'>await</span> <span class='pl-k'>this</span>.<span class='pl-smi'>studentLibraryProcessingService</span>.<span class='pl-en'>AddStudentLibraryCardAsync</span>(<span class='pl-smi'>studentLibraryCard</span>);
	}
}</pre>
		
	
	</div>
  			<div class='highlight highlight-source-cs position-relative overflow-auto'>
				<p dir='auto'>In general, operational models are only concerned with the nature of simulation or processing
					of certain data carrier models, they are not concerned with withholding data, neither retaining a
					status. In general, operational models are stateless in the sense that they don't retain none of the
					details that went through them other than delegating logging for observability and monitoring purposes.
				</p>
				  			<h4 dir='auto'><a id='user-content-012012-exposure-models-exposers' class='anchor' aria-hidden='true'
					href='#012012-exposure-models-exposers'><svg class='octicon octicon-link' viewBox='0 0 16 16'
						version='1.1' width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>0.1.2.0.1.2 Exposure Models (Exposers)</h4>
			<p dir='auto'>Exposure models handle the HMI in all scenarios where a human and a system have to interact.
				They could be simple RESTful APIs, they could be SDKs or just UI like in web, mobile or desktop
				applications including commandline-based systems/terminals.</p>
			<p dir='auto'>Exposure operational models are just like the integration models, they allow the outside world
				to interact with your system. They sit on the other end of any system and they are responsible for
				routing every request, communication or call to the proper operational models. Exposure models never
				communicate directly with integration models, and they don't have any configuration within them other
				then their dependencies being injected through their constructors.</p>
			<p dir='auto'>Exposure models may have their own language in terms of operations, for instance, an
				integration model might use a language like <code>InsertStudent</code> while an exposure model for an
				API endpoint would use a language such as <code>PostStudent</code> for express the very same operation
				in an exposure context.</p>
			<p dir='auto'>Here's an example for exposure models:</p>
	<pre><span class='pl-k'>public</span> <span class='pl-k'>class</span> <span class='pl-en'>StudentsController</span>
{
	<span class='pl-k'>private</span> <span class='pl-k'>readonly</span> <span class='pl-en'>IStudentOrchestrationService</span> <span class='pl-en'>studentOrchestrationService</span>;

	[<span class='pl-en'>HttpGet</span>]
	<span class='pl-k'>public</span> <span class='pl-k'>async</span> <span class='pl-en'>ValueTask</span>&lt;<span class='pl-en'>ActionResult</span>&lt;<span class='pl-en'>Student</span>&gt;&gt; <span class='pl-en'>PostStudentAsync</span>(<span class='pl-en'>Student</span> <span class='pl-en'>student</span>)
	{
		<span class='pl-en'>Student</span> <span class='pl-en'>registeredStudent</span> <span class='pl-k'>=</span> <span class='pl-k'>await</span> <span class='pl-k'>this</span>.<span class='pl-smi'>studentOrchestrationService</span>
			.<span class='pl-en'>RegisterStudentAsync</span>(<span class='pl-smi'>student</span>);

		<span class='pl-k'>return</span> <span class='pl-en'>Ok</span>(<span class='pl-smi'>registeredStudent</span>);
	}
}</pre>		
 
			<p dir='auto'>The above model exposes an API endpoint for RESTful communication to offer a capability to
				register students into some schooling system. We will be discussing further the types of exposure models
				based on the context and the system they are implemented within.</p>	
 			</div>
			 <div class='highlight highlight-source-cs position-relative overflow-auto'>
				 	<h4 dir='auto'><a id='user-content-01202-configuration-models' class='anchor' aria-hidden='true'
					href='#01202-configuration-models'><svg class='octicon octicon-link' viewBox='0 0 16 16'
						version='1.1' width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>0.1.2.0.2 Configuration Models</h4>
			<p dir='auto'>The last type of models in any system are the configuration models. They can represent the
				entry point in any system, or register dependencies for any system or simply play the role of middleware
				to route URLs into their respective function within an exposure model.</p>
			<p dir='auto'>Configuration models usually sit at the beginning of launching a system, or handling incoming
				and ongoing communications or simply handle underlying system operations like memory caching, thread
				management and so on.</p>	 
			<p dir='auto'>In a simple API application you may see models that look like this:</p>
	 
	<pre><span class='pl-k'>public</span> <span class='pl-k'>class</span> <span class='pl-en'>Startup</span>
{
	<span class='pl-k'>public</span> <span class='pl-k'>void</span> <span class='pl-en'>ConfigureServices</span>(<span class='pl-en'>IServices</span> <span class='pl-en'>services</span>)
	{
		<span class='pl-smi'>services</span>.<span class='pl-en'>AddTransient</span>&lt;<span class='pl-en'>IStorageBroker</span>, <span class='pl-en'>StorageBroker</span>&gt;();
		<span class='pl-smi'>services</span>.<span class='pl-en'>AddOAuth</span>();
	}	
}</pre>			<p dir='auto'>As you can see the code snippet above, the configuration model <code>Startup</code> offers
				capabilities to handle dependency injection-based registration of contracts to their concrete
				implementations. They may handle adding security or setting up a middleware pipeline. Configuration
				models are technology-specific. They may differ from a Play framework in Scala to a Spring or Flex in
				Python or Java. We will outline high-level rules according to The Standard for configuration models but
				we will not dive deeper into the details of implementing any of it.</p>
			</div>	  

			<div class='highlight highlight-source-cs position-relative overflow-auto'>
			<h2 dir='auto'><a id='user-content-013-simulation' class='anchor' aria-hidden='true'
					href='#013-simulation'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>0.1.3 Simulation</h2>
			<p dir='auto'>The simulation aspect of software engineering, is our ability to resemble the interactions to
				and from the models. For instance, in the grocery store example, a simulation would be the act of
				<em>selling</em> the item. Selling the item requires multiple modifications to the item in terms of
				deducting the count of the available items and reordering the items left based on the most valuable
				available item.</p> 
			<p dir='auto'>The simulation process can be described as illustrating the relationships between models. they
				are programmed as <code>functions</code>, <code>methods</code> or <code>routines</code> and these all
				mean the same thing. If we have a software service that is responsible for items sales, a simulation
				process would look like this:</p>
	<pre><span class='pl-k'>public</span> <span class='pl-k'>class</span> <span class='pl-en'>SaleService</span>
{
	<span class='pl-k'>public</span> <span class='pl-k'>void</span> <span class='pl-en'>Sell</span>(<span class='pl-en'>Item</span> <span class='pl-en'>item</span>) <span class='pl-k'>=&gt;</span> <span class='pl-smi'>Items</span>.<span class='pl-en'>Remove</span>(<span class='pl-smi'>item</span>);
}</pre>
			<p dir='auto'>In the example above, we have a model called <code>SaleService</code> that offers a
				functionality to simulate the sales process in the real world on a model of an item. And this is how you
				describe everything in object-oriented programming. Everything is an object (from a model) and these
				objects interact with each other (simulation).</p>
			<p dir='auto'>Objects interacting in general can be observed in three different types. A model taking an
				action on another model. For instance, the <code>SaleService</code> is executing an action of
				<code>Sell</code> on an <code>Item</code> model. That's a model interacting with another model. In the
				very same example, a simulation could be something happening to the model from another model such as the
				<code>Item</code> in the aforementioned example. And the last type of simulation is a model interacting
				with itself. Models that self-dispose once their purpose is fulfilled and they are no longer needed for
				example. They will self-destruct.</p>
			<p dir='auto'>The simulation process is the third and last aspect of software engineering. Which we will
				dive deeply in when we talk about brokers, services and exposers to illustrate how the modeling and
				simulation process happens in the industrial software.</p>	 	
					</div>  
			<div class="highlight">
			<h2 dir='auto'><a id='user-content-014-summary' class='anchor' aria-hidden='true' href='#014-summary'><svg
						class='octicon octicon-link' viewBox='0 0 16 16' version='1.1' width='16' height='16'
						aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>0.1.4 Summary</h2>
			<p dir='auto'>If we considered purposing to be the domain or the framework in which models interact. Then
				the following illustration should simplify and convey the picture a bit clearer:</p></div>
				 
 			<div align='center' style='padding: 5px;' dir='auto'>
				<a target='_blank' rel='noopener noreferrer'
					href='https://user-images.githubusercontent.com/1453985/148863196-a30ced43-7133-4107-a23f-d0beb3efa6db.png'><img
						width='50%'
						src='https://user-images.githubusercontent.com/1453985/148863196-a30ced43-7133-4107-a23f-d0beb3efa6db.png'
						style='max-width: 100%;'></a>
			</div>
				 
 			<p dir='auto'>It's important to understand that a computer software can serve multiple purposes. Computer
				software can interact with other software that share common purposes. The purpose of the software
				becomes the model and the integrations becomes the simulations in that aspect. Here's a 10,000 feet
				example:</p>
				 
 			<div align='center' style='padding: 5px;' dir='auto'>
				<a target='_blank' rel='noopener noreferrer'
					href='https://user-images.githubusercontent.com/1453985/148863514-2ed0fe04-1096-42c3-b54a-3b8dbd506e7a.png'><img
						width='75%'
						src='https://user-images.githubusercontent.com/1453985/148863514-2ed0fe04-1096-42c3-b54a-3b8dbd506e7a.png'
						style='max-width: 100%;'></a>
			</div>
			 	 
			<p dir='auto'>The complexity of any large system can be very easily broken down into smaller problems if the
				single-purpose or single-responsibility aspect was enforced for each and every sub-system. That's what
				modern software architectures would call granularity and modularization. Which we will be discussing
				briefly throughout the architecture aspect of The Standard.</p>
			<p dir='auto'>[*] <a href='https://www.youtube.com/watch?v=Doul1gZKCuU' rel='nofollow'>Purposing, Modeling
					&amp; Simulation (Part 1)</a></p>	 
 		</article>
		<article class="markdown-body entry-content container-lg" itemprop="text">
 		<h1 dir="auto"><a id="user-content-1-brokers" class="anchor" aria-hidden="true" href="#1-brokers"><svg
						class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
						aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>1 Brokers</h1>
			<h2 dir="auto"><a id="user-content-10-introduction" class="anchor" aria-hidden="true" href="#10-introduction"><svg
						class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
						aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>1.0 Introduction</h2>
			<p dir="auto">Brokers play the role of a liaison between the business logic and the outside world.
				They are wrappers around any external libraries, resources, services or APIs to satisfy a local interface for
				the business to interact with these resources without having to be tightly coupled with any particular resources
				or external library implementation.</p>
			<p dir="auto">Brokers in general are meant to be disposable and replaceable - they are built with the understanding
				that technology evolves and changes all the time and therefore they shall be at some point in time in the
				lifecycle of a given application be replaced with a modern technology that gets the job done faster.</p>
			<p dir="auto">But Brokers also ensure that your business is pluggable by abstracting away any specific external
				resource dependencies from what your software is actually trying to accomplish.</p>
			<p dir="auto">For instance, let's say you have an API that was built to consume and serve data from a SQL server. At
				some point in time, you decided that a better more economical option for your API is to rely on a NoSql
				technology instead. Having a broker to abstract away the dependency on SQL will make it so much easier to simply
				integrate with NoSql with the least time and cost humanly possible.</p>
		
				<div class="highlight">
				<h2 dir="auto"><a id="user-content-11-on-the-map" class="anchor" aria-hidden="true" href="#11-on-the-map"><svg
						class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
						aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>1.1 On The Map</h2>
			<p dir="auto">In any given application, mobile, desktop, web or simply just an API - brokers usually reside at the
				"tail" of any app - that's because they are the last point of contact between our custom code and the outside
				world.</p>
			<p dir="auto">Whether the outside world in this instance is just simply a local storage in memory, or an entirely
				independent system that resides behind an API, they all have to reside behind the Brokers in any application.
			</p>
			<p dir="auto">In the following low-level architecture for a given API - Brokers reside between our business logic
				and the external resource:</p>
			
			<p align='center' style='padding: 5px;'  dir="auto">
				<a target="_blank" rel="noopener noreferrer"
					href="https://user-images.githubusercontent.com/1453985/148864693-d432be6f-13b1-4def-af95-9c63af430802.png"><img
						src="https://user-images.githubusercontent.com/1453985/148864693-d432be6f-13b1-4def-af95-9c63af430802.png"
						style="max-width: 100%;"></a>
			</p></div>
 <div class="highlight">
			<h2 dir="auto"><a id="user-content-12-characteristics" class="anchor" aria-hidden="true"
					href="#12-characteristics"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16"
						height="16" aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>1.2 Characteristics</h2>
			<p dir="auto">There are few simple rules that govern the implementation of any broker - these rules are:</p>
		</div>
			<h3 dir="auto"><a id="user-content-120-implements-a-local-interface" class="anchor" aria-hidden="true"
					href="#120-implements-a-local-interface"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1"
						width="16" height="16" aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>1.2.0 Implements a Local Interface</h3>
			<p dir="auto">Brokers have to satisfy a local contract. they have to implement a local interface to allow the
				decoupling between their implementation and the services that consume them.</p>
			<p dir="auto">For instance, given that we have a local contract <code>IStorageBroker</code> that requires an	
				implementation for any given CRUD operation for a local model <code>Student</code> - the contract operation
				would be as follows:</p>
			<div class="highlight highlight-source-cs position-relative overflow-auto">
<pre><span class="pl-k">public</span> <span class="pl-k">partial</span> <span class="pl-k">interface</span> <span class="pl-en">IStorageBroker</span>
{
	<span class="pl-en">IQueryable</span>&lt;<span class="pl-en">Student</span>&gt; <span class="pl-en">SelectAllStudents</span>();
}</pre>
			</div>	
			<p dir="auto">An implementation for a storage broker would be as follows:</p>
			<div class="highlight highlight-source-cs position-relative overflow-auto">
<pre><span class="pl-k">public</span> <span class="pl-k">partial</span> <span class="pl-k">class</span> <span class="pl-en">StorageBroker</span>
{
	<span class="pl-k">public</span> <span class="pl-en">DbSet</span>&lt;<span class="pl-en">Student</span>&gt; <span class="pl-en">Students</span> { <span class="pl-k">get</span>; <span class="pl-k">set</span>; }

	<span class="pl-k">public</span> <span class="pl-en">IQueryable</span>&lt;<span class="pl-en">Student</span>&gt; <span class="pl-en">SelectAllStudents</span>()
	{
		<span class="pl-k">using</span> <span class="pl-k">var</span> <span class="pl-en">broker</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">StorageBroker</span>(<span class="pl-k">this</span>.<span class="pl-smi">configuration</span>);

		<span class="pl-k">return</span> <span class="pl-smi">broker</span>.<span class="pl-smi">Students</span>;
	}
}</pre>
			</div>	
			<p dir="auto">A local contract implementation can be replaced at any point in time from utilizing the Entity
				Framework as shows in the previous example, to using a completely different technology like Dapper, or an
				entirely different infrastructure like an Oracle or PostgreSQL database.</p>	
			<h3 dir="auto"><a id="user-content-121-no-flow-control" class="anchor" aria-hidden="true"
					href="#121-no-flow-control"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16"
						height="16" aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>1.2.1 No Flow Control</h3>
			<p dir="auto">Brokers should not have any form of flow-control such as if-statements, while-loops or switch cases -
				that's simply because flow-control code is considered to be business logic, and it fits better the services
				layer where business logic should reside not the brokers.</p>
			<p dir="auto">For instance, a broker method that retrieves a list of students from a database would look something
				like this:</p>
			<div class="highlight highlight-source-cs position-relative overflow-auto">
<pre><span class="pl-k">public</span> <span class="pl-en">IQueryable</span>&lt;<span class="pl-en">Student</span>&gt; <span class="pl-en">SelectAllStudents</span>()
{
	<span class="pl-k">using</span> <span class="pl-k">var</span> <span class="pl-en">broker</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">StorageBroker</span>(<span class="pl-k">this</span>.<span class="pl-smi">configuration</span>);

	<span class="pl-k">return</span> <span class="pl-smi">broker</span>.<span class="pl-smi">Students</span>;
}</pre>			
			</div>
			<p dir="auto">A simple function that calls the native EntityFramework <code>DbSet&lt;T&gt;</code> and return a local
				model like <code>Student</code>.</p>	
			<h3 dir="auto"><a id="user-content-122-no-exception-handling" class="anchor" aria-hidden="true"
					href="#122-no-exception-handling"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1"
						width="16" height="16" aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>1.2.2 No Exception Handling</h3>
			<p dir="auto">Exception handling is somewhat a form of flow-control. Brokers are not supposed to handle any
				exceptions, but rather let the exception propagate to the broker-neighboring services where these exceptions are
				going to be properly mapped and localized.</p>
			<h3 dir="auto"><a id="user-content-123-own-their-configurations" class="anchor" aria-hidden="true"
					href="#123-own-their-configurations"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1"
						width="16" height="16" aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>1.2.3 Own Their Configurations</h3>
			<p dir="auto">Brokers are also required to handle their own configurations - they may have a dependency injection
				from a configuration object, to retrieve and setup the configurations for whichever external resource they are
				integrating with.</p>
			<p dir="auto">For instance, connection strings in database communications are required to be retrieved and passed in
				to the database client to establish a successful connection, as follows:</p>
			<div class="highlight highlight-source-cs position-relative overflow-auto">
<pre><span class="pl-k">public</span> <span class="pl-k">partial</span> <span class="pl-k">class</span> <span class="pl-en">StorageBroker</span> : <span class="pl-en">EFxceptionsContext</span>, <span class="pl-en">IStorageBroker</span>
{
	<span class="pl-k">private</span> <span class="pl-k">readonly</span> <span class="pl-en">IConfiguration</span> <span class="pl-en">configuration</span>;

	<span class="pl-k">public</span> <span class="pl-en">StorageBroker</span>(<span class="pl-en">IConfiguration</span> <span class="pl-en">configuration</span>)
	{
		<span class="pl-k">this</span>.<span class="pl-smi">configuration</span> <span class="pl-k">=</span> <span class="pl-smi">configuration</span>;
		<span class="pl-k">this</span>.<span class="pl-smi">Database</span>.<span class="pl-en">Migrate</span>();
	}

	<span class="pl-k">protected</span> <span class="pl-k">override</span> <span class="pl-k">void</span> <span class="pl-en">OnConfiguring</span>(<span class="pl-en">DbContextOptionsBuilder</span> <span class="pl-en">optionsBuilder</span>)
	{
		<span class="pl-k">string</span> <span class="pl-en">connectionString</span> <span class="pl-k">=</span> <span class="pl-k">this</span>.<span class="pl-smi">configuration</span>.<span class="pl-en">GetConnectionString</span>(<span class="pl-s"><span class="pl-pds">"</span>DefaultConnection<span class="pl-pds">"</span></span>);
		<span class="pl-smi">optionsBuilder</span>.<span class="pl-en">UseSqlServer</span>(<span class="pl-smi">connectionString</span>);
	}
}</pre> 
			</div>	
	
			<div class="highlight highlight-source-cs position-relative overflow-auto">
				<h3 dir="auto"><a id="user-content-124-natives-from-primitives" class="anchor" aria-hidden="true"
					href="#124-natives-from-primitives"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1"
						width="16" height="16" aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>1.2.4 Natives from Primitives</h3>
			<p dir="auto">Brokers may construct an external model object based on primitive types passed from the
				broker-neighboring services.</p>	
			<p dir="auto">For instance, in e-mail notifications broker, input parameters for a <code>.Send(...)</code> function
				for instance require the basic input parameters such as the subject, content or the address for instance, here's
				an example:</p>
<pre><span class="pl-k">public</span> <span class="pl-k">async</span> <span class="pl-en">ValueTask</span> <span class="pl-en">SendMailAsync</span>(<span class="pl-en">List</span>&lt;<span class="pl-k">string</span>&gt; <span class="pl-en">recipients</span>, <span class="pl-k">string</span> <span class="pl-en">subject</span>, <span class="pl-k">string</span> <span class="pl-en">content</span>)
{
	<span class="pl-en">Message</span> <span class="pl-en">message</span> <span class="pl-k">=</span> <span class="pl-en">BuildMessage</span>(<span class="pl-smi">recipients</span>, <span class="pl-smi">ccRecipients</span>, <span class="pl-smi">subject</span>, <span class="pl-smi">content</span>);
	<span class="pl-k">await</span> <span class="pl-en">SendEmailMessageAsync</span>(<span class="pl-smi">message</span>);
}</pre> 
			</div>
			<p dir="auto">The primitive input parameters will ensure there are no strong dependencies between the
				broker-neighboring services and the external models.
				Even in situations where the broker is simply a point of integration between your application and an external
				RESTful API, it's very highly recommended that you build your own native models to reflect the same JSON object
				sent or returned from the API instead of relying on nuget libraries, dlls or shared projects to achieve the same
				goal.</p>	
		<div class="highlight">
			<h3 dir="auto"><a id="user-content-125-naming-conventions" class="anchor" aria-hidden="true"
					href="#125-naming-conventions"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1"
						width="16" height="16" aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>1.2.5 Naming Conventions</h3>
			<p dir="auto">The contracts for the brokers shall remain as generic as possible to indicate the overall
				functionality of a broker, for instance we say <code>IStorageBroker</code> instead of
				<code>ISqlStorageBroker</code> to indicate a particular technology or infrastructure.</p>
			<p dir="auto">But in case of concrete implementations of brokers, it all depends on how many brokers you have
				providing similar functionality, in case of having a single storage broker, it might be more convenient to
				maintain the same name as the contract - in our case here a concrete implementation of
				<code>IStorageBroker</code> would be <code>StorageBroker</code>.</p>
			<p dir="auto">However, if your application supports multiple queues, storages or e-mail service providers you might
				need to start be specifying the overall target of the component, for instance, an <code>IQueueBroker</code>
				would have multiple implementations such as <code>NotificationQueueBroker</code> and
				<code>OrdersQueueBroker</code>.</p>
			<p dir="auto">But if the concrete implementations target the same model and business value, then a diversion to the
				technology might be more befitting in this case, for instance in the case of an <code>IStorageBroker</code> two
				different concrete implementations would be <code>SqlStorageBroker</code> and <code>MongoStorageBroker</code>
				this case is very possible in situations where environment costs are reduced in lower than production
				infrastructure for instance.</p>
				
		</div>
					<div class="highlight highlight-source-cs position-relative overflow-auto">
						<h3 dir="auto"><a id="user-content-126-language" class="anchor" aria-hidden="true" href="#126-language"><svg
							class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
							aria-hidden="true">
							<path fill-rule="evenodd"
								d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
							</path>
						</svg></a>1.2.6 Language</h3>
				<p dir="auto">Brokers speak the language of the technologies they support.
					For instance, in a storage broker, we say <code>SelectById</code> to match the SQL <code>Select</code> statement
					and in a queue broker we say <code>Enqueue</code> to match the language.</p>
				<p dir="auto">If a broker is supporting an API endpoint, then it shall follow the RESTFul operations language, such
					as <code>POST</code>, <code>GET</code> or <code>PUT</code>, here's an example:</p>	
<pre><span class="pl-k">public</span> <span class="pl-k">async</span> <span class="pl-en">ValueTask</span>&lt;<span class="pl-en">Student</span>&gt; <span class="pl-en">PostStudentAsync</span>(<span class="pl-en">Student</span> <span class="pl-en">student</span>) <span class="pl-k">=&gt;</span>
	<span class="pl-k">await</span> <span class="pl-k">this</span>.<span class="pl-en">PostAsync</span>(<span class="pl-smi">RelativeUrl</span>, <span class="pl-smi">student</span>);
</pre> 
			</div>	
			<div class="highlight">
			<h3 dir="auto"><a id="user-content-127-up--sideways" class="anchor" aria-hidden="true" href="#127-up--sideways"><svg
						class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
						aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>1.2.7 Up &amp; Sideways</h3>
			<p dir="auto">Brokers cannot call other brokers. that's simply because brokers are the first point of abstraction,
				they require no additional abstractions and no additional dependencies other than a configuration access model.
			</p>
			<p dir="auto">Brokers can't also have services as dependencies as the flow in any given system shall come from the
				services to the brokers and not the other way around.</p>
			<p dir="auto">Even in situations where a microservice has to subscribe to a queue for instance, brokers will pass
				forward a listener method to process incoming events, but not call the services that provide the processing
				logic.</p>
			<p dir="auto">The general rule here then would be, that brokers can only be called by services, and they can only
				call external native dependencies.</p>
			</div>
			<div class="highlight highlight-source-cs position-relative overflow-auto">
				<h2 dir="auto"><a id="user-content-13-organization" class="anchor" aria-hidden="true" href="#13-organization"><svg
					class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
					aria-hidden="true">
					<path fill-rule="evenodd"
						d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
					</path>
				</svg></a>1.3 Organization</h2>
		<p dir="auto">Brokers that support multiple entities such as Storage brokers should leverage partial classes to
			break down the responsibilities per entities.</p>
		<p dir="auto">For instance, if we have a storage broker that provides all CRUD operations for both
			<code>Student</code> and <code>Teacher</code> models, then the organization of the files should be as follows:
		</p>
		<ul dir="auto">
			<li>IStorageBroker.cs
				<ul dir="auto">
					<li>IStorageBroker.Students.cs</li>
					<li>IStorageBroker.Teachers.cs</li>
				</ul>
			</li>
			<li>StorageBroker.cs
				<ul dir="auto">
					<li>StorageBroker.Students.cs</li>
					<li>StorageBroker.Teachers.cs</li>
				</ul>
			</li>
		</ul>
		<p dir="auto">The main purpose of this particular organization leveraging partial classes is to separate the concern
			for each entity to even a finer level, which should make the maintainability of the software much higher.</p>
		<p dir="auto">But brokers files and folders naming convention strictly focuses on the plurality of the entities they
			support and the singularity for the overall resource being supported.</p>
		<p dir="auto">For instance, we say <code>IStorageBroker.Students.cs</code>. and we also say
			<code>IEmailBroker</code> or <code>IQueueBroker.Notifications.cs</code> - singular for the resource and plural
			entities.</p> 
		<p dir="auto">The same concept applies to the folders or namespaces containing these brokers.</p>	
		<p dir="auto">For instance, we say:</p>
<pre><span class="pl-k">namespace</span> <span class="pl-en">OtripleS</span>.<span class="pl-en">Web</span>.<span class="pl-en">Api</span>.<span class="pl-en">Brokers</span>.<span class="pl-en">Storages</span>
{
	...
}</pre>
			</div>
			<p dir="auto">And we say:</p>
			<div class="highlight highlight-source-cs position-relative overflow-auto">
<pre><span class="pl-k">namespace</span> <span class="pl-en">OtripleS</span>.<span class="pl-en">Web</span>.<span class="pl-en">Api</span>.<span class="pl-en">Brokers</span>.<span class="pl-en">Queues</span>
{
	...
}</pre> 
			</div>	
<div class="highlight">
			<h2 dir="auto"><a id="user-content-14-broker-types" class="anchor" aria-hidden="true" href="#14-broker-types"><svg
						class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
						aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>1.4 Broker Types</h2>
			<p dir="auto">In most of the applications built today, there are some common Brokers that are usually needed to get
				an enterprise application up and running - some of these Brokers are like Storage, Time, APIs, Logging and
				Queues.</p>
			<p dir="auto">Some of these brokers interact with existing resources on the system such as time to allow
				broker-neighboring services to treat time as a dependency and control how a particular service would behave
				based on the value of time at any point in the past, present or the future.</p>	
			</div>
			<h3 dir="auto"><a id="user-content-140-entity-brokers" class="anchor" aria-hidden="true"
					href="#140-entity-brokers"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16"
						height="16" aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>1.4.0 Entity Brokers</h3>
			<p dir="auto">Entity brokers are the brokers providing integration points with external resources that the system
				needs to fulfill a business requirements.</p>
			<p dir="auto">For instance, entity brokers are brokers that integrate with storage, providing capabilities to store
				or retrieve records from a database.</p>
			<p dir="auto">Entity brokers are also like queue brokers, providing a point of integration to push messages to a
				queue for other services to consume and process to fulfill their business logic.</p>
			<p dir="auto">Entity brokers can only be called by broker-neighboring services, simply because they require a level
				of validation that needs to be performed on the data they receive or provide before proceeding any further.</p>
			<h3 dir="auto"><a id="user-content-141-support-brokers" class="anchor" aria-hidden="true"
					href="#141-support-brokers"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16"
						height="16" aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>1.4.1 Support Brokers</h3>
			<p dir="auto">Support brokers are general purpose brokers, they provide a functionality to support services but they
				have no characteristic that makes them different from one system or another.</p>
			<p dir="auto">A good example of support brokers is the <code>DateTimeBroker</code> - a broker made specifically to
				abstract away the business layer strong dependency on the system date time.</p>
			<p dir="auto">Time brokers don't really target any specific entity, and they are almost the same across many systems
				out there.</p>
			<p dir="auto">Another example of support brokers is the <code>LoggingBroker</code> - they provide data to logging
				and monitoring systems to enable the system's engineers to visualize the overall flow of data across the system,
				and be notified in case any issues occur.</p>
			<p dir="auto">Unlike Entity Brokers - support brokers may be called across the entire business layer, they may be
				called on foundation, processing, orchestration, coordination, management or aggregation services. that's
				because logging brokers are required as a supporting component in the system to provide all the capabilities
				needed for services to log their errors or calculate a date or any other supporting functionality.</p>
			<p dir="auto">You can find real-world examples of brokers in the OtripleS project <a
					href="https://github.com/hassanhabib/OtripleS/tree/master/OtripleS.Web.Api/Brokers">here</a>.</p>
			<h2 dir="auto"><a id="user-content-15-implementation" class="anchor" aria-hidden="true"
					href="#15-implementation"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16"
						height="16" aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>1.5 Implementation</h2>	
			<p dir="auto">Here's a real-life implementation of a full storage broker for all CRUD operations for
				<code>Student</code> entity:</p>
		
			<div class="highlight highlight-source-cs position-relative overflow-auto">
				<h5 dir="auto"><a id="user-content-for-istoragebrokercs" class="anchor" aria-hidden="true"
					href="#for-istoragebrokercs"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16"
						height="16" aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>For IStorageBroker.cs:</h5>
<pre  ><span class="pl-k">namespace</span> <span class="pl-en">OtripleS</span>.<span class="pl-en">Web</span>.<span class="pl-en">Api</span>.<span class="pl-en">Brokers</span>.<span class="pl-en">Storage</span>
{
	<span class="pl-k">public</span> <span class="pl-k">partial</span> <span class="pl-k">interface</span> <span class="pl-en">IStorageBroker</span>
	{
	}
}
	</pre> 
			</div>	
			<div class="highlight highlight-source-cs position-relative overflow-auto">
				<h5 dir="auto"><a id="user-content-for-storagebrokercs" class="anchor" aria-hidden="true"
					href="#for-storagebrokercs"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16"
						height="16" aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>For StorageBroker.cs:</h5>
<pre><span class="pl-k">using</span> <span class="pl-en">System</span>;
<span class="pl-k">using</span> <span class="pl-en">EFxceptions</span>.<span class="pl-en">Identity</span>;
<span class="pl-k">using</span> <span class="pl-en">Microsoft</span>.<span class="pl-en">EntityFrameworkCore</span>;
<span class="pl-k">using</span> <span class="pl-en">Microsoft</span>.<span class="pl-en">Extensions</span>.<span class="pl-en">Configuration</span>;
<span class="pl-k">using</span> <span class="pl-en">OtripleS</span>.<span class="pl-en">Web</span>.<span class="pl-en">Api</span>.<span class="pl-en">Models</span>.<span class="pl-en">Users</span>;

<span class="pl-k">namespace</span> <span class="pl-en">OtripleS</span>.<span class="pl-en">Web</span>.<span class="pl-en">Api</span>.<span class="pl-en">Brokers</span>.<span class="pl-en">Storage</span>
{
	<span class="pl-k">public</span> <span class="pl-k">partial</span> <span class="pl-k">class</span> <span class="pl-en">StorageBroker</span> : <span class="pl-en">EFxceptionsContext</span>, <span class="pl-en">IStorageBroker</span>
	{
		<span class="pl-k">private</span> <span class="pl-k">readonly</span> <span class="pl-en">IConfiguration</span> <span class="pl-en">configuration</span>;

		<span class="pl-k">public</span> <span class="pl-en">StorageBroker</span>(<span class="pl-en">IConfiguration</span> <span class="pl-en">configuration</span>)
		{
			<span class="pl-k">this</span>.<span class="pl-smi">configuration</span> <span class="pl-k">=</span> <span class="pl-smi">configuration</span>;
			<span class="pl-k">this</span>.<span class="pl-smi">Database</span>.<span class="pl-en">Migrate</span>();
		}

		<span class="pl-k">protected</span> <span class="pl-k">override</span> <span class="pl-k">void</span> <span class="pl-en">OnConfiguring</span>(<span class="pl-en">DbContextOptionsBuilder</span> <span class="pl-en">optionsBuilder</span>)
		{
			<span class="pl-k">string</span> <span class="pl-en">connectionString</span> <span class="pl-k">=</span> <span class="pl-k">this</span>.<span class="pl-smi">configuration</span>.<span class="pl-en">GetConnectionString</span>(<span class="pl-s"><span class="pl-pds">"</span>DefaultConnection<span class="pl-pds">"</span></span>);
			<span class="pl-smi">optionsBuilder</span>.<span class="pl-en">UseSqlServer</span>(<span class="pl-smi">connectionString</span>);
		}
	}
}</pre> 
			</div>			
			<div class="highlight highlight-source-cs position-relative overflow-auto">
				<h5 dir="auto"><a id="user-content-for-istoragebrokerstudentscs" class="anchor" aria-hidden="true"
					href="#for-istoragebrokerstudentscs"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1"
						width="16" height="16" aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>For IStorageBroker.Students.cs:</h5>
<pre><span class="pl-k">using</span> <span class="pl-en">System</span>;
<span class="pl-k">using</span> <span class="pl-en">System</span>.<span class="pl-en">Linq</span>;
<span class="pl-k">using</span> <span class="pl-en">System</span>.<span class="pl-en">Threading</span>.<span class="pl-en">Tasks</span>;
<span class="pl-k">using</span> <span class="pl-en">OtripleS</span>.<span class="pl-en">Web</span>.<span class="pl-en">Api</span>.<span class="pl-en">Models</span>.<span class="pl-en">Students</span>;

<span class="pl-k">namespace</span> <span class="pl-en">OtripleS</span>.<span class="pl-en">Web</span>.<span class="pl-en">Api</span>.<span class="pl-en">Brokers</span>.<span class="pl-en">Storage</span>
{
	<span class="pl-k">public</span> <span class="pl-k">partial</span> <span class="pl-k">interface</span> <span class="pl-en">IStorageBroker</span>
	{
		<span class="pl-k">public</span> <span class="pl-en">ValueTask</span>&lt;<span class="pl-en">Student</span>&gt; <span class="pl-en">InsertStudentAsync</span>(<span class="pl-en">Student</span> <span class="pl-en">student</span>);
		<span class="pl-k">public</span> <span class="pl-en">IQueryable</span>&lt;<span class="pl-en">Student</span>&gt; <span class="pl-en">SelectAllStudents</span>();
		<span class="pl-k">public</span> <span class="pl-en">ValueTask</span>&lt;<span class="pl-en">Student</span>&gt; <span class="pl-en">SelectStudentByIdAsync</span>(<span class="pl-en">Guid</span> <span class="pl-en">studentId</span>);
		<span class="pl-k">public</span> <span class="pl-en">ValueTask</span>&lt;<span class="pl-en">Student</span>&gt; <span class="pl-en">UpdateStudentAsync</span>(<span class="pl-en">Student</span> <span class="pl-en">student</span>);
		<span class="pl-k">public</span> <span class="pl-en">ValueTask</span>&lt;<span class="pl-en">Student</span>&gt; <span class="pl-en">DeleteStudentAsync</span>(<span class="pl-en">Student</span> <span class="pl-en">student</span>);
	}
}</pre>
			</div>
			<div class="highlight highlight-source-cs position-relative overflow-auto">
				<h5 dir="auto"><a id="user-content-for-storagebrokerstudentscs" class="anchor" aria-hidden="true"
					href="#for-storagebrokerstudentscs"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1"
						width="16" height="16" aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>For StorageBroker.Students.cs:</h5>
<pre><span class="pl-k">using</span> <span class="pl-en">System</span>;
<span class="pl-k">using</span> <span class="pl-en">System</span>.<span class="pl-en">Linq</span>;
<span class="pl-k">using</span> <span class="pl-en">System</span>.<span class="pl-en">Threading</span>.<span class="pl-en">Tasks</span>;
<span class="pl-k">using</span> <span class="pl-en">Microsoft</span>.<span class="pl-en">EntityFrameworkCore</span>;
<span class="pl-k">using</span> <span class="pl-en">Microsoft</span>.<span class="pl-en">EntityFrameworkCore</span>.<span class="pl-en">ChangeTracking</span>;
<span class="pl-k">using</span> <span class="pl-en">OtripleS</span>.<span class="pl-en">Web</span>.<span class="pl-en">Api</span>.<span class="pl-en">Models</span>.<span class="pl-en">Students</span>;

<span class="pl-k">namespace</span> <span class="pl-en">OtripleS</span>.<span class="pl-en">Web</span>.<span class="pl-en">Api</span>.<span class="pl-en">Brokers</span>.<span class="pl-en">Storage</span>
{
	<span class="pl-k">public</span> <span class="pl-k">partial</span> <span class="pl-k">class</span> <span class="pl-en">StorageBroker</span>
	{
		<span class="pl-k">public</span> <span class="pl-en">DbSet</span>&lt;<span class="pl-en">Student</span>&gt; <span class="pl-en">Students</span> { <span class="pl-k">get</span>; <span class="pl-k">set</span>; }

		<span class="pl-k">public</span> <span class="pl-k">async</span> <span class="pl-en">ValueTask</span>&lt;<span class="pl-en">Student</span>&gt; <span class="pl-en">InsertStudentAsync</span>(<span class="pl-en">Student</span> <span class="pl-en">student</span>)
		{
			<span class="pl-k">using</span> <span class="pl-k">var</span> <span class="pl-en">broker</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">StorageBroker</span>(<span class="pl-k">this</span>.<span class="pl-smi">configuration</span>);

			<span class="pl-en">EntityEntry</span>&lt;<span class="pl-en">Student</span>&gt; <span class="pl-en">studentEntityEntry</span> <span class="pl-k">=</span>
				<span class="pl-k">await</span> <span class="pl-smi">broker</span>.<span class="pl-smi">Students</span>.<span class="pl-en">AddAsync</span>(<span class="pl-en">entity</span>: <span class="pl-smi">profile</span>);

			<span class="pl-k">await</span> <span class="pl-smi">broker</span>.<span class="pl-en">SaveChangesAsync</span>();

			<span class="pl-k">return</span> <span class="pl-smi">studentEntityEntry</span>.<span class="pl-smi">Entity</span>;
		}

		<span class="pl-k">public</span> <span class="pl-en">IQueryable</span>&lt;<span class="pl-en">Student</span>&gt; <span class="pl-en">SelectAllStudents</span>()
		{
			<span class="pl-k">using</span> <span class="pl-k">var</span> <span class="pl-en">broker</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">StorageBroker</span>(<span class="pl-k">this</span>.<span class="pl-smi">configuration</span>);

			<span class="pl-k">return</span> <span class="pl-smi">broker</span>.<span class="pl-smi">Students</span>;
		}

		<span class="pl-k">public</span> <span class="pl-k">async</span> <span class="pl-en">ValueTask</span>&lt;<span class="pl-en">Student</span>&gt; <span class="pl-en">SelectStudentByIdAsync</span>(<span class="pl-en">Guid</span> <span class="pl-en">studentId</span>)
		{
			<span class="pl-k">using</span> <span class="pl-k">var</span> <span class="pl-en">broker</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">StorageBroker</span>(<span class="pl-k">this</span>.<span class="pl-smi">configuration</span>);

			<span class="pl-smi">broker</span>.<span class="pl-smi">ChangeTracker</span>.<span class="pl-smi">QueryTrackingBehavior</span> <span class="pl-k">=</span>
				<span class="pl-smi">QueryTrackingBehavior</span>.<span class="pl-smi">NoTracking</span>;

			<span class="pl-k">return</span> <span class="pl-k">await</span> <span class="pl-smi">broker</span>.<span class="pl-smi">Students</span>.<span class="pl-en">FindAsync</span>(<span class="pl-smi">studentId</span>);
		}

		<span class="pl-k">public</span> <span class="pl-k">async</span> <span class="pl-en">ValueTask</span>&lt;<span class="pl-en">Student</span>&gt; <span class="pl-en">UpdateStudentAsync</span>(<span class="pl-en">Student</span> <span class="pl-en">student</span>)
		{
			<span class="pl-k">using</span> <span class="pl-k">var</span> <span class="pl-en">broker</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">StorageBroker</span>(<span class="pl-k">this</span>.<span class="pl-smi">configuration</span>);

			<span class="pl-en">EntityEntry</span>&lt;<span class="pl-en">Student</span>&gt; <span class="pl-en">studentEntityEntry</span> <span class="pl-k">=</span>
				<span class="pl-smi">broker</span>.<span class="pl-smi">Students</span>.<span class="pl-en">Update</span>(<span class="pl-en">entity</span>: <span class="pl-smi">student</span>);

			<span class="pl-k">await</span> <span class="pl-smi">broker</span>.<span class="pl-en">SaveChangesAsync</span>();

			<span class="pl-k">return</span> <span class="pl-smi">studentEntityEntry</span>.<span class="pl-smi">Entity</span>;
		}

		<span class="pl-k">public</span> <span class="pl-k">async</span> <span class="pl-en">ValueTask</span>&lt;<span class="pl-en">Student</span>&gt; <span class="pl-en">DeleteStudentAsync</span>(<span class="pl-en">Student</span> <span class="pl-en">student</span>)
		{
			<span class="pl-k">using</span> <span class="pl-k">var</span> <span class="pl-en">broker</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">StorageBroker</span>(<span class="pl-k">this</span>.<span class="pl-smi">configuration</span>);

			<span class="pl-en">EntityEntry</span>&lt;<span class="pl-en">Student</span>&gt; <span class="pl-en">studentEntityEntry</span> <span class="pl-k">=</span>
				<span class="pl-smi">broker</span>.<span class="pl-smi">Students</span>.<span class="pl-en">Remove</span>(<span class="pl-en">entity</span>: <span class="pl-smi">student</span>);
				
			<span class="pl-k">await</span> <span class="pl-smi">broker</span>.<span class="pl-en">SaveChangesAsync</span>();

			<span class="pl-k">return</span> <span class="pl-smi">studentEntityEntry</span>.<span class="pl-smi">Entity</span>;
		}
	}
}</pre> 
			</div>	
			<div class="highlight">
			<h2 dir="auto"><a id="user-content-16-summary" class="anchor" aria-hidden="true" href="#16-summary"><svg
						class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
						aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>1.6 Summary</h2>
			<p dir="auto">Brokers are the first layer of abstraction between your business logic and the outside world, but they
				are not the only layer of abstraction. simply because there will still be few native models that leak through
				your brokers to your broker-neighboring services which is natural to avoid doing any mappings outside of the
				realm of logic, in our case here the foundation services.</p>
			<p dir="auto">For instance, in a storage broker, regardless what ORM you are using, some native exceptions from your
				ORM (EntityFramework for instance) will occur, such as <code>DbUpdateException</code> or
				<code>SqlException</code> - in that case we need another layer of abstraction to play the role of a mapper
				between these exceptions and our core logic to convert them into local exception models.</p>
			<p dir="auto">This responsibility lies in the hands of the broker-neighboring services, I also call them foundation
				services, these services are the last point of abstraction before your core logic, in which everything becomes
				nothing but local models and contracts.</p>	</div>
			<h2 dir="auto"><a id="user-content-17-faqs" class="anchor" aria-hidden="true" href="#17-faqs"><svg
						class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
						aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>1.7 FAQs</h2>
			<p dir="auto">During the course of time, there have been some common questions that arose by the engineers that I
				had the opportunity to work with throughout my career - since some of these questions reoccurred on several
				occasions, I thought it might be useful to aggregate all of them in here for everyone to learn about some other
				perspectives around brokers.</p>	
			<h4 dir="auto"><a id="user-content-170-is-the-brokers-pattern-the-same-as-the-repository-pattern" class="anchor"
					aria-hidden="true" href="#170-is-the-brokers-pattern-the-same-as-the-repository-pattern"><svg
						class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
						aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>1.7.0 Is the brokers pattern the same as the repository pattern?</h4>
			<p dir="auto">Not exactly, at least from an operational standpoint, brokers seems to be more generic than
				repositories.</p>
			<p dir="auto">Repositories usually target storage-like operations, mainly towards databases. but brokers can be an
				integration point with any external dependency such as e-mail services, queues, other APIs and such.</p>
			<p dir="auto">A more similar pattern for brokers is the Unit of Work pattern, it mainly focuses on the overall
				operation without having to tie the definition or the name with any particular operation.</p>
			<p dir="auto">All of these patterns in general try to achieve the same SOLID principles goal, which is the
				separation of concern, dependency injection and single responsibility.</p>
			<p dir="auto">But because SOLID are principles and not exact guidelines, it's expected to see all different kinds of
				implementations and patterns to achieve that principle.</p>	
			<h4 dir="auto"><a
					id="user-content-171-why-cant-the-brokers-implement-a-contract-for-methods-that-return-an-interface-instead-of-a-concrete-model"
					class="anchor" aria-hidden="true"
					href="#171-why-cant-the-brokers-implement-a-contract-for-methods-that-return-an-interface-instead-of-a-concrete-model"><svg
						class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
						aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>1.7.1 Why can't the brokers implement a contract for methods that return an interface instead of a
				concrete model?</h4>
			<p dir="auto">That would be an ideal situation, but that would also require brokers to do a conversion or mapping
				between the native models returned from the external resource SDKs or APIs and the internal model that adheres
				to the local contract.</p>
			<p dir="auto">Doing that on the broker level will require pushing business logic into that realm, which is outside
				of the purpose of that component completely.</p>
			<p dir="auto">Brokers do not get unit tested because they have no business logic in them, they may be a part of an
				acceptance or an integration test, but certainly not a part of unit level tests - simply because they don't
				contain any business logic in them. We define business logic code as any intended sequential, selective or
				iteration code.</p>	
				<div class="highlight">
			<h4 dir="auto"><a
					id="user-content-172-if-brokers-were-truly-a-layer-of-abstraction-from-the-business-logic-how-come-we-allow-external-exceptions-to-leak-through-them-onto-the-services-layer"
					class="anchor" aria-hidden="true"
					href="#172-if-brokers-were-truly-a-layer-of-abstraction-from-the-business-logic-how-come-we-allow-external-exceptions-to-leak-through-them-onto-the-services-layer"><svg
						class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
						aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>1.7.2 If brokers were truly a layer of abstraction from the business logic, how come we allow
				external exceptions to leak through them onto the services layer?</h4>
			<p dir="auto">Brokers are only the <em>the first</em> layer of abstraction, but not the only one - the broker
				neighboring services are responsible for converting the native exceptions occurring from a broker into a more
				local exception model that can be handled and processed internally within the business logic realm.</p>
			<p dir="auto">Full pure local code starts to occur on the processing, orchestration, coordination and aggregation
				layers where all the exceptions, all the returned models and all operations are localized to the system.</p>
			</div>
			<div class="highlight">
				<h4 dir="auto"><a id="user-content-173-why-do-we-use-partial-classes-for-brokers-who-handle-multiple-entities"
					class="anchor" aria-hidden="true"
					href="#173-why-do-we-use-partial-classes-for-brokers-who-handle-multiple-entities"><svg
						class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
						aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>1.7.3 Why do we use partial classes for brokers who handle multiple entities?</h4>
			<p dir="auto">Since brokers are required to own their own configurations, it made more sense to partialize when
				possible to avoid reconfiguring every storage broker for each entity.</p>
			<p dir="auto">This is a feature in C# specifically as a language, but it should be possible to implement through
				inheritance in other programming languages.</p>	
			</div>
			<div class="highlight">
			<h4 dir="auto"><a id="user-content-174-are-brokers-the-same-as-providers-provider-pattern" class="anchor"
					aria-hidden="true" href="#174-are-brokers-the-same-as-providers-provider-pattern"><svg
						class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
						aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>1.7.4 Are brokers the same as providers (Provider Pattern)?</h4>
			<p dir="auto">No. Providers blur the line between services (business logic) and brokers (integration layer) -
				brokers are targeting particular components within the system that are disposable. Providers seem to include
				more than just that.</p>
			<p dir="auto">[*] <a href="https://www.youtube.com/watch?v=6NlgSskQXSo" rel="nofollow">Implementing Abstract
					Components (Brokers)</a></p>
			<p dir="auto">[*] <a href="https://www.youtube.com/watch?v=d1cqEKMBmno" rel="nofollow">Implementing Abstract
					Components (Part 2)</a></p>
			<p dir="auto">[*] <a href="https://www.youtube.com/watch?v=6sD5zz9BuOk" rel="nofollow">Generating Model Migrations
					w/ EntityFramework</a></p>
					</div>
 		</article>
		<article class='markdown-body entry-content container-lg' itemprop='text'>
			<h1 dir='auto'><a id='user-content-2-services' class='anchor' aria-hidden='true' href='#2-services'><svg
						class='octicon octicon-link' viewBox='0 0 16 16' version='1.1' width='16' height='16'
						aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2 Services</h1>
			<h2 dir='auto'><a id='user-content-20-introduction' class='anchor' aria-hidden='true'
					href='#20-introduction'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.0 Introduction</h2>
			<p dir='auto'>Services in general are the containers of all the business logic in any given software - they
				are the core component of any system and the main component that makes one system different from
				another.</p>
			<p dir='auto'>Our main goal with services is that to keep them completely agnostic from specific
				technologies or external dependencies.</p>
			<p dir='auto'>Any business layer is more compliant with The Standard if it can be plugged into any other
				dependencies and exposure technologies with the least amount of integration efforts possible.</p>
			<h3 dir='auto'><a id='user-content-200-services-operations' class='anchor' aria-hidden='true'
					href='#200-services-operations'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.0.0 Services Operations</h3>
			<p dir='auto'>When we say business logic, we mainly refer to three main categories of operations, which are
				validation, processing and integration.</p>
			
			<p align='center' style='padding: 5px;' dir='auto'>
				<a target='_blank' rel='noopener noreferrer'
					href='https://user-images.githubusercontent.com/1453985/100530065-4494d680-31a2-11eb-8393-32b21ab99a3d.png'><img
						src='https://user-images.githubusercontent.com/1453985/100530065-4494d680-31a2-11eb-8393-32b21ab99a3d.png'
						style='max-width: 100%;'></a>
			</p>
			
			<p dir='auto'>Let's talk about these categories.</p>
			<div class="highlight">
			<h4 dir='auto'><a id='user-content-2000-validations' class='anchor' aria-hidden='true'
					href='#2000-validations'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.0.0.0 Validations</h4>
			<p dir='auto'>Validations focus on ensuring that the incoming or outgoing data match a particular set of
				rules, which can be structural, logical or external validations, in that exact order of priority. We
				will go in details about this in the upcoming sections.</p>
			</div>
			<div class="highlight">
			<h4 dir='auto'><a id='user-content-2001-processing' class='anchor' aria-hidden='true'
					href='#2001-processing'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.0.0.1 Processing</h4>
			<p dir='auto'>Processing mainly focuses on the flow-control, mapping and computation to satisfy a business
				need - the processing operations specifically is what distinguishes one service from another, and in
				general one software from another.</p>
			</div>
			<div class="highlight">
			<h4 dir='auto'><a id='user-content-2002-integration' class='anchor' aria-hidden='true'
					href='#2002-integration'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.0.0.2 Integration</h4>
			<p dir='auto'>Finally, the integration process is mainly focused on retrieving or pushing data from or to
				any integrated system dependencies.</p>
			<p dir='auto'>Every one of these aspects will be discussed in details in the upcoming chapter, but the main
				thing that should be understood about services is that they should be built with the intent to be
				pluggable and configurable so they are easily integrated with any technology from a dependency
				standpoint and also be easily plugged into any exposure functionality from an API perspective.</p>
			</div>
			<div class="highlight">
			<h3 dir='auto'><a id='user-content-201-services-types' class='anchor' aria-hidden='true'
					href='#201-services-types'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.0.1 Services Types</h3>
			<p dir='auto'>But services have several types based on where they stand in any given architecture, they fall
				under three main categories, which are: validators, orchestrators and aggregators.</p>
 			<p align='center' style='padding: 5px;' dir='auto'>
				<a target='_blank' rel='noopener noreferrer'
					href='https://user-images.githubusercontent.com/1453985/100529444-b23e0400-319c-11eb-816a-59c73154542b.png'><img
						src='https://user-images.githubusercontent.com/1453985/100529444-b23e0400-319c-11eb-816a-59c73154542b.png'
						style='max-width: 100%;'></a>
			</p>
			 </div>
			<div class="highlight">
 			<h4 dir='auto'><a id='user-content-2010-validators' class='anchor' aria-hidden='true'
					href='#2010-validators'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.0.1.0 Validators</h4>
			<p dir='auto'>Validator services are mainly the broker-neighboring services or foundation services.</p>
			<p dir='auto'>These services' main responsibility is to add a validation layer on top of the existing
				primitive operations such as the CRUD operations to ensure incoming and outgoing data is validated
				structurally, logically and externally before sending the data in or out of the system.</p>
			<h4 dir='auto'><a id='user-content-2011-orchestrators' class='anchor' aria-hidden='true'
					href='#2011-orchestrators'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.0.1.1 Orchestrators</h4>
			<p dir='auto'>Orchestrator services are the core of the business logic layer, they can be processors,
				orchestrators, coordinators or management services depending on the type of their dependencies.</p>
			<p dir='auto'>Orchestrator services mainly focuses on combining multiple primitive operations, or multiple
				high-order business logic operations to achieve an even higher goal.</p>
			<p dir='auto'>Orchestrators services are the decision makers within any architecture, they are the owners of
				the flow-control in any system and they are the main component that makes one application or software
				different from the other.</p>
			<p dir='auto'>Orchestrator services are also meant to be built and live longer than any other type of
				services in the system.</p>
			</div>
			<div class="highlight">	
			<h4 dir='auto'><a id='user-content-2012-aggregators' class='anchor' aria-hidden='true'
					href='#2012-aggregators'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.0.1.2 Aggregators</h4>
			<p dir='auto'>Aggregator services main responsibility is to tie the outcome of multiple processing,
				orchestration, coordination or management services to expose one single API for any given API
				controller, or UI component to interact with the rest of the system.</p>
			<p dir='auto'>Aggregators are the gatekeepers of the business logic layer, they ensure the data exposure
				components (like API controllers) are interacting with only one point of contact to interact with the
				rest of the system.</p>
			<p dir='auto'>Aggregators in general don't really care about the order in which they call the operations
				that is attached to them, but sometimes it becomes a necessity to execute a particular operation, such
				as creating a student record before assigning a library card to them.</p>
			<p dir='auto'>We will discuss each and every type of these services in detail in the next chapters.</p>
			</div>
			<div class="highlight">
			<h3 dir='auto'><a id='user-content-202-overall-rules' class='anchor' aria-hidden='true'
					href='#202-overall-rules'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.0.2 Overall Rules</h3>
			<p dir='auto'>There are several rules that govern the overall architecture and design of services in any
				system.</p>
			<p dir='auto'>These rules ensure the overall readability, maintainability, configurability of the system -
				in that particular order.</p>
			</div>
			<div class="highlight">
			<h4 dir='auto'><a id='user-content-2020-do-or-delegate' class='anchor' aria-hidden='true'
					href='#2020-do-or-delegate'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.0.2.0 Do or Delegate</h4>
			<p dir='auto'>Every service should either do the work or delegate the work but not both.</p>
			<p dir='auto'>For instance, a processing service should delegate the work of persisting data to a foundation
				service and not try to do that work by itself.</p>
				</div>
				<div class="highlight">
			<h4 dir='auto'><a id='user-content-2021-two-three-florance-pattern' class='anchor' aria-hidden='true'
					href='#2021-two-three-florance-pattern'><svg class='octicon octicon-link' viewBox='0 0 16 16'
						version='1.1' width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.0.2.1 Two-Three (Florance Pattern)</h4>
			<p dir='auto'>For Orchestrator services, their dependencies of services (not brokers) should be limited to 2
				or 3 but not 1 and not 4 or more.</p>
			<p dir='auto'>The dependency on one service denies the very definition of orchestration. That's because
				orchestration by definition is the combination between multiple different operations from different
				sources to achieve a higher order of business-logic.</p>
				</div>
		<div class='highlight'>
				<h5 dir='auto'><a id='user-content-this-pattern-violates-florance-pattern' class='anchor' aria-hidden='true'
					href='#this-pattern-violates-florance-pattern'><svg class='octicon octicon-link' viewBox='0 0 16 16'
						version='1.1' width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>This pattern violates Florance Pattern</h5>
			
			<p align='center' style='padding: 5px;' dir='auto'>
				<a target='_blank' rel='noopener noreferrer'
					href='https://user-images.githubusercontent.com/1453985/100561648-4926c100-326e-11eb-9028-96bcd3eb0b1d.png'><img
						src='https://user-images.githubusercontent.com/1453985/100561648-4926c100-326e-11eb-9028-96bcd3eb0b1d.png'
						style='max-width: 100%;'></a>
			</p>
			</div>
			
			<div class='highlight'>
			<h5 dir='auto'><a id='user-content-this-pattern-follows-the-symmetry-of-the-pattern' class='anchor'
					aria-hidden='true' href='#this-pattern-follows-the-symmetry-of-the-pattern'><svg
						class='octicon octicon-link' viewBox='0 0 16 16' version='1.1' width='16' height='16'
						aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>This pattern follows the symmetry of the Pattern</h5>
			
			<p align='center' style='padding: 5px;' dir='auto'>
				<a target='_blank' rel='noopener noreferrer'
					href='https://user-images.githubusercontent.com/1453985/100561978-2a74fa00-326f-11eb-9d05-404eed3eaf5f.png'><img
						src='https://user-images.githubusercontent.com/1453985/100561978-2a74fa00-326f-11eb-9d05-404eed3eaf5f.png'
						style='max-width: 100%;'></a>
			</p>	</div>
			
			<p dir='auto'>The Florance pattern also ensures the balance and symmetry of the overall architecture as
				well.</p>
			<p dir='auto'>For instance, you can't orchestrate between a foundation and a processing service, it causes a
				form of unbalance in your architecture, and an uneasy disturbance in trying to combine one unified
				statement with the language each service speaks based on their level and type.</p>
			<p dir='auto'>The only type of services that is allowed to violate this rule are the aggregators, where the
				combination and the order of services or their calls doesn't have any real impact.</p>
			<p dir='auto'>We will be discussing the Florance pattern a bit further in detail in the upcoming sections of
				The Standard.</p>
				<div class='highlight'>
			<h4 dir='auto'><a id='user-content-2022-single-exposure-point' class='anchor' aria-hidden='true'
					href='#2022-single-exposure-point'><svg class='octicon octicon-link' viewBox='0 0 16 16'
						version='1.1' width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.0.2.2 Single Exposure Point</h4>
			<p dir='auto'>API controllers, UI components or any other form of data exposure from the system should have
				one single point of contact with the business-logic layer.</p>
			<p dir='auto'>For instance, an API endpoint that offer endpoints for persisting and retrieving student data,
				should not have multiple integrations with multiple services, but rather one service that offers all of
				these features.</p>
			<p dir='auto'>Sometimes, a single orchestration, coordination or management service does not offer
				everything related to a particular entity, in which case an aggregator service is necessary to combine
				all of these features into one service ready to be integrated with by an exposure technology.</p>
			    </div>
				<div class='highlight'>
			<h4 dir='auto'><a id='user-content-2023-same-or-primitives-io-model' class='anchor' aria-hidden='true'
					href='#2023-same-or-primitives-io-model'><svg class='octicon octicon-link' viewBox='0 0 16 16'
						version='1.1' width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.0.2.3 Same or Primitives I/O Model</h4>
			<p dir='auto'>For all services, they have to maintain a single contract in terms of their return and input
				types, except if they were primitives.</p>
			<p dir='auto'>For instance, a service that provides any kind of operations for an entity type
				<code>Student</code> - should not return from any of its methods any other entity type.</p>
			<p dir='auto'>You may return an aggregation of the same entity whether it's custom or native such as
				<code>List&lt;Student&gt;</code> or <code>AggregatedStudents</code> models, or a primitive type like
				getting students count, or a boolean indicating whether a student exists or not but not any other
				non-primitive or non-aggregating contract.</p>
			<p dir='auto'>For input parameters a similar rule applies - any service may receive an input parameter of
				the same contract or a virtual aggregation contract or a primitive type but not any other contract, that
				simply violates the rule.</p>
			<p dir='auto'>This rule enforces the focus of any service to maintain it's responsibility on a single entity
				and all it's related operations.</p>
			<p dir='auto'>Once a service returns a different contract, it simply violates it's own naming convention
				like a <code>StudentOrchestrationService</code> returning <code>List&lt;Teacher&gt;</code> - and it
				starts falling into the trap of being called by other services from a completely different data
				pipelines.</p>
			<p dir='auto'>For primitive input parameters, if they belong to a different entity model, that is not
				necessarily a reference on the main entity, it begs the question to orchestrate between two processing
				or foundation services to maintain a unified model without break the pure-contracting rule.</p>
			<p dir='auto'>If the combination between multiple different contracts in an orchestration service is
				required, then a new unified virtual model has to be the new unique contract for the orchestration
				service with mappings implemented underneath on the concrete level of that service to maintain
				compatibility and integration safety.</p>
			</div>
			<div class='highlight'>
			<h4 dir='auto'><a id='user-content-2024-every-service-for-itself' class='anchor' aria-hidden='true'
					href='#2024-every-service-for-itself'><svg class='octicon octicon-link' viewBox='0 0 16 16'
						version='1.1' width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.0.2.4 Every Service for Itself</h4>
			<p dir='auto'>Every service is responsible for validating its inputs and outputs. You should not rely on
				services up or downstream to validate your data.</p>
			<p dir='auto'>This is a defensive programming mechanism to ensure that in case of swapping implementations
				behind contracts, the responsibility of any given services wouldn't be affected if down or upstream
				services decided to pass on their validations for any reason.</p>
			<p dir='auto'>Within any monolithic, microservice or serverless architecture-based system, every service is
				built with the intent that it would split off of the system at some point, and become the last point of
				contact before integrating with some external resource broker.</p>
			<p dir='auto'>For instance, in the following architecture, services are mapping parts of an input
				<code>Student</code> model into a <code>LibraryCard</code> model, here's a visual of the models:</p>
			</div>
 		
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
				<h5 dir='auto'><a id='user-content-student' class='anchor' aria-hidden='true' href='#student'><svg
					class='octicon octicon-link' viewBox='0 0 16 16' version='1.1' width='16' height='16'
					aria-hidden='true'>
					<path fill-rule='evenodd'
						d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
					</path>
				</svg></a>Student</h5>
	<pre><span class='pl-k'>public</span> <span class='pl-k'>class</span> <span class='pl-en'>Student</span>
{
	<span class='pl-k'>public</span> <span class='pl-en'>Guid</span> <span class='pl-en'>Id</span> {<span class='pl-k'>get</span>; <span class='pl-k'>set</span>;}
	<span class='pl-k'>public</span> <span class='pl-k'>string</span> <span class='pl-en'>Name</span> {<span class='pl-k'>get</span>; <span class='pl-k'>set</span>;}
}</pre>
			</div>
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
				<h5 dir='auto'><a id='user-content-librarycard' class='anchor' aria-hidden='true' href='#librarycard'><svg
					class='octicon octicon-link' viewBox='0 0 16 16' version='1.1' width='16' height='16'
					aria-hidden='true'>
					<path fill-rule='evenodd'
						d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
					</path>
				</svg></a>LibraryCard</h5>
	<pre><span class='pl-k'>public</span> <span class='pl-k'>class</span> <span class='pl-en'>LibraryCard</span>
{
	<span class='pl-k'>public</span> <span class='pl-en'>Guid</span> <span class='pl-en'>Id</span> {<span class='pl-k'>get</span>; <span class='pl-k'>set</span>;}
	<span class='pl-k'>public</span> <span class='pl-en'>Guid</span> <span class='pl-en'>StudentId</span> {<span class='pl-k'>get</span>; <span class='pl-k'>set</span>;}
}</pre>
			</div>
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
				<p dir='auto'>Now, assume that our orchestrator service <code>StudentOrchestrationService</code> is ensuring
					every new student that gets registered will need to have a library card, so our logic may look as
					follows:</p>
	<pre><span class='pl-k'>public</span> <span class='pl-k'>async</span> <span class='pl-en'>ValueTask</span>&lt;<span class='pl-en'>Student</span>&gt; <span class='pl-en'>RegisterStudentAsync</span>(<span class='pl-en'>Student</span> <span class='pl-en'>student</span>)
{
	<span class='pl-en'>Student</span> <span class='pl-en'>registeredStudent</span> <span class='pl-k'>=</span>
		<span class='pl-k'>await</span> <span class='pl-k'>this</span>.<span class='pl-smi'>studentProcessingService</span>.<span class='pl-en'>RegisterStudentAsync</span>(<span class='pl-smi'>student</span>);

	<span class='pl-k'>await</span> <span class='pl-en'>AssignStudentLibraryCardAsync</span>(<span class='pl-smi'>student</span>);

	<span class='pl-k'>return</span> <span class='pl-smi'>registeredStudent</span>;
}

<span class='pl-k'>private</span> <span class='pl-k'>async</span> <span class='pl-en'>ValueTask</span>&lt;<span class='pl-en'>LibraryCard</span>&gt; <span class='pl-en'>AssignStudentLibraryCardAsync</span>(<span class='pl-en'>Student</span> <span class='pl-en'>student</span>)
{
	<span class='pl-en'>LibraryCard</span> <span class='pl-en'>studentLibraryCard</span> <span class='pl-k'>=</span> <span class='pl-en'>MapToLibraryCard</span>(<span class='pl-smi'>student</span>);

	<span class='pl-k'>return</span> <span class='pl-k'>await</span> <span class='pl-k'>this</span>.<span class='pl-smi'>libraryCardProcessingService</span>.<span class='pl-en'>AddLibraryCardAsync</span>(<span class='pl-smi'>studentLibraryCard</span>);
}

<span class='pl-k'>private</span> <span class='pl-en'>LibraryCard</span> <span class='pl-en'>MapToLibraryCard</span>(<span class='pl-en'>Student</span> <span class='pl-en'>student</span>)
{
	<span class='pl-k'>return</span> <span class='pl-k'>new</span> <span class='pl-en'>LibraryCard</span>
	{
		<span class='pl-smi'>Id</span> <span class='pl-k'>=</span> <span class='pl-smi'>Guid</span>.<span class='pl-en'>NewGuid</span>(),
		<span class='pl-smi'>StudentId</span> <span class='pl-k'>=</span> <span class='pl-smi'>student</span>.<span class='pl-smi'>Id</span>
	};
}</pre>
	<p dir='auto'>As you can see above, a valid student id is required to ensure a successful mapping to a
	<code>LibraryCard</code> - and since the mapping is the orchestrator's responsibility, we are required
	to ensure that the input student and its id is in good shape before proceeding with the orchestration
	process.</p>
			</div>
		</article>
		<article class='markdown-body entry-content container-lg' itemprop='text'>
			<h1 dir='auto'><a id='user-content-21-foundation-services-broker-neighboring' class='anchor'
					aria-hidden='true' href='#21-foundation-services-broker-neighboring'><svg
						class='octicon octicon-link' viewBox='0 0 16 16' version='1.1' width='16' height='16'
						aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.1 Foundation Services (Broker-Neighboring)</h1>
			<h2 dir='auto'><a id='user-content-210-introduction' class='anchor' aria-hidden='true'
					href='#210-introduction'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.1.0 Introduction</h2>
			<p dir='auto'>Foundation services are the first point of contact between your business logic and the
				brokers.</p>
			<p dir='auto'>In general, the broker-neighboring services are a hybrid of business logic and an abstraction
				layer for the processing operations where the higher-order business logic happens, which we will talk
				about further when we start exploring the processing services in the next section.</p>
			<p dir='auto'>Broker-neighboring services main responsibility is to ensure the incoming and outgoing data
				through the system is validated and vetted structurally, logically and externally.</p>
			<p dir='auto'>You can also think of broker-neighboring services as a layer of validation on top of the
				primitive operations the brokers already offer.</p>
			<p dir='auto'>For instance, if a storage broker is offering <code>InsertStudentAsync(Student student)</code>
				as a method, then the broker-neighboring service will offer something as follows:</p>
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
	<pre><span class='pl-k'>public</span> <span class='pl-k'>async</span> <span class='pl-en'>ValueTask</span>&lt;<span class='pl-en'>Student</span>&gt; <span class='pl-en'>AddStudentAsync</span>(<span class='pl-en'>Student</span> <span class='pl-en'>student</span>)
{
	<span class='pl-en'>ValidateStudent</span>(<span class='pl-smi'>student</span>);

	<span class='pl-k'>return</span> <span class='pl-k'>await</span> <span class='pl-k'>this</span>.<span class='pl-smi'>storageBroker</span>.<span class='pl-en'>InsertStudentAsync</span>(<span class='pl-smi'>student</span>);
}</pre>
			</div>
			<p dir='auto'>This makes broker-neighboring services nothing more than an extra layer of validation on top
				of the existing primitive operations brokers already offer.</p>
			<h2 dir='auto'><a id='user-content-211-on-the-map' class='anchor' aria-hidden='true'
					href='#211-on-the-map'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.1.1 On The Map</h2>
			<p dir='auto'>The broker-neighboring services reside between your brokers and the rest of your application,
				on the left side higher-order business logic processing services, orchestration, coordination,
				aggregation or management services may live, or just simply a controller, a UI component or any other
				data exposure technology.</p>
			
			<p align='center' style='padding: 5px;' dir='auto'>
				<a target='_blank' rel='noopener noreferrer'
					href='https://user-images.githubusercontent.com/1453985/100716772-00eec800-336e-11eb-9064-8bfe2f8e3be2.png'><img
						src='https://user-images.githubusercontent.com/1453985/100716772-00eec800-336e-11eb-9064-8bfe2f8e3be2.png'
						style='max-width: 100%;'></a>
			</p>
			
			<h2 dir='auto'><a id='user-content-212-characteristics' class='anchor' aria-hidden='true'
					href='#212-characteristics'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.1.2 Characteristics</h2>
			<p dir='auto'>Foundation or Broker-Neighboring services in general have very specific characteristics that
				strictly govern their development and integration.</p>
			<p dir='auto'>Foundation services in general focus more on validations than anything else - simply because
				that's their purpose, to ensure all incoming and outgoing data through the system is in a good state for
				the system to process it safely without any issues.</p>
			<p dir='auto'>Here's the characteristics and rules that govern broker-neighboring services:</p>
			<h3 dir='auto'><a id='user-content-2120-pure-primitive' class='anchor' aria-hidden='true'
					href='#2120-pure-primitive'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.1.2.0 Pure-Primitive</h3>
			<p dir='auto'>Broker-neighboring services are not allowed to combine multiple primitive operations to
				achieve a higher-order business logic operation.</p>
			<p dir='auto'>For instance, broker-neighboring services cannot offer an <em>upsert</em> function, to combine
				a <code>Select</code> operations with an <code>Update</code> or <code>Insert</code> operations based on
				the outcome to ensure an entity exists and is up to date in any storage.</p>
			<p dir='auto'>But they offer a validation and exception handling (and mapping) wrapper around the dependency
				calls, here's an example:</p>
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
	<pre><span class='pl-k'>public</span> <span class='pl-en'>ValueTask</span>&lt;<span class='pl-en'>Student</span>&gt; <span class='pl-en'>AddStudentAsync</span>(<span class='pl-en'>Student</span> <span class='pl-en'>student</span>) <span class='pl-k'>=&gt;</span>
<span class='pl-en'>TryCatch</span>(<span class='pl-k'>async</span> () <span class='pl-k'>=&gt;</span>
{
	<span class='pl-en'>ValidateStudent</span>(<span class='pl-smi'>student</span>);

	<span class='pl-k'>return</span> <span class='pl-k'>await</span> <span class='pl-k'>this</span>.<span class='pl-smi'>storageBroker</span>.<span class='pl-en'>InsertStudentAsync</span>(<span class='pl-smi'>student</span>);
});</pre>
			</div>
			<p dir='auto'>In the above method, you can see <code>ValidateStudent</code> function call preceded by a
				<code>TryCatch</code> block.
				The <code>TryCatch</code> block is what I call Exception Noise Cancellation pattern, which we will
				discuss soon in this very section.</p>
			<p dir='auto'>But the validation function ensures each and every property in the incoming data is validated
				before passing it forward to the primitive broker operation, which is the
				<code>InsertStudentAsync</code> in this very instance.</p>
			<h3 dir='auto'><a id='user-content-2121-single-entity-integration' class='anchor' aria-hidden='true'
					href='#2121-single-entity-integration'><svg class='octicon octicon-link' viewBox='0 0 16 16'
						version='1.1' width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.1.2.1 Single Entity Integration</h3>
			<p dir='auto'>Services strongly ensure the single responsibility principle is implemented by not integrating
				with any other entity brokers except for the one that it supports.</p>
			<p dir='auto'>This rule doesn't necessarily apply to support brokers like <code>DateTimeBroker</code> or
				<code>LoggingBroker</code> since they don't specifically target any particular business entity and they
				are almost generic across the entire system.</p>
			<p dir='auto'>For instance, a <code>StudentService</code> may integrate with a <code>StorageBroker</code> as
				long as it only targets only the functionality offered by the partial class in the
				<code>StorageBroker.Students.cs</code> file.</p>
			<p dir='auto'>Foundation services should not integrate with more than one entity broker of any kind simply
				because it will increase the complexity of validation and orchestration which goes beyond the main
				purpose of the service which is just simply validation. We push this responsibility further to the
				orchestration-type services to handle it.</p>
			<h3 dir='auto'><a id='user-content-2122-business-language' class='anchor' aria-hidden='true'
					href='#2122-business-language'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.1.2.2 Business Language</h3>
			<p dir='auto'>Broker-neighboring services speak primitive business language for their operations.
				For instance, while a Broker may provide a method with the name <code>InsertStudentAsync</code> - the
				equivelant of that on the service layer would be <code>AddStudentAsync</code>.</p>
			<p dir='auto'>In general, most of the CRUD operations shall be converted from a storage lanaugage to a
				business language, and the same goes for non-storage operations such as Queues, for instance we say
				<code>PostQueueMessage</code> but on the business layer we shall say <code>EnqueueMessage</code>.</p>
				<div class="highlight">
			<p dir='auto'>Since the CRUD operations the most common ones in every system, our mapping to these CRUD
				operations would be as follows:</p>
			<table>
				<thead>
					<tr>
						<th>Brokers</th>
						<th align='center'>Services</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td>Insert</td>
						<td align='center'>Add</td>
					</tr>
					<tr>
						<td>Select</td>
						<td align='center'>Retrieve</td>
					</tr>
					<tr>
						<td>Update</td>
						<td align='center'>Modify</td>
					</tr>
					<tr>
						<td>Delete</td>
						<td align='center'>Remove</td>
					</tr>
				</tbody>
			</table>
			<p dir='auto'>As we move forward towards higher-order business logic services, the language of the methods
				beings used will lean more towards a business language rather than a technology language as we will see
				in the upcoming sections.</p>	
			</div>
			<div class="highlight">
			<h2 dir='auto'><a id='user-content-213-responsibilities' class='anchor' aria-hidden='true'
					href='#213-responsibilities'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.1.3 Responsibilities</h2>
			<p dir='auto'>Broker-neighboring services play three very important roles in any system.
				The first role is to abstract away native broker operations from the rest of the system. Irregardless of
				whether a broker is a communication between a local or external storage or an API - broker-neighboring
				services will always have the same contract/verbiage to expose to upper stream services such as
				processing, orchestration or simply exposers like controllers or UI components.
				The second and most important role is to offer a layer of validation on top of the existing primitive
				operations a broker already offers to ensure incoming and outgoing data is valid to be processed or
				persisted by the system.
				The third role is to play the role of a mapper of all other native models and contracts that may be
				needed to completed any given operation while interfacing with a broker.
				Foundation services are the last point of abstraction between the core business logic of any system and
				the rest of the world, let's discuss these roles in detail.</p>
			</div>
			<div class="highlight">
			<h3 dir='auto'><a id='user-content-2130-abstraction' class='anchor' aria-hidden='true'
					href='#2130-abstraction'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.1.3.0 Abstraction</h3>
			<p dir='auto'>The first and most important responsibility for foundation/broker-neighboring services is to
				ensure a level of abstraction exists between the brokers and the rest of your system. This abstraction
				is necessary to ensure the pure business logic layer in any system is verbally and functionally agnostic
				to whichever dependencies the system is relying on to communicate with the outside world.</p>
			</div>
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
				<p dir='auto'>Let's visualize a concrete example of the above principle. Let's assume we have a
					<code>StudentProcessingService</code> which implements an <code>UpsertStudentAsync</code> functionality.
					Somewhere in that implementation there will be a dependency on <code>AddStudentAsync</code> which is
					exposed and implemented by some <code>StudentService</code> as a foundation service. Take a look at this
					snippet:</p>
	<pre><span class='pl-k'>public</span> <span class='pl-k'>async</span> <span class='pl-en'>ValueTask</span>&lt;<span class='pl-en'>Student</span>&gt; <span class='pl-en'>UpsertStudentAsync</span>(<span class='pl-en'>Student</span> <span class='pl-en'>student</span>)
{
	...

	<span class='pl-k'>return</span> <span class='pl-k'>await</span> <span class='pl-k'>this</span>.<span class='pl-smi'>studentService</span>.<span class='pl-en'>AddStudentAsync</span>(<span class='pl-smi'>student</span>);
}</pre>			
			</div>	
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
				<p dir='auto'>The contract between a processing or an orchestration service and a foundation service will
					always be the same irregardless of what type of implementation or what type of brokers the foundation
					service is using.
					For example, <code>AddStudentAsync</code> could be a call to a database or an API endpoint or simply
					putting a message on a queue. It all doesn't impact in any way, shape or form the upstream processing
					service implementation. here's an example of three different implementations of a foundation service
					that wouldn't change anything in the implementation of it's upstream services:</p>
				<p dir='auto'>With a storage broker:</p>
	<pre><span class='pl-k'>public</span> <span class='pl-k'>async</span> <span class='pl-en'>ValueTask</span>&lt;<span class='pl-en'>Student</span>&gt; <span class='pl-en'>AddStudentAsync</span>(<span class='pl-en'>Student</span> <span class='pl-en'>student</span>)
{
	...
	<span class='pl-k'>return</span> <span class='pl-k'>await</span> <span class='pl-k'>this</span>.<span class='pl-smi'>storageBroker</span>.<span class='pl-en'>InsertStudentAsync</span>(<span class='pl-smi'>student</span>);
}</pre>	
			</div>
		<div class='highlight highlight-source-cs position-relative overflow-auto'>
				<p dir='auto'>Or with a queue broker:</p>
	<pre><span class='pl-k'>public</span> <span class='pl-k'>async</span> <span class='pl-en'>ValueTask</span>&lt;<span class='pl-en'>Student</span>&gt; <span class='pl-en'>AddStudentAsync</span>(<span class='pl-en'>Student</span> <span class='pl-en'>student</span>)
{
	...

	<span class='pl-k'>return</span> <span class='pl-k'>await</span> <span class='pl-k'>this</span>.<span class='pl-smi'>queueBroker</span>.<span class='pl-en'>EnqueueStudentAsync</span>(<span class='pl-smi'>student</span>);
}</pre>
			</div>
			<p dir='auto'>or with an API broker:</p>
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
	<pre><span class='pl-k'>public</span> <span class='pl-k'>async</span> <span class='pl-en'>ValueTask</span>&lt;<span class='pl-en'>Student</span>&gt; <span class='pl-en'>AddStudentAsync</span>(<span class='pl-en'>Student</span> <span class='pl-en'>student</span>)
{
	...

	<span class='pl-k'>return</span> <span class='pl-k'>await</span> <span class='pl-k'>this</span>.<span class='pl-smi'>apiBroker</span>.<span class='pl-en'>PostStudentAsync</span>(<span class='pl-smi'>student</span>);
}</pre>			
			</div>
<div class="highlight">
	<p dir='auto'>here's a visualization of that concept:</p>
	
	<div align='center' style='padding: 5px;' dir='auto'>
		<a target='_blank' rel='noopener noreferrer'
			href='https://user-images.githubusercontent.com/1453985/128610577-ee926ee2-a589-4f77-bf9d-dbff63d1c20d.png'><img
				width='75%'
				src='https://user-images.githubusercontent.com/1453985/128610577-ee926ee2-a589-4f77-bf9d-dbff63d1c20d.png'
				style='max-width: 100%;'></a>
	</div> 
	
				<p dir='auto'>In all of these above cases, the underlying implementation may change, but the exposed
					contract will always stay the same for the rest of the system. We will discuss in later chapters how the
					core, agnostic and abstreact business logic of your system starts with Processing services and ends with
					Management or Aggregation services.</p>
			</div>		
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
						<h4 dir='auto'><a id='user-content-21301-implementation' class='anchor' aria-hidden='true'
								href='#21301-implementation'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
									width='16' height='16' aria-hidden='true'>
									<path fill-rule='evenodd'
										d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
									</path>
								</svg></a>2.1.3.0.1 Implementation</h4>
						<p dir='auto'>Let's talk about a real-life example of implementing a simple <code>Add</code> function in a
							foundation service. Let's assume we have the following contract for our <code>StudentService</code>:</p>
<pre><span class='pl-k'>public</span> <span class='pl-smi'>IStudentService</span>
{
	<span class='pl-en'>ValueTask</span>&lt;<span class='pl-en'>Student</span>&gt; <span class='pl-en'>AddStudentAsync</span>(<span class='pl-en'>Student</span> <span class='pl-en'>student</span>);
}</pre>			
			</div>
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
				<p dir='auto'>For starters, let's go ahead and write a failing test for our service as follows:</p>
	<pre><span class='pl-k'>public</span> <span class='pl-k'>async</span> <span class='pl-en'>Task</span> <span class='pl-en'>ShouldAddStudentAsync</span>()
{
	<span class='pl-c'><span class='pl-c'>//</span> given</span>
	<span class='pl-en'>Student</span> <span class='pl-en'>randomStudent</span> <span class='pl-k'>=</span> <span class='pl-en'>CreateRandomStudent</span>();
	<span class='pl-en'>Student</span> <span class='pl-en'>inputStudent</span> <span class='pl-k'>=</span> <span class='pl-smi'>randomStudent</span>;
	<span class='pl-en'>Student</span> <span class='pl-en'>storageStudent</span> <span class='pl-k'>=</span> <span class='pl-smi'>inputStudent</span>;
	<span class='pl-en'>Student</span> <span class='pl-en'>expectedStudent</span> <span class='pl-k'>=</span> <span class='pl-smi'>storageStudent</span>.<span class='pl-en'>DeepClone</span>();

	<span class='pl-k'>this</span>.<span class='pl-smi'>storageBrokerMock</span>.<span class='pl-en'>Setup</span>(<span class='pl-en'>broker</span> <span class='pl-k'>=&gt;</span>
		<span class='pl-smi'>broker</span>.<span class='pl-en'>InsertStudentAsync</span>(<span class='pl-smi'>inputStudent</span>))
			.<span class='pl-en'>ReturnsAsync</span>(<span class='pl-smi'>storageStudent</span>);

	<span class='pl-c'><span class='pl-c'>//</span> when</span>
	<span class='pl-en'>Student</span> <span class='pl-en'>actualStudent</span> <span class='pl-k'>=</span>
		<span class='pl-k'>await</span> <span class='pl-k'>this</span>.<span class='pl-smi'>studentService</span>.<span class='pl-en'>AddStudentAsync</span>(<span class='pl-smi'>inputStudent</span>);

	<span class='pl-c'><span class='pl-c'>//</span> then</span>
	<span class='pl-smi'>actualStudent</span>.<span class='pl-en'>Should</span>().<span class='pl-en'>BeEquivelantTo</span>(<span class='pl-smi'>expectedStudent</span>);

	<span class='pl-k'>this</span>.<span class='pl-smi'>storageBroker</span>.<span class='pl-en'>Verify</span>(<span class='pl-en'>broker</span> <span class='pl-k'>=&gt;</span>
		<span class='pl-smi'>broker</span>.<span class='pl-en'>InsertStudentAsync</span>(<span class='pl-smi'>inputStudent</span>),
			<span class='pl-smi'>Times</span>.<span class='pl-smi'>Once</span>);

	<span class='pl-k'>this</span>.<span class='pl-smi'>storageBroker</span>.<span class='pl-en'>VerifyNoOtherCalls</span>();
	<span class='pl-k'>this</span>.<span class='pl-smi'>loggingBroker</span>.<span class='pl-en'>VerifyNoOtherCalls</span>();
}</pre>
	<p dir='auto'>In the above test, we defined four variables with the same value. Each variable contains a
		name that best fits the context it will be used in. For instance, <code>inputStudent</code> best fits in
		the input parameter position, while <code>storageStudent</code> best first what gets returned from the
		storage broker after a student is persisted sucessfully.</p>
	<p dir='auto'>You will also notice that we deep cloned the <code>expectedStudent</code> variable to ensure
		no modifications have happened to the originally passed in student. For instance, assume an input
		student value has changed for any of it's attributes internally within the <code>AddStudentAsync</code>
		function. That change won't trigger a failing test unless we dereference the
		<code>expectedStudent</code> variable from the input and returned variables.</p>
	<p dir='auto'>We mock the response from the storage broker and execute our subject of test
		<code>AddStudentAsync</code> then we verify the returned student value <code>actualStudent</code>
		matches the expected value <code>expectedStudent</code> regardless of the reference.</p>
	<p dir='auto'>Finally, we verify all calls are done properly and no additional calls has been made to any of
		the service dependencies.</p>
			</div>
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
				<p dir='auto'>Let's make that test pass by writing in an implementation that only satisfies the requirements
					of the aforementioned test:</p>
<pre><span class='pl-k'>public</span> <span class='pl-k'>async</span> <span class='pl-en'>ValueTask</span>&lt;<span class='pl-en'>Student</span>&gt; <span class='pl-en'>AddStudentAsync</span>(<span class='pl-en'>Student</span> <span class='pl-en'>student</span>) <span class='pl-k'>=&gt;</span>
<span class='pl-k'>await</span> <span class='pl-k'>this</span>.<span class='pl-smi'>storageBroker</span>.<span class='pl-en'>InsertStudentAsync</span>(<span class='pl-smi'>student</span>);</pre>
<p dir='auto'>This simple implementation should make our test pass sucessfully. It's important to understand
	that any implementation should be only enough to pass the failing tests. Nothing more and nothing less.
</p>			
</div>
			<h3 dir='auto'><a id='user-content-2131-validation' class='anchor' aria-hidden='true'
					href='#2131-validation'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.1.3.1 Validation</h3>
			<p dir='auto'>Foundation services are required to ensure incoming and outgoing data from and to the system
				are in a good state - they play the role of a gatekeeper between the system and the outside world to
				ensure the data that goes through is structurally, logically and externally valid before performing any
				further operations by upstream services.
				The order of validations here is very intentional. Structural validations are the cheapest of all three
				types. They ensure a particular attribute or piece of data in general doesn't have a default value if
				it's required. the opposite of that is the logical validations, where attributes are compared to other
				attributes with the same entity or any other. Additional logical validations can also include a
				comparison with a constant value like comparing a student enrollment age to be no less than 5 years of
				age.
				Both strucural and logical validations come before the external. As we said, it's simply because we
				don't want to pay the cost of communicating with an external resource including latency tax if our
				request is not in a good shape first.
				For instance, we shouldn't try to post some <code>Student</code> object to an external API if the object
				is <code>null</code>. Or if the <code>Student</code> model is invalid structurally or logically.</p>
			<p dir='auto'>For all types of validations, it's important to understand that some validations are
				circuit-breaking or requiring an immediate exit from the current flow by throwing an exception or
				returning a value in some cases. And some other validations are continuous. Let's talk about these two
				sub categories of validations first.</p>
	
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
				<h4 dir='auto'><a id='user-content-21310-circuit-breaking-validations' class='anchor' aria-hidden='true'
					href='#21310-circuit-breaking-validations'><svg class='octicon octicon-link' viewBox='0 0 16 16'
						version='1.1' width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.1.3.1.0 Circuit-Breaking Validations</h4>
			<p dir='auto'>Circuit-breaking validations require an immediate exit from the current flow. For instance, if
				an object being passed into a function is <code>null</code> - there will be no further operations
				required at that level other than exiting the current flow by throwing an exception or returning a value
				of some type. Here's an example:
				In some validation scenario, assume that our <code>AddStudent</code> function has a student of value
				<code>null</code> passed into it as follows:</p>
<pre><span class='pl-en'>Student</span> <span class='pl-en'>noStudent</span> <span class='pl-k'>=</span> <span class='pl-c1'>null</span>;
			
<span class='pl-k'>await</span> <span class='pl-k'>this</span>.<span class='pl-smi'>studentService</span>.<span class='pl-en'>AddStudentAsync</span>(<span class='pl-smi'>noStudent</span>);</pre>
			</div>
	
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
				<p dir='auto'>Our <code>AddStudentAsync</code> function in this scenario is now required to validate whether
					the passed in parameter is <code>null</code> or not before going any further with any other type of
					validations or the business logic itself. Something like this:</p>
<pre><span class='pl-k'>public</span> <span class='pl-en'>Student</span> <span class='pl-en'>AddStudentAsync</span>(<span class='pl-en'>Student</span> <span class='pl-en'>student</span>) <span class='pl-k'>=&gt;</span>
<span class='pl-en'>TryCatch</span>(<span class='pl-k'>async</span> () <span class='pl-k'>=&gt;</span>
{
	<span class='pl-en'>ValidateStudent</span>(<span class='pl-smi'>student</span>);

	<span class='pl-k'>return</span> <span class='pl-k'>await</span> <span class='pl-k'>this</span>.<span class='pl-smi'>storageBroker</span>.<span class='pl-en'>InsertStudentAsync</span>(<span class='pl-smi'>student</span>);
});</pre>
			</div>		
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
				<p dir='auto'>The statement in focus here is <code>ValidateStudent</code> function and what it does. Here's
					an example of how that routine would be implemented:</p>
	<pre><span class='pl-k'>private</span> <span class='pl-k'>void</span> <span class='pl-en'>ValidateStudent</span>(<span class='pl-en'>Student</span> <span class='pl-en'>student</span>)
{
	<span class='pl-k'>if</span>(<span class='pl-smi'>student</span> <span class='pl-k'>is</span> <span class='pl-en'>null</span>)
	{
		<span class='pl-k'>throw</span> <span class='pl-k'>new</span> <span class='pl-en'>NullStudentException</span>();
	}
}</pre>
				<p dir='auto'>In the function above, we decided to throw the exception immediately instead of going in
					further. That's an example of circuit-breaking validation type.</p>
				<p dir='auto'>But with validations, circuit-breaking isn't always the wise thing to do. Sometimes we want to
					collect all the issues within a particular request before sending the error report back to the request
					submitter. Let's talk about that in this next section.</p>
			</div>
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
				<h4 dir='auto'><a id='user-content-21311-continuous-validations' class='anchor' aria-hidden='true'
					href='#21311-continuous-validations'><svg class='octicon octicon-link' viewBox='0 0 16 16'
						version='1.1' width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.1.3.1.1 Continuous Validations</h4>
			<p dir='auto'>Continuous validations are the opposite of circuit-breaking validations. They don't stop the
				flow of validations but they definitely stop the flow of logic. In other words, continuous validations
				ensure no business logic will be executed but they also ensure other validations of the same type can
				continue to execute before breaking the circuit. Let's materialize this theory with an example:
				Assume our student model looks like this:</p>
	<pre><span class='pl-k'>public</span> <span class='pl-k'>class</span> <span class='pl-en'>Student</span>
{
	<span class='pl-k'>public</span> <span class='pl-en'>Guid</span> <span class='pl-en'>Id</span> {<span class='pl-k'>get</span>; <span class='pl-k'>set</span>;}
	<span class='pl-k'>public</span> <span class='pl-k'>string</span> <span class='pl-en'>Name</span> {<span class='pl-k'>get</span>; <span class='pl-k'>set</span>;}
}</pre>
<p dir='auto'>Assuming that the passed in <code>Student</code> model is not null, but it has default values
	across the board for all it's properties. We want to collect all these issues for however many
	attributes/properties this object has and return a full report back to the requestor. Here's how to do
	it.</p>
			</div>
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
				<h4 dir='auto'><a id='user-content-213110-upsertable-exceptions' class='anchor' aria-hidden='true'
						href='#213110-upsertable-exceptions'><svg class='octicon octicon-link' viewBox='0 0 16 16'
							version='1.1' width='16' height='16' aria-hidden='true'>
							<path fill-rule='evenodd'
								d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
							</path>
						</svg></a>2.1.3.1.1.0 Upsertable Exceptions</h4>
				<p dir='auto'>A problem of that type requires a special type of exceptions that allow collecting all errors
					in it's <code>Data</code> property. Every native exception out there will contain the <code>Data</code>
					property which is basically a dictionary for a key/value pairs for collecting more information about the
					issues that caused that exception to occur.
					The issue with these native exceptions is that they don't have native support for upsertion. Being able
					to append to an existing list of values against a particular key at any point of time.
					Here's a native implementation of upserting values in some given dictionary:</p>
	<pre><span class='pl-k'>var</span> <span class='pl-en'>someException</span> <span class='pl-k'>=</span> <span class='pl-k'>new</span> <span class='pl-en'>Exception</span>();

<span class='pl-k'>if</span>(<span class='pl-smi'>someException</span>.<span class='pl-smi'>Data</span>.<span class='pl-en'>Contains</span>(<span class='pl-smi'>someKey</span>))
{
	(<span class='pl-smi'>someException</span>.<span class='pl-smi'>Data</span>[<span class='pl-smi'>someKey</span>] <span class='pl-k'>as</span> <span class='pl-en'>List</span>&lt;<span class='pl-k'>string</span>&gt;)<span class='pl-k'>?</span>.<span class='pl-en'>Add</span>(<span class='pl-smi'>someValue</span>);
}
<span class='pl-k'>else</span>
{
	<span class='pl-smi'>someException</span>.<span class='pl-smi'>Data</span>.<span class='pl-en'>Add</span>(<span class='pl-smi'>someKey</span>, <span class='pl-k'>new</span> <span class='pl-en'>List</span>&lt;<span class='pl-k'>string</span>&gt;{ <span class='pl-smi'>someValue</span> });
}</pre>
			</div>		
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
				<p dir='auto'>This implementation can be quite daunting for engineers to think about and test in their
					service-level implementation. It felt more appropriate to introduce a simple library
					<code>Xeptions</code> to simplify the above implementation into something as simple as:</p>
	<pre><span class='pl-k'>var</span> <span class='pl-en'>someException</span> <span class='pl-k'>=</span> <span class='pl-k'>new</span> <span class='pl-en'>Xeption</span>();
<span class='pl-smi'>someException</span>.<span class='pl-en'>UpsertData</span>(<span class='pl-smi'>someKey</span>, <span class='pl-smi'>someValue</span>);</pre>
			</div>
			<p dir='auto'>Now that we have this library to utilize, the concern of implementing upsertable exceptions
				has been addressed. This means that we have what it takes to collect our validation errors. But that's
				not good enough if we don't have a mechanism to break the circuit when we believe that the time is right
				to do so.
				We can simply use the native offerings to implement the circuit-breaking directly as follows:</p>
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
	<pre><span class='pl-k'>if</span>(<span class='pl-smi'>someException</span>.<span class='pl-smi'>Data</span>.<span class='pl-smi'>Count</span> <span class='pl-k'>&gt;</span> <span class='pl-c1'>0</span>)
{
	<span class='pl-k'>throw</span> <span class='pl-smi'>someException</span>;
}</pre>
			</div>
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
				<p dir='auto'>And while this can be easily baked into any existing implementation. It still didn't
					contribute much to overall look-n-feel of the code. Therefore I have decided to make it a part of the
					<code>Xeptions</code> library to be simplified to the following:</p>
<pre><span class='pl-smi'>someException</span>.<span class='pl-en'>ThrowIfContainsErrors</span>();</pre>
			</div>
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
				<p dir='auto'>That would make our custom validations look something like this:</p>
	<pre><span class='pl-k'>public</span> <span class='pl-k'>class</span> <span class='pl-en'>InvalidStudentException</span> : <span class='pl-en'>Xeption</span>
{
	<span class='pl-k'>public</span> <span class='pl-en'>InvalidStudentException</span>()
		: <span class='pl-k'>base</span> (<span class='pl-s'><span class='pl-pds'>'</span>Student is invalid. Please fix the errors and try again.<span class='pl-pds'>'</span></span>)
	{ }
}</pre>
	<p dir='auto'>But with continuous validations, the process of collecting these errors conveys more than just
				a special exception implementation. Let's talk about that in the next section.</p>	
			</div>	
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
				<h4 dir='auto'><a id='user-content-213111-dynamic-rules' class='anchor' aria-hidden='true'
					href='#213111-dynamic-rules'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.1.3.1.1.1 Dynamic Rules</h4>
			<p dir='auto'>A non-circuit-breaking or continuous validation process will require the ability to pass in
				dynamic rules at any count or capacity to add these validation errors. A validation rule is a dynamic
				structure that reports whether the rule has been violated for its condition; and also the error message
				that should be reported to the end user to help them fix that issue.</p>
			<p dir='auto'>In a scenario where we want to ensure any given Id is valid, a dynamic continuous validation
				rule would look something like this:</p>
	<pre><span class='pl-k'>private</span> <span class='pl-k'>static</span> <span class='pl-k'>dynamic</span> <span class='pl-en'>IsInvalid</span>(<span class='pl-en'>Guid</span> <span class='pl-en'>id</span>) <span class='pl-k'>=&gt;</span> <span class='pl-k'>new</span>
{
	<span class='pl-smi'>Condition</span> <span class='pl-k'>=</span> <span class='pl-smi'>id</span> <span class='pl-k'>==</span> <span class='pl-smi'>Guid</span>.<span class='pl-smi'>Empty</span>,
	<span class='pl-smi'>Message</span> <span class='pl-k'>=</span> <span class='pl-s'><span class='pl-pds'>'</span>Id is required<span class='pl-pds'>'</span></span>
};</pre>
			</div>
			
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
				<p dir='auto'>Now our Rule doesn't just report whether a particular attribute is invalid or not. It also has
					a meaningful human-readable message that helps the consumer of the service understand what makes that
					very attribute invalid.</p>
				<p dir='auto'>It's really important to point out the language engineers must use for validation messages. It
					will all depend on the potential consumers of your system. A non-engineer will not understand a message
					such as <code>Text cannot be null, empty or whitespace</code> - <code>null</code> as a term isn't
					something that is very commonly used. Engineers must work closely with their meatware (The people using
					the system) to ensure the language makes sense to them.</p>
				<p dir='auto'>Dynamic rules by design will allow engineers to modify both their inputs and outputs without
					breaking any existing functionality as long as <code>null</code> values are considered across the board.
					Here's another manifestation of a Dynamic Validation Rule:</p>
	<pre><span class='pl-k'>private</span> <span class='pl-k'>static</span> <span class='pl-k'>dynamic</span> <span class='pl-en'>IsNotSame</span>(
	<span class='pl-en'>Guid</span> <span class='pl-en'>firstId</span>,
	<span class='pl-en'>Guid</span> <span class='pl-en'>secondId</span>,
	<span class='pl-k'>string</span> <span class='pl-en'>secondIdName</span>) <span class='pl-k'>=&gt;</span> <span class='pl-k'>new</span>
{
	<span class='pl-smi'>Condition</span> <span class='pl-k'>=</span> <span class='pl-smi'>firstId</span> <span class='pl-k'>!=</span> <span class='pl-smi'>secondId</span>,
	<span class='pl-smi'>Message</span> <span class='pl-k'>=</span> <span class='pl-s'><span class='pl-pds'>$'</span>Id is not the same as {<span class='pl-smi'>secondIdName</span>}.<span class='pl-pds'>'</span></span>,
	<span class='pl-smi'>HelpLink</span> <span class='pl-k'>=</span> <span class='pl-s'><span class='pl-pds'>'</span>/help/code1234<span class='pl-pds'>'</span></span>
};</pre>	
			<p dir='auto'>Our dynamic rule now can offer more input parameters and more helpful information in terms of
				more detailed exception message with links to helpful documentation sites or references for error codes.
			</p>
			</div>
			
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
				<h4 dir='auto'><a id='user-content-213112-rules--validations-collector' class='anchor' aria-hidden='true'
					href='#213112-rules--validations-collector'><svg class='octicon octicon-link' viewBox='0 0 16 16'
						version='1.1' width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.1.3.1.1.2 Rules &amp; Validations Collector</h4>
			<p dir='auto'>Now that have the advanced exceptions and the dynamic validation rules. It's time to put it
				all together in terms of accepting infinite number of validation rules, examining their condition
				results and finally break the circuit when all the continuous validations are done. here's how to do
				that:</p>
	<pre><span class='pl-k'>private</span> <span class='pl-k'>void</span> <span class='pl-en'>Validate</span>(<span class='pl-k'>params</span> (<span class='pl-k'>dynamic</span> <span class='pl-en'>Rule</span>, <span class='pl-k'>string</span> <span class='pl-en'>Parameter</span>)[] <span class='pl-en'>validations</span>)
{
	<span class='pl-k'>var</span> <span class='pl-en'>invalidStudentException</span> <span class='pl-k'>=</span> <span class='pl-k'>new</span> <span class='pl-en'>InvalidStudentException</span>();

	<span class='pl-k'>foreach</span>((<span class='pl-k'>dynamic</span> <span class='pl-en'>rule</span>, <span class='pl-k'>string</span> <span class='pl-en'>parameter</span>) <span class='pl-k'>in</span> <span class='pl-smi'>validations</span>)
	{
		<span class='pl-k'>if</span>(<span class='pl-smi'>rule</span>.<span class='pl-smi'>Condition</span>)
		{
			<span class='pl-smi'>invalidStudentException</span>.<span class='pl-en'>UpsertData</span>(<span class='pl-smi'>parameter</span>, <span class='pl-smi'>rule</span>.<span class='pl-smi'>Message</span>);
		}
	}

	<span class='pl-smi'>invalidStudentException</span>.<span class='pl-en'>ThrowIfContainsErrors</span>();
}</pre>
			</div>
	
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
				<p dir='auto'>The above function now will take any number of validation rules, and the parameters the rule
					is running against then examine the conditions and upsert the report of errors. This is how we can use
					the method above:</p>
	<pre><span class='pl-k'>private</span> <span class='pl-k'>void</span> <span class='pl-en'>ValidateStudent</span>(<span class='pl-en'>Student</span> <span class='pl-en'>student</span>)
{
	<span class='pl-en'>Validate</span>(
		(<span class='pl-en'>Rule</span>: <span class='pl-en'>IsInvalid</span>(<span class='pl-smi'>student</span>.<span class='pl-smi'>Id</span>), <span class='pl-en'>Parameter</span>: <span class='pl-k'>nameof</span>(<span class='pl-smi'>Student</span>.<span class='pl-smi'>Id</span>)),
		(<span class='pl-en'>Rule</span>: <span class='pl-en'>IsInvalid</span>(<span class='pl-smi'>student</span>.<span class='pl-smi'>Name</span>), <span class='pl-en'>Parameter</span>: <span class='pl-k'>nameof</span>(<span class='pl-smi'>Student</span>.<span class='pl-smi'>name</span>)),
		(<span class='pl-en'>Rule</span>: <span class='pl-en'>IsInvalid</span>(<span class='pl-smi'>student</span>.<span class='pl-smi'>Grade</span>), <span class='pl-en'>Parameter</span>: <span class='pl-k'>nameof</span>(<span class='pl-smi'>Student</span>.<span class='pl-smi'>Grade</span>))
	);
}</pre>
<p dir='auto'>This simplification of writing the rules and validations is the ultimate goal of continuing to
	provide value to the end users while making the process of engineering the solution pleasant to the
	engineers themselves.</p>
<p dir='auto'>Now, let's dive deeper into the types of validations that our systems can offer and how to
	handle them.</p>
			</div>	
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
				<h4 dir='auto'><a id='user-content-21312-structural-validations' class='anchor' aria-hidden='true'
					href='#21312-structural-validations'><svg class='octicon octicon-link' viewBox='0 0 16 16'
						version='1.1' width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.1.3.1.2 Structural Validations</h4>
			<p dir='auto'>Validations are three different layers. the first of these layers is the structural
				validations. to ensure certain properties on any given model or a primitive type are not in an invalid
				structural state.</p>
			<p dir='auto'>For instance, a property of type <code>String</code> should not be empty, <code>null</code> or
				white space. another example would be for an input parameter of an <code>int</code> type, it should not
				be at it's <code>default</code> state which is <code>0</code> when trying to enter an age for instance.
			</p>
			<p dir='auto'>The structural validations ensure the data is in a good shape before moving forward with any
				further validations - for instance, we can't possibly validate a student has the minimum number of
				characters (which is a logical validation) in their names if their first name is structurally invalid
				structurally by being <code>null</code>, empty or whitespace.</p>
			<p dir='auto'>Structural validations play the role of identifying the <em>required</em> properties on any
				given model, and while a lot of technologies offer the validation annotations, plugins or libraries to
				globally enforce data validation rules, I choose to perform the validation programmatically and manually
				to gain more control of what would be required and what wouldn't in a TDD fashion.</p>
			<p dir='auto'>The issue with some of the current implementations on structural and logical validations on
				data models is that it can be very easily changed under the radar without any unit tests firing any
				alarms. Check this example for instance:</p>
	<pre><span class='pl-k'>public</span> <span class='pl-smi'>Student</span>
{
	[<span class='pl-en'>Required</span>]
	<span class='pl-k'>public</span> <span class='pl-en'>string</span> <span class='pl-smi'>Name</span> {<span class='pl-smi'>get</span>; <span class='pl-smi'>set</span>;}
}</pre>
			<p dir='auto'>The above example can be very enticing at a glance from an engineering standpoint. All you
				have to do is decorate your model attribute with a magical annotation and then all of the sudden your
				data is being validated.</p>
			<p dir='auto'>The problem here is that this pattern combines two different responsibilities or more together
				all in the same model. Models are supposed to be just a representation of objects in reality - nothing
				more and nothing less. Some engineers call them anemic models which focuses the responsibility of every
				single model to only represent the attributes of the real world object it's trying to simulate without
				any additional details.</p>
			<p dir='auto'>But the annotated models now try to inject business logic into their very definitions. This
				business logic may or may not be needed across all services, brokers or exposing components that uses
				them.</p>
			<p dir='auto'>Structural validations on models may seem like extra work that can be avoided with magical
				decorations. But in the case of trying to diverge slightly from these validations into a more customized
				validations, now you will see a new anti-pattern emerge like custom annotations that may or may not be
				detectable through unit tests.</p>
			<p dir='auto'>Let's talk about how to test a structural validation routine:</p>	</div>
			<div class='highlight highlight-source-cs position-relative overflow-auto'>		
			<h5 dir='auto'><a id='user-content-213120-testing-structural-validations' class='anchor' aria-hidden='true'
				href='#213120-testing-structural-validations'><svg class='octicon octicon-link' viewBox='0 0 16 16'
					version='1.1' width='16' height='16' aria-hidden='true'>
					<path fill-rule='evenodd'
						d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
					</path>
				</svg></a>2.1.3.1.2.0 Testing Structural Validations</h5>
		<p dir='auto'>Because I truly believe in the importance of TDD, I am going to start showing the
			implementation of structural validations by writing a failing test for it first.</p>
		<p dir='auto'>Let's assume we have a student model, with the following details:</p>
	<pre><span class='pl-k'>public</span> <span class='pl-k'>class</span> <span class='pl-en'>Student</span>
{
	<span class='pl-k'>public</span> <span class='pl-en'>Guid</span> <span class='pl-en'>Id</span> {<span class='pl-k'>get</span>; <span class='pl-k'>set</span>;}
}</pre>
			</div>
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
				<p dir='auto'>We want to validate that the student Id is not a structurally invalid Id - such as an empty
					<code>Guid</code> - therefore we would write a unit test in the following fashion:</p>
	<pre>[<span class='pl-en'>Fact</span>]
<span class='pl-k'>public</span> <span class='pl-k'>async</span> <span class='pl-k'>void</span> <span class='pl-en'>ShouldThrowValidationExceptionOnRegisterWhenIdIsInvalidAndLogItAsync</span>()
{
	<span class='pl-c'><span class='pl-c'>//</span> given</span>
	<span class='pl-en'>Student</span> <span class='pl-en'>randomStudent</span> <span class='pl-k'>=</span> <span class='pl-en'>CreateRandomStudent</span>();
	<span class='pl-en'>Student</span> <span class='pl-en'>inputStudent</span> <span class='pl-k'>=</span> <span class='pl-smi'>randomStudent</span>;
	<span class='pl-smi'>inputStudent</span>.<span class='pl-smi'>Id</span> <span class='pl-k'>=</span> <span class='pl-smi'>Guid</span>.<span class='pl-smi'>Empty</span>;

	<span class='pl-k'>var</span> <span class='pl-en'>invalidStudentException</span> <span class='pl-k'>=</span> <span class='pl-k'>new</span> <span class='pl-en'>InvalidStudentException</span>();

	<span class='pl-smi'>invalidStudentException</span>.<span class='pl-en'>AddData</span>(
		<span class='pl-en'>key</span>: <span class='pl-k'>nameof</span>(<span class='pl-smi'>Student</span>.<span class='pl-smi'>Id</span>),
		<span class='pl-en'>value</span>: <span class='pl-s'><span class='pl-pds'>'</span>Id is required<span class='pl-pds'>'</span></span>
	);

	<span class='pl-k'>var</span> <span class='pl-en'>expectedStudentValidationException</span> <span class='pl-k'>=</span>
		<span class='pl-k'>new</span> <span class='pl-en'>StudentValidationException</span>(<span class='pl-smi'>invalidStudentException</span>);

	<span class='pl-c'><span class='pl-c'>//</span> when</span>
	<span class='pl-en'>ValueTask</span>&lt;<span class='pl-en'>Student</span>&gt; <span class='pl-en'>registerStudentTask</span> <span class='pl-k'>=</span>
		<span class='pl-k'>this</span>.<span class='pl-smi'>studentService</span>.<span class='pl-en'>RegisterStudentAsync</span>(<span class='pl-smi'>inputStudent</span>);

	<span class='pl-c'><span class='pl-c'>//</span> then</span>
	<span class='pl-k'>await</span> <span class='pl-smi'>Assert</span>.<span class='pl-en'>ThrowsAsync</span>&lt;<span class='pl-en'>StudentValidationException</span>&gt;(() <span class='pl-k'>=&gt;</span>
		<span class='pl-smi'>registerStudentTask</span>.<span class='pl-en'>AsTask</span>());

	<span class='pl-k'>this</span>.<span class='pl-smi'>loggingBrokerMock</span>.<span class='pl-en'>Verify</span>(<span class='pl-en'>broker</span> <span class='pl-k'>=&gt;</span>
		<span class='pl-smi'>broker</span>.<span class='pl-en'>LogError</span>(<span class='pl-smi'>It</span>.<span class='pl-en'>Is</span>(<span class='pl-en'>SameExceptionAs</span>(<span class='pl-smi'>expectedStudentValidationException</span>))),
			<span class='pl-smi'>Times</span>.<span class='pl-smi'>Once</span>);

	<span class='pl-k'>this</span>.<span class='pl-smi'>storageBrokerMock</span>.<span class='pl-en'>Verify</span>(<span class='pl-en'>broker</span> <span class='pl-k'>=&gt;</span>
		<span class='pl-smi'>broker</span>.<span class='pl-en'>InsertStudentAsync</span>(<span class='pl-smi'>It</span>.<span class='pl-en'>IsAny</span>&lt;<span class='pl-en'>Student</span>&gt;()),
			<span class='pl-smi'>Times</span>.<span class='pl-smi'>Never</span>);

	<span class='pl-k'>this</span>.<span class='pl-smi'>dateTimeBrokerMock</span>.<span class='pl-en'>VerifyNoOtherCalls</span>();
	<span class='pl-k'>this</span>.<span class='pl-smi'>loggingBrokerMock</span>.<span class='pl-en'>VerifyNoOtherCalls</span>();
	<span class='pl-k'>this</span>.<span class='pl-smi'>storageBrokerMock</span>.<span class='pl-en'>VerifyNoOtherCalls</span>();
}</pre>		
<p dir='auto'>In the above test, we created a random student object then assigned the an invalid Id value of
	<code>Guid.Empty</code> to the student <code>Id</code>.</p>
<p dir='auto'>When the structural validation logic in our foundation service examines the <code>Id</code>
	property, it should throw an exception property describing the issue of validation in our student model.
	in this case we throw <code>InvalidStudentException</code>.</p>
<p dir='auto'>The exception is required to briefly describe the whats, wheres and whys of the validation
	operation. in our case here the what would be the validation issue occurring, the where would be the
	Student service and the why would be the property value.</p>
			</div>
		
		
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
				<p dir='auto'>Here's how an <code>InvalidStudentException</code> would look like:</p>
	<pre><span class='pl-k'>public</span> <span class='pl-k'>class</span> <span class='pl-en'>InvalidStudentException</span> : <span class='pl-en'>Xeption</span>
{
	<span class='pl-k'>public</span> <span class='pl-en'>InvalidStudentException</span>()
		:<span class='pl-k'>base</span> (<span class='pl-s'><span class='pl-pds'>'</span>Student is invalid. Please fix the errors and try again.<span class='pl-pds'>'</span></span>) { }
}</pre>
			</div>
			<p dir='auto'>The above unit test however, requires our <code>InvalidStudentException</code> to be wrapped
				up in a more generic system-level exception, which is <code>StudentValidationException</code> - these
				exceptions is what I call outer-exceptions, they encapsulate all the different situations of validations
				regardless of their category and communicates the error to upstream services or controllers so they can
				map that to the proper error code to the consumer of these services.</p>
			<p dir='auto'>Our <code>StudentValidationException</code> would be implemented as follows:</p>
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
	<pre><span class='pl-k'>public</span> <span class='pl-k'>class</span> <span class='pl-en'>StudentValidationException</span> : <span class='pl-en'>Exception</span>
{
	<span class='pl-k'>public</span> <span class='pl-en'>StudentValidationException</span>(<span class='pl-en'>Exception</span> <span class='pl-en'>innerException</span>)
		: <span class='pl-k'>base</span>(<span class='pl-s'><span class='pl-pds'>'</span>Student validation error occurred, please check your input and then try again.<span class='pl-pds'>'</span></span>,
		  <span class='pl-smi'>innerException</span>) { }
}</pre>
			</div>
			<p dir='auto'>The message in the outer-validation above indicates that the issue is in the input, and
				therefore it requires the input submitter to try again as there are no actions required from the system
				side to be adjusted.</p>
			<h5 dir='auto'><a id='user-content-213121-implementing-structural-validations' class='anchor'
					aria-hidden='true' href='#213121-implementing-structural-validations'><svg
						class='octicon octicon-link' viewBox='0 0 16 16' version='1.1' width='16' height='16'
						aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.1.3.1.2.1 Implementing Structural Validations</h5>
			<p dir='auto'>Now, let's look at the other side of the validation process, which is the implementation.
				Structural validations always come before each and every other type of validations. That's simply
				because structural validations are the cheapest from an execution and asymptotic time perspective.
				For instance, It's much cheaper to validation an <code>Id</code> is invalid structurally, than sending
				an API call across to get the exact same answer plus the cost of latency. This all adds up when
				multi-million requests per second start flowing in.
				Structural and logical validations in general live in their own partial class to run these validations,
				for instance, if our service is called <code>StudentService.cs</code> then a new file should be created
				with the name <code>StudentService.Validations.cs</code> to encapsulate and visually abstract away the
				validation rules to ensure clean data are coming in and going out.
				Here's how an Id validation would look like:</p>
		
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
				<h5 dir='auto'><a id='user-content-studentservicevalidationscs' class='anchor' aria-hidden='true'
					href='#studentservicevalidationscs'><svg class='octicon octicon-link' viewBox='0 0 16 16'
						version='1.1' width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>StudentService.Validations.cs</h5>
	<pre><span class='pl-k'>private</span> <span class='pl-k'>void</span> <span class='pl-en'>ValidateStudent</span>(<span class='pl-en'>Student</span> <span class='pl-en'>student</span>)
{
	<span class='pl-en'>Validate</span>((<span class='pl-en'>Rule</span>: <span class='pl-en'>IsInvalid</span>(<span class='pl-smi'>student</span>.<span class='pl-smi'>Id</span>), <span class='pl-en'>Parameter</span>: <span class='pl-k'>nameof</span>(<span class='pl-smi'>Student</span>.<span class='pl-smi'>Id</span>)));
}

<span class='pl-k'>private</span> <span class='pl-k'>static</span> <span class='pl-k'>dynamic</span> <span class='pl-en'>IsInvalid</span>(<span class='pl-en'>Guid</span> <span class='pl-en'>id</span>) <span class='pl-k'>=&gt;</span> <span class='pl-k'>new</span>
{
	<span class='pl-smi'>Condition</span> <span class='pl-k'>=</span> <span class='pl-smi'>id</span> <span class='pl-k'>==</span> <span class='pl-smi'>Guid</span>.<span class='pl-smi'>Empty</span>,
	<span class='pl-smi'>Message</span> <span class='pl-k'>=</span> <span class='pl-s'><span class='pl-pds'>'</span>Id is required<span class='pl-pds'>'</span></span>
};

<span class='pl-k'>private</span> <span class='pl-k'>void</span> <span class='pl-en'>Validate</span>(<span class='pl-k'>params</span> (<span class='pl-k'>dynamic</span> <span class='pl-en'>Rule</span>, <span class='pl-k'>string</span> <span class='pl-en'>Parameter</span>)[] <span class='pl-en'>validations</span>)
{
	<span class='pl-k'>var</span> <span class='pl-en'>invalidStudentException</span> <span class='pl-k'>=</span> <span class='pl-k'>new</span> <span class='pl-en'>InvalidStudentException</span>();

	<span class='pl-k'>foreach</span>((<span class='pl-k'>dynamic</span> <span class='pl-en'>rule</span>, <span class='pl-k'>string</span> <span class='pl-en'>parameter</span>) <span class='pl-k'>in</span> <span class='pl-smi'>validations</span>)
	{
		<span class='pl-k'>if</span>(<span class='pl-smi'>rule</span>.<span class='pl-smi'>Condition</span>)
		{
			<span class='pl-smi'>invalidStudentException</span>.<span class='pl-en'>UpsertData</span>(<span class='pl-smi'>parameter</span>, <span class='pl-smi'>rule</span>.<span class='pl-smi'>Message</span>);
		}
	}

	<span class='pl-smi'>invalidStudentException</span>.<span class='pl-en'>ThrowIfContainsErrors</span>();
}</pre>
<p dir='auto'>We have implemented a method to validate the entire student object, with a compilation of all
	the rules we need to setup to validate structurally and logically the student input object. The most
	important part to notice about the above code snippet is to ensure the encapsulation of any finer
	details further away from the main goal of a particular method.</p>
<p dir='auto'>That's the reason why we decided to implement a private static method <code>IsInvalid</code>
	to abstract away the details of what determines a property of type <code>Guid</code> is invalid or not.
	And as we move further in the implementation, we are going to have to implement multiple overloads of
	the same method to validate other value types structurally and logically.</p>
<p dir='auto'>The purpose of the <code>ValidateStudent</code> method is to simply set up the rules and take
	an action by throwing an exception if any of these rules are violated. There's always an opportunity to
	aggregate the violation errors rather than throwing too early at the first sign of structural or logical
	validation issue to be detected.</p>
<p dir='auto'>Now, with the implementation above, we need to call that method to structurally and logically
	validate our input. Let's make that call in our <code>RegisterStudentAsync</code> method as follows:</p>
			</div>
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
				<h5 dir='auto'><a id='user-content-studentservicecs' class='anchor' aria-hidden='true'
					href='#studentservicecs'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>StudentService.cs</h5>
	<pre><span class='pl-k'>public</span> <span class='pl-en'>ValueTask</span>&lt;<span class='pl-en'>Student</span>&gt; <span class='pl-en'>RegisterStudentAsync</span>(<span class='pl-en'>Student</span> <span class='pl-en'>student</span>) <span class='pl-k'>=&gt;</span>
<span class='pl-en'>TryCatch</span>(<span class='pl-k'>async</span> () <span class='pl-k'>=&gt;</span>
{
	<span class='pl-en'>ValidateStudent</span>(<span class='pl-smi'>student</span>);

	<span class='pl-k'>return</span> <span class='pl-k'>await</span> <span class='pl-k'>this</span>.<span class='pl-smi'>storageBroker</span>.<span class='pl-en'>InsertStudentAsync</span>(<span class='pl-smi'>student</span>);
});</pre>
<p dir='auto'>At a glance, you will notice that our method here doesn't necessarily handle any type of
	exceptions at the logic level. That's because all the exception noise is also abstracted away in a
	method called <code>TryCatch</code>.</p>
<p dir='auto'><code>TryCatch</code> is a concept I invented to allow engineers to focus on what matters that
	most based on which aspect of the service that are looking at without having to take any shortcuts with
	the exception handling to make the code a bit more readable.</p>
<p dir='auto'><code>TryCatch</code> methods in general live in another partial class, and an entirely new
	file called <code>StudentService.Exceptions.cs</code> - which is where all exception handling and error
	reporting happens as I will show you in the following example.</p>
			</div>
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
				<p dir='auto'>Let's take a look at what a <code>TryCatch</code> method looks like:</p>
				<h5 dir='auto'><a id='user-content-studentserviceexceptionscs' class='anchor' aria-hidden='true'
					href='#studentserviceexceptionscs'><svg class='octicon octicon-link' viewBox='0 0 16 16'
						version='1.1' width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>StudentService.Exceptions.cs</h5>
<pre><span class='pl-k'>private</span> <span class='pl-k'>delegate</span> <span class='pl-en'>ValueTask</span>&lt;<span class='pl-en'>Student</span>&gt; <span class='pl-en'>ReturningStudentFunction</span>();

<span class='pl-k'>private</span> <span class='pl-k'>async</span> <span class='pl-en'>ValueTask</span>&lt;<span class='pl-en'>Student</span>&gt; <span class='pl-en'>TryCatch</span>(<span class='pl-en'>ReturningStudentFunction</span> <span class='pl-en'>returningStudentFunction</span>)
{
	<span class='pl-k'>try</span>
	{
		<span class='pl-k'>return</span> <span class='pl-k'>await</span> <span class='pl-en'>returningStudentFunction</span>();
	}
	<span class='pl-k'>catch</span> (<span class='pl-en'>InvalidStudentException</span> <span class='pl-en'>invalidStudentInputException</span>)
	{
		<span class='pl-k'>throw</span> <span class='pl-en'>CreateAndLogValidationException</span>(<span class='pl-smi'>invalidStudentInputException</span>);
	}
}

<span class='pl-k'>private</span> <span class='pl-en'>StudentValidationException</span> <span class='pl-en'>CreateAndLogValidationException</span>(<span class='pl-en'>Exception</span> <span class='pl-en'>exception</span>)
{
	<span class='pl-k'>var</span> <span class='pl-en'>studentValidationException</span> <span class='pl-k'>=</span> <span class='pl-k'>new</span> <span class='pl-en'>StudentValidationException</span>(<span class='pl-smi'>exception</span>);
	<span class='pl-k'>this</span>.<span class='pl-smi'>loggingBroker</span>.<span class='pl-en'>LogError</span>(<span class='pl-smi'>studentValidationException</span>);

	<span class='pl-k'>return</span> <span class='pl-smi'>studentValidationException</span>;
}</pre> 
<p dir='auto'>The <code>TryCatch</code> exception noise-cancellation pattern beautifully takes in any
	function that returns a particular type as a delegate and handles any thrown exceptions off of that
	function or it's dependencies.</p>
<p dir='auto'>The main responsibility of a <code>TryCatch</code> function is to wrap up a service inner
	exceptions with outer exceptions to ease-up the reaction of external consumers of that service into only
	one of the three categories, which are Service Exceptions, Validations Exceptions and Dependency
	Exceptions. there are sub-types to these exceptions such as Dependency Validation Exceptions but these
	usually fall under the Validation Exception category as we will discuss in upcoming sections of The
	Standard.</p>
<p dir='auto'>In a <code>TryCatch</code> method, we can add as many inner and external exceptions as we want
	and map them into local exceptions for upstream services not to have a strong dependency on any
	particular libraries or external resource models, which we will talk about in detail when we move on to
	the Mapping responsibility of broker-neighboring (foundation) services.</p>
			</div>
			<div class="highlight">
			<h4 dir='auto'><a id='user-content-21313-logical-validations' class='anchor' aria-hidden='true'
					href='#21313-logical-validations'><svg class='octicon octicon-link' viewBox='0 0 16 16'
						version='1.1' width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.1.3.1.3 Logical Validations</h4>
			<p dir='auto'>Logical validations are the second in order to structural validations. their main
				responsibility by definition is to logically validate whether a structurally valid piece of data is
				logically valid.
				For instance, a date of birth for a student could be structurally valid by having a value of
				<code>1/1/1800</code> but logically, a student that is over 200 years of age is an impossibility.</p>
			<p dir='auto'>The most common logical validations are validations for audit fields such as
				<code>CreatedBy</code> and <code>UpdatedBy</code> - it's logically impossible that a new record can be
				inserted with two different values for the authors of that new record - simply because data can only be
				inserted by one person at a time.</p>
			<p dir='auto'>Let's talk about how we can test-drive and implement logical validations:</p>
		</div>
		
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
				<h5 dir='auto'><a id='user-content-213130-testing-logical-validations' class='anchor' aria-hidden='true'
					href='#213130-testing-logical-validations'><svg class='octicon octicon-link' viewBox='0 0 16 16'
						version='1.1' width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.1.3.1.3.0 Testing Logical Validations</h5>
			<p dir='auto'>In the common case of testing logical validations for audit fields, we want to throw a
				validation exception that the <code>UpdatedBy</code> value is invalid simply because it doesn't match
				the <code>CreatedBy</code> field.</p>
			<p dir='auto'>Let's assume our Student model looks as follows:</p>
	<pre><span class='pl-k'>public</span> <span class='pl-k'>class</span> <span class='pl-en'>Student</span> {
	<span class='pl-en'>Guid</span> <span class='pl-en'>CreatedBy</span> {<span class='pl-k'>get</span>; <span class='pl-k'>set</span>;}
	<span class='pl-en'>Guid</span> <span class='pl-en'>UpdatedBy</span> {<span class='pl-k'>get</span>; <span class='pl-k'>set</span>;}
}</pre> 
			</div>
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
				<p dir='auto'>Our test to validate these values logically would be as follows:</p>
	<pre>[<span class='pl-en'>Fact</span>]
<span class='pl-k'>public</span> <span class='pl-k'>async</span> <span class='pl-en'>Task</span> <span class='pl-en'>ShouldThrowValidationExceptionOnRegisterIfUpdatedByNotSameAsCreatedByAndLogItAsync</span>()
{
	<span class='pl-c'><span class='pl-c'>//</span> given</span>
	<span class='pl-en'>Student</span> <span class='pl-en'>randomStudent</span> <span class='pl-k'>=</span> <span class='pl-en'>CreateRandomStudent</span>();
	<span class='pl-en'>Student</span> <span class='pl-en'>inputStudent</span> <span class='pl-k'>=</span> <span class='pl-smi'>randomStudent</span>;
	<span class='pl-smi'>inputStudent</span>.<span class='pl-smi'>UpdatedBy</span> <span class='pl-k'>=</span> <span class='pl-smi'>Guid</span>.<span class='pl-en'>NewGuid</span>();

	<span class='pl-k'>var</span> <span class='pl-en'>invalidStudentException</span> <span class='pl-k'>=</span> <span class='pl-k'>new</span> <span class='pl-en'>InvalidStudentException</span>();

	<span class='pl-smi'>invalidStudentException</span>.<span class='pl-en'>AddData</span>(
		<span class='pl-en'>key</span>: <span class='pl-k'>nameof</span>(<span class='pl-smi'>Student</span>.<span class='pl-smi'>UpdatedBy</span>),
		<span class='pl-en'>value</span>: <span class='pl-s'><span class='pl-pds'>$'</span>Id is not the same as {<span class='pl-k'>nameof</span>(<span class='pl-smi'>Student</span>.<span class='pl-smi'>CreatedBy</span>)}.<span class='pl-pds'>'</span></span>);

	<span class='pl-k'>var</span> <span class='pl-en'>expectedStudentValidationException</span> <span class='pl-k'>=</span>
		<span class='pl-k'>new</span> <span class='pl-en'>StudentValidationException</span>(<span class='pl-smi'>invalidStudentException</span>);

	<span class='pl-c'><span class='pl-c'>//</span> when</span>
	<span class='pl-en'>ValueTask</span>&lt;<span class='pl-en'>Student</span>&gt; <span class='pl-en'>registerStudentTask</span> <span class='pl-k'>=</span>
		<span class='pl-k'>this</span>.<span class='pl-smi'>studentService</span>.<span class='pl-en'>RegisterStudentAsync</span>(<span class='pl-smi'>inputStudent</span>);

	<span class='pl-c'><span class='pl-c'>//</span> then</span>
	<span class='pl-k'>await</span> <span class='pl-smi'>Assert</span>.<span class='pl-en'>ThrowsAsync</span>&lt;<span class='pl-en'>StudentValidationException</span>&gt;(() <span class='pl-k'>=&gt;</span>
		<span class='pl-smi'>registerStudentTask</span>.<span class='pl-en'>AsTask</span>());

	<span class='pl-k'>this</span>.<span class='pl-smi'>loggingBrokerMock</span>.<span class='pl-en'>Verify</span>(<span class='pl-en'>broker</span> <span class='pl-k'>=&gt;</span>
		<span class='pl-smi'>broker</span>.<span class='pl-en'>LogError</span>(<span class='pl-smi'>It</span>.<span class='pl-en'>Is</span>(
			<span class='pl-en'>SameExceptionAs</span>(<span class='pl-smi'>expectedStudentValidationException</span>))),
				<span class='pl-smi'>Times</span>.<span class='pl-smi'>Once</span>);

	<span class='pl-k'>this</span>.<span class='pl-smi'>storageBrokerMock</span>.<span class='pl-en'>Verify</span>(<span class='pl-en'>broker</span> <span class='pl-k'>=&gt;</span>
		<span class='pl-smi'>broker</span>.<span class='pl-en'>InsertStudentAsync</span>(<span class='pl-smi'>It</span>.<span class='pl-en'>IsAny</span>&lt;<span class='pl-en'>Student</span>&gt;()),
			<span class='pl-smi'>Times</span>.<span class='pl-smi'>Never</span>);

	<span class='pl-k'>this</span>.<span class='pl-smi'>loggingBrokerMock</span>.<span class='pl-en'>VerifyNoOtherCalls</span>();
	<span class='pl-k'>this</span>.<span class='pl-smi'>dateTimeBrokerMock</span>.<span class='pl-en'>VerifyNoOtherCalls</span>();
	<span class='pl-k'>this</span>.<span class='pl-smi'>storageBrokerMock</span>.<span class='pl-en'>VerifyNoOtherCalls</span>();
}</pre> 
<p dir='auto'>In the above test, we have changed the value of the <code>UpdatedBy</code> field to ensure it
	completely differs from the <code>CreatedBy</code> field - now we expect an
	<code>InvalidStudentException</code> with the <code>CreatedBy</code> to be the reason for this
	validation exception to occur.</p>
<p dir='auto'>Let's go ahead an write an implementation for this failing test.</p>
			</div>	
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
				<h5 dir='auto'><a id='user-content-213131-implementing-logical-validations' class='anchor'
					aria-hidden='true' href='#213131-implementing-logical-validations'><svg class='octicon octicon-link'
						viewBox='0 0 16 16' version='1.1' width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.1.3.1.3.1 Implementing Logical Validations</h5>
			<p dir='auto'>Just like we did in the structural validations section, we are going to add more rules to our
				validation <code>switch case</code> as follows:</p>
			<h5 dir='auto'><a id='user-content-studentservicevalidationscs-1' class='anchor' aria-hidden='true'
					href='#studentservicevalidationscs-1'><svg class='octicon octicon-link' viewBox='0 0 16 16'
						version='1.1' width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>StudentService.Validations.cs</h5>
	<pre><span class='pl-k'>private</span> <span class='pl-k'>void</span> <span class='pl-en'>ValidateStudent</span>(<span class='pl-en'>Student</span> <span class='pl-en'>student</span>)
{
	<span class='pl-en'>Validate</span>(
		(<span class='pl-en'>Rule</span>: <span class='pl-en'>IsNotSame</span>(
			<span class='pl-en'>firstId</span>: <span class='pl-smi'>student</span>.<span class='pl-smi'>UpdatedBy</span>,
			<span class='pl-en'>secondId</span>: <span class='pl-smi'>student</span>.<span class='pl-smi'>CreatedBy</span>,
			<span class='pl-en'>secondIdName</span>: <span class='pl-k'>nameof</span>(<span class='pl-smi'>student</span>.<span class='pl-smi'>CreatedBy</span>)),
		<span class='pl-en'>Parameter</span>: <span class='pl-k'>nameof</span>(<span class='pl-smi'>Student</span>.<span class='pl-smi'>UpdatedBy</span>))
	);
}

<span class='pl-k'>private</span> <span class='pl-k'>static</span> <span class='pl-k'>dynamic</span> <span class='pl-en'>IsNotSame</span>(
	<span class='pl-en'>Guid</span> <span class='pl-en'>firstId</span>,
	<span class='pl-en'>Guid</span> <span class='pl-en'>secondId</span>,
	<span class='pl-k'>string</span> <span class='pl-en'>secondIdName</span>) <span class='pl-k'>=&gt;</span> <span class='pl-k'>new</span>
	{
		<span class='pl-smi'>Condition</span> <span class='pl-k'>=</span> <span class='pl-smi'>firstId</span> <span class='pl-k'>!=</span> <span class='pl-smi'>secondId</span>,
		<span class='pl-smi'>Message</span> <span class='pl-k'>=</span> <span class='pl-s'><span class='pl-pds'>$'</span>Id is not the same as {<span class='pl-smi'>secondIdName</span>}.<span class='pl-pds'>'</span></span>
	};

<span class='pl-k'>private</span> <span class='pl-k'>void</span> <span class='pl-en'>Validate</span>(<span class='pl-k'>params</span> (<span class='pl-en'>dyanamic</span> <span class='pl-en'>Rule</span>, <span class='pl-k'>string</span> <span class='pl-en'>Parameter</span>)[] <span class='pl-en'>validations</span>)
{
	<span class='pl-k'>var</span> <span class='pl-en'>invalidStudentException</span> <span class='pl-k'>=</span> <span class='pl-k'>new</span> <span class='pl-en'>Exception</span>();

	<span class='pl-k'>foreach</span>((<span class='pl-k'>dynamic</span> <span class='pl-en'>rule</span>, <span class='pl-k'>string</span> <span class='pl-en'>parameter</span>) <span class='pl-k'>in</span> <span class='pl-smi'>validations</span>)
	{
		<span class='pl-k'>if</span>(<span class='pl-smi'>rule</span>.<span class='pl-smi'>Condition</span>)
		{
			<span class='pl-smi'>invalidStudentException</span>.<span class='pl-en'>UpsertData</span>(
				<span class='pl-en'>key</span>: <span class='pl-smi'>parameter</span>,
				<span class='pl-en'>value</span>: <span class='pl-smi'>rule</span>.<span class='pl-smi'>Message</span>);
		}
	}
}</pre> 
<p dir='auto'>Everything else in both <code>StudentService.cs</code> and
	<code>StudentService.Exceptions.cs</code> continues to be exactly the same as we've done above in the
	structural validations.</p>
<p dir='auto'>Logical validations exceptions, just like any other exceptions that may occur are usually
	non-critical. However, it all depends on your business case to determine whether a particular logical,
	structural or even a dependency validation are critical or not, this is when you might need to create a
	special class of exceptions, something like <code>InvalidStudentCriticalException</code> then log it
	accordingly.</p>
			</div>
			<div class="highlight">
			<h4 dir='auto'><a id='user-content-21314-external-validations' class='anchor' aria-hidden='true'
					href='#21314-external-validations'><svg class='octicon octicon-link' viewBox='0 0 16 16'
						version='1.1' width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.1.3.1.4 External Validations</h4>
			<p dir='auto'>The last type of validations that are usually performed by foundation services is external
				validations. I define external validations as any form of validation that requires calling an external
				resource to validate whether a foundation service should proceed with processing incoming data or halt
				with an exception.</p>
			<p dir='auto'>A good example of dependency validations is when we call a broker to retrieve a particular
				entity by it's id. If the entity returned is not found, or the API broker returns a
				<code>NotFound</code> error - the foundation service is then required to wrap that error in a
				<code>ValidationException</code> and halts all following processes.</p>
			<p dir='auto'>External validation exceptions can occur if the returned value did not match the expectation,
				such as an empty list returned from an API call when trying to insert a new coach of a team - if there
				is no team members, there can be no coach for instance. The foundation service in this case will be
				required to raise a local exception to explain the issue, something like
				<code>NoTeamMembersFoundException</code> or something of that nature.</p>
			<p dir='auto'>Let's write a failing test for an external validation example:</p>
		</div>	
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
				<h5 dir='auto'><a id='user-content-213140-testing-external-validations' class='anchor' aria-hidden='true'
					href='#213140-testing-external-validations'><svg class='octicon octicon-link' viewBox='0 0 16 16'
						version='1.1' width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.1.3.1.4.0 Testing External Validations</h5>
			<p dir='auto'>Let's assume we are trying to retrieve a student with an <code>Id</code> that doesn't match
				any records in the database. Here's how we would go about testing this scenario. First off, let's define
				a <code>NotFoundStudentException</code> model as follows:</p>
	<pre><span class='pl-k'>using</span> <span class='pl-en'>Xeption</span>;

<span class='pl-k'>public</span> <span class='pl-k'>class</span> <span class='pl-en'>NotFoundStudentException</span> : <span class='pl-en'>Xeption</span>
{
	<span class='pl-k'>public</span> <span class='pl-en'>NotFoundStudentException</span>(<span class='pl-en'>Guid</span> <span class='pl-en'>id</span>)
		: <span class='pl-k'>base</span> (<span class='pl-en'>message</span>: <span class='pl-s'><span class='pl-pds'>$'</span>Couldn't find a student with id: {<span class='pl-smi'>id</span>}.<span class='pl-pds'>'</span></span>)
	{}
}</pre>
			</div>
		
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
				<p dir='auto'>The above model is the localization aspect of handling the issue. Now let's write a failing
					test as follows:</p>
	<pre><span class='pl-k'>public</span> <span class='pl-k'>async</span> <span class='pl-en'>Task</span> <span class='pl-en'>ShouldThrowValidationExceptionOnRetrieveByIdIfStudentNotFoundAndLogItAsync</span>()
{
	<span class='pl-c'><span class='pl-c'>//</span> given</span>
	<span class='pl-en'>Guid</span> <span class='pl-en'>randomStudentId</span> <span class='pl-k'>=</span> <span class='pl-smi'>Guid</span>.<span class='pl-en'>NewGuid</span>();
	<span class='pl-en'>Guid</span> <span class='pl-en'>inputStudentId</span> <span class='pl-k'>=</span> <span class='pl-smi'>randomStudentId</span>;
	<span class='pl-en'>Student</span> <span class='pl-en'>noStudent</span> <span class='pl-k'>=</span> <span class='pl-c1'>null</span>;

	<span class='pl-k'>var</span> <span class='pl-en'>notFoundStudentException</span> <span class='pl-k'>=</span>
		<span class='pl-k'>new</span> <span class='pl-en'>NotFoundStudentException</span>(<span class='pl-smi'>inputStudentId</span>);

	<span class='pl-k'>var</span> <span class='pl-en'>expectedStudentValidationException</span> <span class='pl-k'>=</span>
		<span class='pl-k'>new</span> <span class='pl-en'>StudentValidationException</span>(<span class='pl-smi'>notFoundStudentException</span>);

	<span class='pl-k'>this</span>.<span class='pl-smi'>storageBrokerMock</span>.<span class='pl-en'>Setup</span>(<span class='pl-en'>broker</span> <span class='pl-k'>=&gt;</span>
		<span class='pl-smi'>broker</span>.<span class='pl-en'>SelectStudentByIdAsync</span>(<span class='pl-smi'>inputStudentId</span>))
			.<span class='pl-en'>ReturnsAsync</span>(<span class='pl-smi'>noStudent</span>);

	<span class='pl-c'><span class='pl-c'>//</span> when</span>
	<span class='pl-en'>ValueTask</span>&lt;<span class='pl-en'>Student</span>&gt; <span class='pl-en'>retrieveStudentByIdTask</span> <span class='pl-k'>=</span>
		<span class='pl-k'>this</span>.<span class='pl-smi'>studentService</span>.<span class='pl-en'>RetrieveStudentByIdAsync</span>(<span class='pl-smi'>inputStudentId</span>);

	<span class='pl-c'><span class='pl-c'>//</span> then</span>
	<span class='pl-k'>await</span> <span class='pl-smi'>Assert</span>.<span class='pl-en'>ThrowsAsync</span>&lt;<span class='pl-en'>StudentValidationException</span>&gt;(() <span class='pl-k'>=&gt;</span>
		<span class='pl-smi'>retrieveStudentByIdTask</span>.<span class='pl-en'>AsTask</span>());

	<span class='pl-k'>this</span>.<span class='pl-smi'>storageBrokerMock</span>.<span class='pl-en'>Verify</span>(<span class='pl-en'>broker</span> <span class='pl-k'>=&gt;</span>
		<span class='pl-smi'>broker</span>.<span class='pl-en'>SelectStudentByIdAsync</span>(<span class='pl-smi'>inputStudentId</span>),
			<span class='pl-smi'>Times</span>.<span class='pl-smi'>Once</span>);

	<span class='pl-k'>this</span>.<span class='pl-smi'>loggingBrokerMock</span>.<span class='pl-en'>Verify</span>(<span class='pl-en'>broker</span> <span class='pl-k'>=&gt;</span>
		<span class='pl-smi'>broker</span>.<span class='pl-en'>LogError</span>(<span class='pl-smi'>It</span>.<span class='pl-en'>Is</span>(<span class='pl-en'>SameExceptionAs</span>(
			<span class='pl-smi'>expectedStudentValidationException</span>))),
				<span class='pl-smi'>Times</span>.<span class='pl-smi'>Once</span>);

	<span class='pl-k'>this</span>.<span class='pl-smi'>storageBrokerMock</span>.<span class='pl-en'>VerifyNoOtherCalls</span>();
	<span class='pl-k'>this</span>.<span class='pl-smi'>loggingBrokerMock</span>.<span class='pl-en'>VerifyNoOtherCalls</span>();
	<span class='pl-k'>this</span>.<span class='pl-smi'>dateTimeBrokerMock</span>.<span class='pl-en'>VerifyNotOtherCalls</span>();
}</pre>  
<p dir='auto'>The test above requires us to throw a localized exception as in
	<code>NotFoundStudentException</code> when the storage broker returns no values for the given
	<code>studentId</code> and then wrap or categorize this up in <code>StudentValidationException</code>.
</p>
<p dir='auto'>We choose to wrap the localized exception in a validation exception and not in a dependency
	validation exception because the initiation of the error originated from our service not from the
	external resource. If the external resource is the source of the error we would have to categorize this
	as a <code>DependencyValidationException</code> which we will discuss shortly.</p>
<p dir='auto'>Now let's get to the implementation part of this section to make our test pass.</p>
			</div>
		
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
				<h5 dir='auto'><a id='user-content-213141-implementing-external-validations' class='anchor'
					aria-hidden='true' href='#213141-implementing-external-validations'><svg
						class='octicon octicon-link' viewBox='0 0 16 16' version='1.1' width='16' height='16'
						aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.1.3.1.4.1 Implementing External Validations</h5>
			<p dir='auto'>In order to implement an external validation we will need to touch on all different aspects of
				our service. The core logic, the validation and the exception handling aspects are as follows.</p>
			<p dir='auto'>First off, let's build a validation function that will throw a
				<code>NotFoundStudentException</code> if the passed-in parameter is null.</p>
			<h5 dir='auto'><a id='user-content-studentservicevalidationscs-2' class='anchor' aria-hidden='true'
					href='#studentservicevalidationscs-2'><svg class='octicon octicon-link' viewBox='0 0 16 16'
						version='1.1' width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>StudentService.Validations.cs</h5>
	<pre><span class='pl-k'>private</span> <span class='pl-k'>static</span> <span class='pl-k'>void</span> <span class='pl-en'>VerifyStudentExists</span>(<span class='pl-en'>Student</span> <span class='pl-en'>maybeStudent</span>, <span class='pl-en'>Guid</span> <span class='pl-en'>studentId</span>)
{
	<span class='pl-k'>if</span> (<span class='pl-smi'>maybeStudent</span> <span class='pl-k'>is</span> <span class='pl-en'>null</span>)
	{
		<span class='pl-k'>throw</span> <span class='pl-k'>new</span> <span class='pl-en'>NotFoundStudentException</span>(<span class='pl-smi'>studentId</span>);
	}
}</pre> 
			</div>
			<p dir='auto'>This implementation will take care of detecting an issue and issuing a local exception
				<code>NotFoundStudentException</code>. Now let's jump over to the exception handling aspect of our
				service.</p>
			<h5 dir='auto'><a id='user-content-studentserviceexceptionscs-1' class='anchor' aria-hidden='true'
					href='#studentserviceexceptionscs-1'><svg class='octicon octicon-link' viewBox='0 0 16 16'
						version='1.1' width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>StudentService.Exceptions.cs</h5>
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
	<pre><span class='pl-k'>private</span> <span class='pl-k'>async</span> <span class='pl-en'>ValueTask</span>&lt;<span class='pl-en'>Student</span>&gt; <span class='pl-en'>TryCatch</span>(<span class='pl-en'>ReturningStudentFunction</span> <span class='pl-en'>returningStudentFunction</span>)
{
	<span class='pl-k'>try</span>
	{
		<span class='pl-k'>return</span> <span class='pl-k'>await</span> <span class='pl-en'>returningStudentFunction</span>();
	}
	..
	<span class='pl-k'>catch</span> (<span class='pl-en'>NotFoundStudentException</span> <span class='pl-en'>notFoundStudentException</span>)
	{
		<span class='pl-k'>throw</span> <span class='pl-en'>CreateAndLogValidationException</span>(<span class='pl-smi'>notFoundStudentException</span>);
	}
}

<span class='pl-k'>private</span> <span class='pl-en'>StudentValidationException</span> <span class='pl-en'>CreateAndLogValidationException</span>(<span class='pl-en'>Exception</span> <span class='pl-en'>exception</span>)
{
	<span class='pl-k'>var</span> <span class='pl-en'>studentValidationException</span> <span class='pl-k'>=</span> <span class='pl-k'>new</span> <span class='pl-en'>StudentValidationException</span>(<span class='pl-smi'>exception</span>);
	<span class='pl-k'>this</span>.<span class='pl-smi'>loggingBroker</span>.<span class='pl-en'>LogError</span>(<span class='pl-smi'>studentValidationException</span>);

	<span class='pl-k'>return</span> <span class='pl-smi'>studentValidationException</span>;
}</pre>
<p dir='auto'>The above implementation will take care of categorizing a
	<code>NotFoundStudentException</code> to <code>StudentValidationException</code>. The last part is to
	put the pieces together as follows.</p>
			</div>
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
				<h5 dir='auto'><a id='user-content-studentservicecs-1' class='anchor' aria-hidden='true'
					href='#studentservicecs-1'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>StudentService.cs</h5>
	<pre><span class='pl-k'>public</span> <span class='pl-en'>ValueTask</span>&lt;<span class='pl-en'>Student</span>&gt; <span class='pl-en'>RetrieveStudentByIdAsync</span>(<span class='pl-en'>Guid</span> <span class='pl-en'>studentId</span>) <span class='pl-k'>=&gt;</span>
<span class='pl-en'>TryCatch</span>(<span class='pl-k'>async</span> () <span class='pl-k'>=&gt;</span>
{
	<span class='pl-en'>ValidateStudentId</span>(<span class='pl-smi'>studentId</span>);

	<span class='pl-en'>Student</span> <span class='pl-en'>maybeStudent</span> <span class='pl-k'>=</span>
		<span class='pl-k'>await</span> <span class='pl-k'>this</span>.<span class='pl-smi'>storageBroker</span>.<span class='pl-en'>SelectStudentByIdAsync</span>(<span class='pl-smi'>studentId</span>);

	<span class='pl-en'>ValidateStudentExists</span>(<span class='pl-smi'>maybeStudent</span>, <span class='pl-smi'>studentId</span>);

	<span class='pl-k'>return</span> <span class='pl-smi'>maybeStudent</span>;
});</pre> 
<p dir='auto'>The above implementation will ensure that the id is valid, but more importantly that whatever
	the <code>storageBroker</code> returns will be checked for whether it's an object or <code>null</code>.
	Then issue the exception.</p>
<p dir='auto'>There are situations where attempting to retrieve an entity then finding out that it doesn't
	exist is not necessarily erroneous. This is where Processing Services come in to leverage a higher-order
	business logic to deal with this more complex scenario.</p>
			</div>	
			<div class="highlight">
			<h4 dir='auto'><a id='user-content-21315-dependency-validations' class='anchor' aria-hidden='true'
					href='#21315-dependency-validations'><svg class='octicon octicon-link' viewBox='0 0 16 16'
						version='1.1' width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.1.3.1.5 Dependency Validations</h4>
			<p dir='auto'>Dependency validation exceptions can occur because you called an external resource and it
				returned an error, or returned a value that warrants raising an error. For instance, an API call might
				return a <code>404</code> code, and that's interpreted as an exception if the input was supposed to
				correspond to an existing object.</p>
			<p dir='auto'>A more common example is when a particular input entity is using the same id as an existing
				entity in the system. In a relational database world, a duplicate key exception would be thrown. In a
				RESTful API scneario, programmatically applying the same concept also achieves the same goal for API
				validations assuming the granularity of the system being called weaken the referential integrity of the
				overall system data.</p>
			<p dir='auto'>There are situations where the faulty response can be expressed in a fashion other than
				exceptions, but we shall touch on that topic in a more advanced chapters of this Standard.</p>
			<p dir='auto'>Let's write a failing test to verify whether we are throwing a
				<code>DependencyValidationException</code> if <code>Student</code> model already exists in the storage
				with the storage broker throwing a <code>DuplicateKeyException</code> as a native result of the
				operation.</p>
			</div>
		
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
				<h5 dir='auto'><a id='user-content-213150-testing-dependency-validations' class='anchor' aria-hidden='true'
					href='#213150-testing-dependency-validations'><svg class='octicon octicon-link' viewBox='0 0 16 16'
						version='1.1' width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.1.3.1.5.0 Testing Dependency Validations</h5>
			<p dir='auto'>Let's assume our student model uses an <code>Id</code> with the type <code>Guid</code> as
				follows:</p>
	<pre><span class='pl-k'>public</span> <span class='pl-k'>class</span> <span class='pl-en'>Student</span>
{
	<span class='pl-k'>public</span> <span class='pl-en'>Guid</span> <span class='pl-en'>Id</span> {<span class='pl-k'>get</span>; <span class='pl-k'>set</span>;}
	<span class='pl-k'>public</span> <span class='pl-k'>string</span> <span class='pl-en'>Name</span> {<span class='pl-k'>get</span>; <span class='pl-k'>set</span>;}
}</pre>
			</div>
			<p dir='auto'>our unit test to validate a <code>DependencyValidation</code> exception would be thrown in a
				<code>DuplicateKey</code> situation would be as follows:</p>
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
	<pre>[<span class='pl-en'>Fact</span>]
<span class='pl-k'>public</span> <span class='pl-k'>async</span> <span class='pl-k'>void</span> <span class='pl-en'>ShouldThrowDependencyValidationExceptionOnRegisterIfStudentAlreadyExistsAndLogItAsync</span>()
{
	<span class='pl-c'><span class='pl-c'>//</span> given</span>
	<span class='pl-en'>Student</span> <span class='pl-en'>someStudent</span> <span class='pl-k'>=</span> <span class='pl-en'>CreateRandomStudent</span>();
	<span class='pl-k'>string</span> <span class='pl-en'>someMessage</span> <span class='pl-k'>=</span> <span class='pl-en'>GetRandomMessage</span>();
	<span class='pl-k'>var</span> <span class='pl-en'>duplicateKeyException</span> <span class='pl-k'>=</span> <span class='pl-k'>new</span> <span class='pl-en'>DuplicateKeyException</span>(<span class='pl-smi'>exceptionMessage</span>);

	<span class='pl-k'>var</span> <span class='pl-en'>alreadyExistsStudentException</span> <span class='pl-k'>=</span>
		<span class='pl-k'>new</span> <span class='pl-en'>AlreadyExistsStudentException</span>(<span class='pl-smi'>duplicateKeyException</span>);

	<span class='pl-k'>var</span> <span class='pl-en'>expectedStudentValidationException</span> <span class='pl-k'>=</span>
		<span class='pl-k'>new</span> <span class='pl-en'>StudentDependencyValidationException</span>(<span class='pl-smi'>alreadyExistsStudentException</span>);

	<span class='pl-k'>this</span>.<span class='pl-smi'>storageBrokerMock</span>.<span class='pl-en'>Setup</span>(<span class='pl-en'>broker</span> <span class='pl-k'>=&gt;</span>
		<span class='pl-smi'>broker</span>.<span class='pl-en'>InsertStudentAsync</span>(<span class='pl-smi'>It</span>.<span class='pl-en'>IsAny</span>&lt;<span class='pl-en'>Student</span>&gt;()))
			.<span class='pl-en'>ThrowsAsync</span>(<span class='pl-smi'>duplicateKeyException</span>);

	<span class='pl-c'><span class='pl-c'>//</span> when</span>
	<span class='pl-en'>ValueTask</span>&lt;<span class='pl-en'>Student</span>&gt; <span class='pl-en'>registerStudentTask</span> <span class='pl-k'>=</span>
		<span class='pl-k'>this</span>.<span class='pl-smi'>studentService</span>.<span class='pl-en'>RegisterStudentAsync</span>(<span class='pl-smi'>someStudent</span>);

	<span class='pl-c'><span class='pl-c'>//</span> then</span>
	<span class='pl-k'>await</span> <span class='pl-smi'>Assert</span>.<span class='pl-en'>ThrowsAsync</span>&lt;<span class='pl-en'>StudentValidationException</span>&gt;(() <span class='pl-k'>=&gt;</span>
		<span class='pl-smi'>registerStudentTask</span>.<span class='pl-en'>AsTask</span>());

	<span class='pl-k'>this</span>.<span class='pl-smi'>storageBrokerMock</span>.<span class='pl-en'>Verify</span>(<span class='pl-en'>broker</span> <span class='pl-k'>=&gt;</span>
		<span class='pl-smi'>broker</span>.<span class='pl-en'>InsertStudentAsync</span>(<span class='pl-smi'>It</span>.<span class='pl-en'>IsAny</span>&lt;<span class='pl-en'>Student</span>&gt;()),
			<span class='pl-smi'>Times</span>.<span class='pl-smi'>Once</span>);

	<span class='pl-k'>this</span>.<span class='pl-smi'>loggingBrokerMock</span>.<span class='pl-en'>Verify</span>(<span class='pl-en'>broker</span> <span class='pl-k'>=&gt;</span>
		<span class='pl-smi'>broker</span>.<span class='pl-en'>LogError</span>(<span class='pl-smi'>It</span>.<span class='pl-en'>Is</span>(
			<span class='pl-en'>SameExceptionAs</span>(<span class='pl-smi'>expectedStudentValidationException</span>))),
				<span class='pl-smi'>Times</span>.<span class='pl-smi'>Once</span>);

	<span class='pl-k'>this</span>.<span class='pl-smi'>storageBrokerMock</span>.<span class='pl-en'>VerifyNoOtherCalls</span>();
	<span class='pl-k'>this</span>.<span class='pl-smi'>loggingBrokerMock</span>.<span class='pl-en'>VerifyNoOtherCalls</span>();
}</pre> 
			</div>
			<div class="highlight">
			<p dir='auto'>In the above test, we validate that we wrap a native <code>DuplicateKeyException</code> in a
				local model tailored to the specific model case which is the <code>AlreadyExistsStudentException</code>
				in our example here. then we wrap that again with a generic category exception model which is the
				<code>StudentDependencyValidationException</code>.</p>
			<p dir='auto'>There's a couple of rules that govern the construction of dependency validations, which are as
				follows:</p>
			<ul dir='auto'>
				<li>Rule 1: If a dependency validation is handling another dependency validation from a downstream
					service, then the inner exception of the downstream exception should be the same for the dependency
					validation at the current level.</li>
			</ul>
			<p dir='auto'>In other words, if some <code>StudentService</code> is throwing a
				<code>StudentDepdendencyValidationException</code> to an upstream service such as
				<code>StudentProcessingService</code> - then it's important that the
				<code>StudentProcessingDependencyValidationException</code> contain the same inner exception as the
				<code>StudentDependencyValidationException</code>. That's because once these exception are mapped into
				exposure components, such as API controller or UI components, the original validation message needs to
				propagate through the system and be presented to the end user no matter where it originated from.</p>
			<p dir='auto'>Additionally, maintaining the original inner exception guarantees the ability to communicate
				different error messages through API endpoints. For instance, <code>AlreadyExistsStudentException</code>
				can be communicated as <code>Conflict</code> or <code>409</code> on an API controller level - this
				differs from another dependency validation exception such as
				<code>InvalidStudentReferenceException</code> which would be communicated as
				<code>FailedDependency</code> error or <code>424</code>.</p>
			<ul dir='auto'>
				<li>Rule 2: If a dependency validation exception is handling a non-dependency validation exception it
					should take that exception as it's inner exception and not anything else.</li>
			</ul>
			<p dir='auto'>These rules ensures that only the local validation exception is what's being propagated not
				it's native exception from a storage system or an API or any other external dependency.</p>
			<p dir='auto'>Which is the case that we have here with our <code>AlreadyExistsStudentException</code> and
				it's <code>StudentDependencyValidationException</code> - the native exception is completely hidden away
				from sight, and the mapping of that native exception and it's inner message is what's being communicated
				to the end user. This gives the engineers the power to control what's being communicated from the other
				end of their system instead of letting the native message (which is subject to change) propagate to the
				end-users.</p>
			</div>
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
				<h5 dir='auto'><a id='user-content-213051-implementing-dependency-validations' class='anchor'
					aria-hidden='true' href='#213051-implementing-dependency-validations'><svg
						class='octicon octicon-link' viewBox='0 0 16 16' version='1.1' width='16' height='16'
						aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.1.3.0.5.1 Implementing Dependency Validations</h5>
			<p dir='auto'>Depending on where the validation error originates from, the implementation of dependency
				validations may or may not contain any business logic. As we previously mentioned, if the error is
				originating from the external resource (which is the case here) - then all we have to do is just wrap
				that error in a local exception then categorize it with an external exception under dependency
				validation.</p>
			<p dir='auto'>To ensure the aforementioned test passed, we are going to need few models.
				For the <code>AlreadyExistsStudentException</code> the implementation would be as follows:</p>
	<pre><span class='pl-k'>public</span> <span class='pl-k'>class</span> <span class='pl-en'>AlreadyExistsStudentException</span> : <span class='pl-en'>Exception</span>
{
	<span class='pl-k'>public</span> <span class='pl-en'>AlreadyExistsStudentException</span>(<span class='pl-en'>Exception</span> <span class='pl-en'>innerException</span>)
		: <span class='pl-k'>base</span>(<span class='pl-s'><span class='pl-pds'>$'</span>Student with the same Id already exists<span class='pl-pds'>'</span></span>, <span class='pl-smi'>innerException</span>){ }
}</pre> 
			</div>
			<p dir='auto'>We also need the <code>StudentDependencyValidationException</code> which should be as follows:
			</p>
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
	<pre><span class='pl-k'>public</span> <span class='pl-k'>class</span> <span class='pl-en'>StudentDependencyValidationException</span> : <span class='pl-en'>Exception</span>
{
	<span class='pl-k'>public</span> <span class='pl-en'>StudentDependencyValidationException</span>(<span class='pl-en'>Exception</span> <span class='pl-en'>innerException</span>)
		: <span class='pl-k'>base</span>(<span class='pl-s'><span class='pl-pds'>$'</span>Student dependency validation error occurred, please try again.<span class='pl-pds'>'</span></span>, <span class='pl-smi'>innerException</span>){ }
}
</pre>
			</div>	
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
				<p dir='auto'>Now, let's go to the implementation side, let's start with the exception handling logic:</p>
				<h5 dir='auto'><a id='user-content-studentserviceexceptionscs-2' class='anchor' aria-hidden='true'
					href='#studentserviceexceptionscs-2'><svg class='octicon octicon-link' viewBox='0 0 16 16'
						version='1.1' width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>StudentService.Exceptions.cs</h5>
	<pre><span class='pl-k'>private</span> <span class='pl-k'>delegate</span> <span class='pl-en'>ValueTask</span>&lt;<span class='pl-en'>Student</span>&gt; <span class='pl-en'>ReturningStudentFunction</span>();

<span class='pl-k'>private</span> <span class='pl-k'>async</span> <span class='pl-en'>ValueTask</span>&lt;<span class='pl-en'>Student</span>&gt; <span class='pl-en'>TryCatch</span>(<span class='pl-en'>ReturningStudentFunction</span> <span class='pl-en'>returningStudentFunction</span>)
{
	<span class='pl-k'>try</span>
	{
		<span class='pl-k'>return</span> <span class='pl-k'>await</span> <span class='pl-en'>returningStudentFunction</span>();
	}
	...
	<span class='pl-k'>catch</span> (<span class='pl-en'>DuplicateKeyException</span> <span class='pl-en'>duplicateKeyException</span>)
	{
		<span class='pl-k'>var</span> <span class='pl-en'>alreadyExistsStudentException</span> <span class='pl-k'>=</span> <span class='pl-k'>new</span> <span class='pl-en'>AlreadyExistsStudentException</span>(<span class='pl-smi'>duplicateKeyException</span>);
		<span class='pl-k'>throw</span> <span class='pl-en'>CreateAndLogDependencyValidationException</span>(<span class='pl-smi'>alreadyExistsStudentException</span>);
	}
}

...

<span class='pl-k'>private</span> <span class='pl-en'>StudentDependencyValidationException</span> <span class='pl-en'>CreateAndLogDependencyValidationException</span>(<span class='pl-en'>Exception</span> <span class='pl-en'>exception</span>)
{
	<span class='pl-k'>var</span> <span class='pl-en'>studentDependencyValidationException</span> <span class='pl-k'>=</span> <span class='pl-k'>new</span> <span class='pl-en'>StudentDependencyValidationException</span>(<span class='pl-smi'>exception</span>);
	<span class='pl-k'>this</span>.<span class='pl-smi'>loggingBroker</span>.<span class='pl-en'>LogError</span>(<span class='pl-smi'>studentDependencyValidationException</span>);

	<span class='pl-k'>return</span> <span class='pl-smi'>studentDependencyValidationException</span>;
}</pre>
			<p dir='auto'>We created the local inner exception in the catch block of our exception handling process to
				allow the reusability of our dependency validation exception method for other situations that require
				that same level of external exceptions.</p>
			<p dir='auto'>Everything else stays the same for the referencing of the <code>TryCatch</code> method in the
				<code>StudentService.cs</code> file.</p>		
				</div>
				<div class="highlight">
			<h3 dir='auto'><a id='user-content-2132-mapping' class='anchor' aria-hidden='true' href='#2132-mapping'><svg
						class='octicon octicon-link' viewBox='0 0 16 16' version='1.1' width='16' height='16'
						aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.1.3.2 Mapping</h3>
			<p dir='auto'>The second responsibility for a foundation service is to play the role of a mapper both ways
				between local models and non-local models. For instance, if you are leveraging an email service that
				provides it's own SDKs to integrate with, and your brokers are already wrapping and exposing the APIs
				for that service, your foundation service is required to map the inputs and outputs of the broker
				methods into local models. the same situation and more commonly between native non-local exceptions such
				as the ones we mentioned above with the dependency validation situation, the same aspect applies to just
				dependency errors or service errors as we will discuss shortly.</p>
			</div>
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
				<h4 dir='auto'><a id='user-content-21320-non-local-models' class='anchor' aria-hidden='true'
					href='#21320-non-local-models'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.1.3.2.0 Non-Local Models</h4>
			<p dir='auto'>Its very common for modern applications to require integration at some point with external
				services. these services can be local to the overall architecture or distributed system where the
				application lives, or it can be a 3rd party provider such as some of the popular email services for
				instance.
				External services providers invest a lot of effort in developing fluent APIs, SDKs and libraries in
				every common programming language to make it easy for the engineers to integrate their applications with
				that 3rd party service. For instance, let's assume a third party email service provider is offering the
				following API through their SDKs:</p>
	<pre><span class='pl-k'>public</span> <span class='pl-k'>interface</span> <span class='pl-en'>IEmailServiceProvider</span>
{
	<span class='pl-en'>ValueTask</span>&lt;<span class='pl-en'>EmailMessage</span>&gt; <span class='pl-en'>SendEmailAsync</span>(<span class='pl-en'>EmailMessage</span> <span class='pl-en'>message</span>);
}</pre> 
			</div>
			<p dir='auto'>Let's consider the model <code>EmailMessage</code> is a native model, it comes with the email
				service provider SDK. your brokers might offer a wrapper around this API by building a contract to
				abstract away the <em>functionality</em> but can't do much with the native models that are passed in or
				returned out of these functionality. therefore our brokers interface would look something like this:</p>
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
	<pre><span class='pl-k'>public</span> <span class='pl-k'>interface</span> <span class='pl-en'>IEmailBroker</span>
{
	<span class='pl-en'>ValueTask</span>&lt;<span class='pl-en'>EmailMessage</span>&gt; <span class='pl-en'>SendEmailMessageAsync</span>(<span class='pl-en'>EmailMessage</span> <span class='pl-en'>message</span>);
}</pre> 
			</div>
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
				<p dir='auto'>Then the implementation would something like this:</p>
	<pre><span class='pl-k'>public</span> <span class='pl-k'>class</span> <span class='pl-en'>EmailBroker</span> : <span class='pl-en'>IEmailBroker</span>
{
	<span class='pl-k'>public</span> <span class='pl-k'>async</span> <span class='pl-en'>ValueTask</span>&lt;<span class='pl-en'>EmailMessage</span>&gt; <span class='pl-en'>SendEmailMessageAsync</span>(<span class='pl-en'>EmailMessage</span> <span class='pl-en'>message</span>) <span class='pl-k'>=&gt;</span>
		<span class='pl-k'>await</span> <span class='pl-k'>this</span>.<span class='pl-smi'>emailServiceProvider</span>.<span class='pl-en'>SendEmailAsync</span>(<span class='pl-smi'>message</span>);
}</pre> 
			</div>
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
				<p dir='auto'>As we said before, the brokers here have done their part of abstraction by pushing away the
					actual implementation and the dependencies of the native <code>EmailServiceProvider</code> away from our
					foundation serviecs. But that's only 50% of the job, the abstraction isn't quite fully complete yet
					until there are no tracks of the native <code>EmailMessage</code> model. This is where the foundation
					services come in to do a test-driven operation of mapping between the native non-local models and your
					application's local models. therefore its very possible to see a mapping function in a foundation
					service to abstract away the native model from the rest of your business layer services.</p>
				<p dir='auto'>Your foundation service then will be required to support a new local model, let's call it
					<code>Email</code>. your local model's property may be identical to the external model
					<code>EmailMessage</code> - especially on a primitive data type level. But the new model would be the
					one and only contract between your pure business logic layer (processing, orchestration, coordination
					and management services) and your hybrid logic layer like the foundation services. Here's a code snippet
					for this operation:</p>
	<pre><span class='pl-k'>public</span> <span class='pl-k'>async</span> <span class='pl-en'>ValueTask</span>&lt;<span class='pl-en'>Email</span>&gt; <span class='pl-en'>SendEmailMessageAsync</span>(<span class='pl-en'>Email</span> <span class='pl-en'>email</span>)
{
	<span class='pl-en'>EmailMessage</span> <span class='pl-en'>inputEmailMessage</span> <span class='pl-k'>=</span> <span class='pl-en'>MapToEmailMessage</span>(<span class='pl-smi'>email</span>);
	<span class='pl-en'>EmailMessage</span> <span class='pl-en'>sentEmailMessage</span> <span class='pl-k'>=</span> <span class='pl-k'>await</span> <span class='pl-k'>this</span>.<span class='pl-smi'>emailBroker</span>.<span class='pl-en'>SendEmailMessageAsync</span>(<span class='pl-smi'>inputEmailMessage</span>);

	<span class='pl-k'>return</span> <span class='pl-en'>MapToEmail</span>(<span class='pl-smi'>sentEmailMessage</span>);
}
</pre> 
<p dir='auto'>Depending on whether the returned message has a status or you would like to return the input
	message as a sign of a successful operation, both practices are valid in my Standard. It all depends on
	what makes more sense to the operation you are trying to execute. the code snippet above is an ideal
	scenario where your code will try to stay true to the value passed in as well as the value returned with
	all the necessary mapping included.</p>
			</div>

			<div class="highlight">
			<h4 dir='auto'><a id='user-content-21321-exceptions-mappings' class='anchor' aria-hidden='true'
					href='#21321-exceptions-mappings'><svg class='octicon octicon-link' viewBox='0 0 16 16'
						version='1.1' width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.1.3.2.1 Exceptions Mappings</h4>
			<p dir='auto'>Just like the non-local models, exceptions that are either produced by the external API like
				the EntityFramework models <code>DbUpdateException</code> or any other has to be mapped into local
				exception models.
				Handling these non-local exceptions that early before entering the pure-business layer components will
				prevent any potential tight coupling or dependency on any external model. as it may be very common, that
				exceptions can be handled differently based on the type of exception and how we want to deal with it
				internally in the system.
				For instance, if we are trying to handle a <code>UserNotFoundException</code> being thrown from using
				Microsoft Graph for instance, we might not necessarily want to exit the entire procedure. we might want
				to continue by adding a user in some other storage for future Graph submittal processing.
				External APIs should not influence whether your internal operation should halt or not. and therefore
				handling exceptions on the Foundation layer is the guarantee that this influence is limited within the
				borders of our external resources handling area of our application and has no impact whatsoever on our
				core business processes.
				The following illustration should draw the picture a bit clearer from that perspective:
				
			</p>
			<p align='center' style='padding: 5px;' dir='auto'>
				<a target='_blank' rel='noopener noreferrer'
					href='https://user-images.githubusercontent.com/1453985/112714067-b7366a00-8e95-11eb-9bb7-a5a047640f4a.png'><img
						src='https://user-images.githubusercontent.com/1453985/112714067-b7366a00-8e95-11eb-9bb7-a5a047640f4a.png'
						style='max-width: 100%;'></a>
			</p>
		</div>
			
		<div class="highlight">
			<p dir='auto'>Here's some common scenarios for mapping native or inner local exceptions to outer exceptions:
			</p>
			<table>
				<thead>
					<tr>
						<th>Exception</th>
						<th>Wrap Inner Exception With</th>
						<th>Wrap With</th>
						<th>Log Level</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td>NullStudentException</td>
						<td>-</td>
						<td>StudentValidationException</td>
						<td>Error</td>
					</tr>
					<tr>
						<td>InvalidStudentException</td>
						<td>-</td>
						<td>StudentValidationException</td>
						<td>Error</td>
					</tr>
					<tr>
						<td>SqlException</td>
						<td>FailedStudentStorageException</td>
						<td>StudentDependencyException</td>
						<td>Critical</td>
					</tr>
					<tr>
						<td>HttpResponseUrlNotFoundException</td>
						<td>FailedStudentApiException</td>
						<td>StudentDependencyException</td>
						<td>Critical</td>
					</tr>
					<tr>
						<td>HttpResponseUnauthorizedException</td>
						<td>FailedStudentApiException</td>
						<td>StudentDependencyException</td>
						<td>Critical</td>
					</tr>
					<tr>
						<td>NotFoundStudentException</td>
						<td>-</td>
						<td>StudentValidationException</td>
						<td>Error</td>
					</tr>
					<tr>
						<td>HttpResponseNotFoundException</td>
						<td>NotFoundStudentException</td>
						<td>StudentDependencyValidationException</td>
						<td>Error</td>
					</tr>
					<tr>
						<td>DuplicateKeyException</td>
						<td>AlreadyExistsStudentException</td>
						<td>StudentDependencyValidationException</td>
						<td>Error</td>
					</tr>
					<tr>
						<td>HttpResponseConflictException</td>
						<td>AlreadyExistsStudentException</td>
						<td>StudentDependencyValidationException</td>
						<td>Error</td>
					</tr>
					<tr>
						<td>ForeignKeyConstraintConflictException</td>
						<td>InvalidStudentReferenceException</td>
						<td>StudentDependencyValidationException</td>
						<td>Error</td>
					</tr>
					<tr>
						<td>DbUpdateConcurrencyException</td>
						<td>LockedStudentException</td>
						<td>StudentDependencyValidationException</td>
						<td>Error</td>
					</tr>
					<tr>
						<td>DbUpdateException</td>
						<td>FailedStudentStorageException</td>
						<td>StudentDependencyException</td>
						<td>Error</td>
					</tr>
					<tr>
						<td>HttpResponseException</td>
						<td>FailedStudentApiException</td>
						<td>StudentDependencyException</td>
						<td>Error</td>
					</tr>
					<tr>
						<td>Exception</td>
						<td>FailedStudentServiceException</td>
						<td>StudentServiceException</td>
						<td>Error</td>
					</tr>
				</tbody>
			</table>
			<p dir='auto'>[*] <a href='https://www.youtube.com/watch?v=Wtpxb7yPQP0' rel='nofollow'>Standerdizing
					Validations &amp; Exceptions</a></p>
			<p dir='auto'>[*] <a href='https://www.youtube.com/watch?v=guJPrIQ0kJk' rel='nofollow'>Test-Driving
					Non-Circuit-Breaking Validations</a></p>
				</div>
		</article>
		<article class='markdown-body entry-content container-lg' itemprop='text'>
			<h1 dir='auto'><a id='user-content-22-processing-services-higher-order-business-logic' class='anchor'
					aria-hidden='true' href='#22-processing-services-higher-order-business-logic'><svg
						class='octicon octicon-link' viewBox='0 0 16 16' version='1.1' width='16' height='16'
						aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.2 Processing Services (Higher-Order Business Logic)</h1>
			<h2 dir='auto'><a id='user-content-220-introduction' class='anchor' aria-hidden='true'
					href='#220-introduction'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.2.0 Introduction</h2>
			<p dir='auto'>Processing services are the layer where a higher order of business logic is implemented. They
				may combine (or orchestrate) two primitive-level functions from their corresponding foundation service
				to introduce a newer functionality. They may also call one primitive function and change the outcome
				with a little bit of added business logic. And sometimes processing services are there as a pass-through
				to introduce balance to the overall architecture.</p>
			<p dir='auto'>Processing services are optional, depending on your business need - in a simple CRUD
				operations API, processing services and all the other categories of services beyond that point will
				cease to exist as there is no need for a higher order of business logic at that point.</p>
			<p dir='auto'>Here's an example of what a Processing service function would look like:</p>
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
	<pre><span class='pl-k'>public</span> <span class='pl-en'>ValueTask</span>&lt;<span class='pl-en'>Student</span>&gt; <span class='pl-en'>UpsertStudentAsync</span>(<span class='pl-en'>Student</span> <span class='pl-en'>student</span>) <span class='pl-k'>=&gt;</span>
<span class='pl-en'>TryCatch</span>(<span class='pl-k'>async</span> () <span class='pl-k'>=&gt;</span>
{
	<span class='pl-en'>ValidateStudent</span>(<span class='pl-smi'>student</span>);

	<span class='pl-en'>IQueryable</span>&lt;<span class='pl-en'>Student</span>&gt; <span class='pl-en'>allStudents</span> <span class='pl-k'>=</span>
		<span class='pl-k'>this</span>.<span class='pl-smi'>studentService</span>.<span class='pl-en'>RetrieveAllStudents</span>();

	<span class='pl-k'>bool</span> <span class='pl-en'>studentExists</span> <span class='pl-k'>=</span> <span class='pl-smi'>allStudents</span>.<span class='pl-en'>Any</span>(<span class='pl-en'>retrievedStudent</span> <span class='pl-k'>=&gt;</span>
		<span class='pl-smi'>retrievedStudent</span>.<span class='pl-smi'>Id</span> <span class='pl-k'>==</span> <span class='pl-smi'>student</span>.<span class='pl-smi'>Id</span>);

	<span class='pl-k'>return</span> <span class='pl-smi'>studentExists</span> <span class='pl-k'>switch</span> {
		<span class='pl-c1'>false</span> <span class='pl-k'>=&gt;</span> <span class='pl-k'>await</span> <span class='pl-k'>this</span>.<span class='pl-smi'>studentService</span>.<span class='pl-en'>RegisterStudentAsync</span>(<span class='pl-smi'>student</span>),
		_ <span class='pl-k'>=&gt;</span> <span class='pl-k'>await</span> <span class='pl-k'>this</span>.<span class='pl-smi'>studentService</span>.<span class='pl-en'>ModifyStudentAsync</span>(<span class='pl-smi'>student</span>.<span class='pl-smi'>Id</span>)
	};
});</pre> 
<p dir='auto'>Processing services make Foundation services nothing but a layer of validation on top of the
	existing primitive operations. Which means that Processing services functions are beyond primitive, and
	they only deal with local models as we will discuss in the upcoming sections.</p>
			</div>
			<div class="highlight">
			<h2 dir='auto'><a id='user-content-221-on-the-map' class='anchor' aria-hidden='true'
					href='#221-on-the-map'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.2.1 On The Map</h2>
			<p dir='auto'>When used, Processing services live between foundation services and the rest of the
				application. they may not call Entity or Business brokers, but they may call Utility brokers such as
				logging brokers, time brokers and any other brokers that offer supporting functionality and not specific
				to any particular business logic. Here's a visual of where processing services are located on the map of
				our architecture:</p>
			
			<p align='center' style='padding: 5px;' dir='auto'>
				<a target='_blank' rel='noopener noreferrer'
					href='https://user-images.githubusercontent.com/1453985/111928442-d9cd1b00-8a70-11eb-82c8-83399c98c87d.png'><img
						src='https://user-images.githubusercontent.com/1453985/111928442-d9cd1b00-8a70-11eb-82c8-83399c98c87d.png'
						style='max-width: 100%;'></a>
			</p>
			
			<p dir='auto'>On the right side of a Processing service lies all the non-local models and functionality,
				whether it's through the brokers, or the models that the foundation service is trying to map into local
				models.
				On the left side of Processing services is pure local functionality, models and architecture. Starting
				from the Processing services themselves, there should be no trace or track of any native or non-local
				models in the system.</p>
			</div>
			<div class="highlight">
			<h2 dir='auto'><a id='user-content-222-charachteristics' class='anchor' aria-hidden='true'
					href='#222-charachteristics'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.2.2 Charachteristics</h2>
			<p dir='auto'>Processing services in general are combiners of multiple primitive-level functions to produce
				a higher-order business logic. but they have much more characteristics than just that, let's talk about
				those here.</p>
				</div>	
			<div class="highlight">
				<h3 dir='auto'><a id='user-content-2220-language' class='anchor' aria-hidden='true'
					href='#2220-language'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1' width='16'
						height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.2.2.0 Language</h3>
			<p dir='auto'>The language used in processing services defines the level of complexity and the capabilities
				it offers.
				Usually, processing services combine two or more primitive operations from the foundation layer to
				create a new value.</p>
				</div>	
			<div class="highlight">
			<h4 dir='auto'><a id='user-content-22200-functions-language' class='anchor' aria-hidden='true'
					href='#22200-functions-language'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.2.2.0.0 Functions Language</h4>
			<p dir='auto'>At a glance, Processing services language change from primitive operations such as
				<code>AddStudent</code> or <code>RemoveStudent</code> to <code>EnsureStudentExists</code> or
				<code>UpsertStudent</code>. they usually offer a more advanced business-logic operations to support a
				higher order functionality.
				Here's some examples for the most common combinations a processing service may offer:</p>
			<table>
				<thead>
					<tr>
						<th>Processing Operation</th>
						<th>Primitive Functions</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td>EnsureStudentExistsAsync</td>
						<td>RetrieveAllStudents + AddStudentAsync</td>
					</tr>
					<tr>
						<td>UpsertStudentAsync</td>
						<td>RetrieveStudentById + AddStudentAsync + ModifyStudentAsync</td>
					</tr>
					<tr>
						<td>VerifyStudentExists</td>
						<td>RetrieveAllStudents</td>
					</tr>
					<tr>
						<td>TryRemoveStudentAsync</td>
						<td>RetrieveStudentById + RemoveStudentByIdAsync</td>
					</tr>
				</tbody>
			</table>
			<p dir='auto'>As you can see, the combination of primitive functions processing services do might also
				include adding an additional layer of logic on top of the existing primitive operation. For instance,
				<code>VerifyStudentExists</code> takes advantage of the <code>RetrieveAllStudents</code> primitive
				function, and then adds a boolean logic to verify the returned student by and Id from a query actually
				exists or not before returning a <code>boolean</code>.</p>
				</div>
			<div class="highlight">
			<h4 dir='auto'><a id='user-content-22201-pass-through' class='anchor' aria-hidden='true'
					href='#22201-pass-through'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.2.2.0.1 Pass-Through</h4>
			<p dir='auto'>Processing services may borrow some of the terminology a foundation service may use. for
				instance, in a pass-through scenario, a processing service with be as simple as
				<code>AddStudentAsync</code>. We will discuss the architecture-balancing scenarios later in this
				chapter.
				Unlike Foundation services, Processing services are required to have the identifier
				<code>Processing</code> in their names. for instance, we say <code>StudentProcessingService</code>.</p>
				</div>
			<div class="highlight">
			<h4 dir='auto'><a id='user-content-22202-class-level-language' class='anchor' aria-hidden='true'
					href='#22202-class-level-language'><svg class='octicon octicon-link' viewBox='0 0 16 16'
						version='1.1' width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.2.2.0.2 Class-Level Language</h4>
			<p dir='auto'>More importantly Processing services must include the name of the entity that is supported by
				their corresponding Foundation service.
				For instance, if a Processing service is dependant on a <code>TeacherService</code>, then the Processing
				service name must be <code>TeacherProcessingService</code>.</p>
				</div>
			<div class="highlight">
			<h3 dir='auto'><a id='user-content-2221-dependencies' class='anchor' aria-hidden='true'
					href='#2221-dependencies'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.2.2.1 Dependencies</h3>
			<p dir='auto'>Processing services can only have two types of dependencies. a corresponding Foundation
				service, or a Utility broker. That's simply because Processing services are nothing but an extra
				higher-order level of business logic, orchestrated by combined primitive operations on the Foundation
				level.
				Processing services can also use Utility brokers such as <code>TimeBroker</code> or
				<code>LoggingBroker</code> to support it's reporting aspect. but it shall never interact with an Entity
				or Business broker.</p>
				</div>
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
				<h3 dir='auto'><a id='user-content-2222-one-foundation' class='anchor' aria-hidden='true'
					href='#2222-one-foundation'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.2.2.2 One-Foundation</h3>
			<p dir='auto'>Processing services can interact with one and only one Foundation service. In fact without a
				foundation service there can never be a Processing layer. and just like we mentioned above about the
				language and naming, Processing services take on the exact same entity name as their Foundation
				dependency.
				For instance, a processing service that handles higher-order business-logic for students will
				communicate with nothing but its foundation layer, which would be <code>StudentService</code> for
				instance. That means that processing services will have one and only one service as a dependency in its
				construction or initiation as follows:</p>
	<pre><span class='pl-k'>public</span> <span class='pl-k'>class</span> <span class='pl-en'>StudentProcessingService</span>
{
	<span class='pl-k'>private</span> <span class='pl-k'>readonly</span> <span class='pl-en'>IStudentService</span> <span class='pl-en'>studentService</span>;

	<span class='pl-k'>public</span> <span class='pl-en'>StudentProcessingService</span>(<span class='pl-en'>IStudentService</span> <span class='pl-en'>studentService</span>) <span class='pl-k'>=&gt;</span>
		<span class='pl-k'>this</span>.<span class='pl-smi'>studentService</span> <span class='pl-k'>=</span> <span class='pl-smi'>studentService</span>;
}</pre> 
<p dir='auto'>However, processing services may require dependencies on multiple utility brokers such as
	<code>DateTimeBroker</code> or <code>LoggingBroker</code> ... etc.</p>
			</div>	
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
				<h3 dir='auto'><a id='user-content-2223-used-data-only-validations' class='anchor' aria-hidden='true'
					href='#2223-used-data-only-validations'><svg class='octicon octicon-link' viewBox='0 0 16 16'
						version='1.1' width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.2.2.3 Used-Data-Only Validations</h3>
			<p dir='auto'>Unlike the Foundation layer services, Processing services only validate what it needs from
				it's input. For instance, if a Processing service is required to validate a student entity exists, and
				it's input model just happens to be an entire <code>Student</code> entity, it will only validate that
				the entity is not <code>null</code> and that the <code>Id</code> of that entity is valid. the rest of
				the entity is out of the concern of the Processing service.
				Processing services delegate full validations to the layer of services that is concerned with that which
				is the Foundation layer. here's an example:</p>
	<pre><span class='pl-k'>public</span> <span class='pl-en'>ValueTask</span>&lt;<span class='pl-en'>Student</span>&gt; <span class='pl-en'>UpsertStudentAsync</span>(<span class='pl-en'>Student</span> <span class='pl-en'>student</span>) <span class='pl-k'>=&gt;</span>
<span class='pl-en'>TryCatch</span>(<span class='pl-k'>async</span> () <span class='pl-k'>=&gt;</span>
{
	<span class='pl-en'>ValidateStudent</span>(<span class='pl-smi'>student</span>);

	<span class='pl-en'>IQueryable</span>&lt;<span class='pl-en'>Student</span>&gt; <span class='pl-en'>allStudents</span> <span class='pl-k'>=</span>
		<span class='pl-k'>this</span>.<span class='pl-smi'>studentService</span>.<span class='pl-en'>RetrieveAllStudents</span>();

	<span class='pl-k'>bool</span> <span class='pl-en'>isStudentExists</span> <span class='pl-k'>=</span> <span class='pl-smi'>allStudents</span>.<span class='pl-en'>Any</span>(<span class='pl-en'>retrievedStudent</span> <span class='pl-k'>=&gt;</span>
		<span class='pl-smi'>retrievedStudent</span>.<span class='pl-smi'>Id</span> <span class='pl-k'>==</span> <span class='pl-smi'>student</span>.<span class='pl-smi'>Id</span>);

	<span class='pl-k'>return</span> <span class='pl-smi'>isStudentExsits</span> <span class='pl-k'>switch</span> {
		<span class='pl-c1'>false</span> <span class='pl-k'>=&gt;</span> <span class='pl-k'>await</span> <span class='pl-k'>this</span>.<span class='pl-smi'>studentService</span>.<span class='pl-en'>RegisterStudentAsync</span>(<span class='pl-smi'>student</span>),
		_ <span class='pl-k'>=&gt;</span> <span class='pl-k'>await</span> <span class='pl-k'>this</span>.<span class='pl-smi'>studentService</span>.<span class='pl-en'>ModifyStudentAsync</span>(<span class='pl-smi'>student</span>.<span class='pl-smi'>Id</span>)
	};
});</pre> 
			<p dir='auto'>Processing services are also not very concerned about outgoing validations except for what
				it's going to use within the same routine. For instance, if a Processing service is retrieving a model,
				and it's going to use this model to be passed to another primitive-level function on the Foundation
				layer, the Processing service will be required to validate that the retrieved model is valid depending
				on which attributes of the model it uses.
				For Pass-through scenarios however, processing services will delegate the outgoing validation to the
				foundation layer.</p>
			</div>
			<div class="highlight">
			<h2 dir='auto'><a id='user-content-223-responsibilities' class='anchor' aria-hidden='true'
					href='#223-responsibilities'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.2.3 Responsibilities</h2>
			<p dir='auto'>Processing services main responsibility is to provide higher-order business logic. This
				happens along with the regular signature mapping and various use-only validations which we will discuss
				in detail in this section.</p>
			</div>
			<div class="highlight">
			<h3 dir='auto'><a id='user-content-2230-higher-order-logic' class='anchor' aria-hidden='true'
					href='#2230-higher-order-logic'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.2.3.0 Higher-Order Logic</h3>
			<p dir='auto'>Higher-order business logic are functions that are above primitive. For instance,
				<code>AddStudentAsync</code> function is a primitive function that does one thing and one thing only.
				But higher-order logic is when we try to provide a function that changes the outcome of a single
				primitive function like <code>VerifyStudentExists</code> which returns a boolean value instead of the
				entire object of the <code>Student</code>, or a combination of multiple primitive functions such as
				<code>EnsureStudentExistsAsync</code> which is a function that will only add a given
				<code>Student</code> model if and only if the aforementioned object doesn't already exist in storage.
				here's some examples:</p>
			</div>
			<div class="highlight">
			<h4 dir='auto'><a id='user-content-22300-shifters' class='anchor' aria-hidden='true'
					href='#22300-shifters'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.2.3.0.0 Shifters</h4>
			<p dir='auto'>The shifter pattern in a higher order business logic is when the outcome of a particular
				primitive function is changed from one value to another. Ideally a primitive type such as a
				<code>bool</code> or <code>int</code> not a completely different type as that would violate the purity
				principle.
				For instance, in a shifter pattern, we want to verify if a student exists or not. We don't really want
				the entire object, but just whether it exists in a particular system or not. Now, this seems like a case
				where we only need to interact with one and only one foundation service and we are shifting the value of
				the outcome to something else. Which should fit perfectly in the realm of the processing services.
				Here's an example:</p>
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
	<pre><span class='pl-k'>public</span> <span class='pl-en'>ValueTask</span>&lt;<span class='pl-k'>bool</span>&gt; <span class='pl-en'>VerifyStudentExists</span>(<span class='pl-en'>Guid</span> <span class='pl-en'>studentId</span>) <span class='pl-k'>=&gt;</span>
<span class='pl-en'>TryCatch</span>(<span class='pl-k'>async</span> () <span class='pl-k'>=&gt;</span>
{
	<span class='pl-en'>IQueryable</span>&lt;<span class='pl-en'>Student</span>&gt; <span class='pl-en'>allStudents</span> <span class='pl-k'>=</span>
		<span class='pl-k'>this</span>.<span class='pl-smi'>studentService</span>.<span class='pl-en'>RetrieveAllStudents</span>();

	<span class='pl-en'>ValidateStudents</span>(<span class='pl-smi'>allStudents</span>);

	<span class='pl-k'>return</span> <span class='pl-smi'>allStudents</span>.<span class='pl-en'>Any</span>(<span class='pl-en'>student</span> <span class='pl-k'>=&gt;</span> <span class='pl-smi'>student</span>.<span class='pl-smi'>Id</span> <span class='pl-k'>==</span> <span class='pl-smi'>studentId</span>);
});</pre> 
			</div>
			<p dir='auto'>In the snippet above, we provided a higher order business logic, by returning a boolean value
				of whether a particular student with a given <code>Id</code> exists in the system or not. There are
				cases where your orchestration layer of services isn't really concerned with all the details of a
				particular entity but just knowing whether it exists or not as a part of an upper business logic or what
				we call orchestration.</p>
			<p dir='auto'>Here's another popular example for processing services shifting pattern:</p>
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
	<pre><span class='pl-k'>public</span> <span class='pl-k'>int</span> <span class='pl-en'>RetrieveStudentsCount</span>() <span class='pl-k'>=&gt;</span>
<span class='pl-en'>TryCatch</span>(() <span class='pl-k'>=&gt;</span>
{
	<span class='pl-en'>IQueryable</span>&lt;<span class='pl-en'>Student</span>&gt; <span class='pl-en'>allStudents</span> <span class='pl-k'>=</span>
		<span class='pl-k'>this</span>.<span class='pl-smi'>studentService</span>.<span class='pl-en'>RetrieveAllStudents</span>();

	<span class='pl-en'>ValidateStudents</span>(<span class='pl-smi'>allStudents</span>);

	<span class='pl-k'>return</span> <span class='pl-smi'>allStudents</span>.<span class='pl-en'>Count</span>();
});</pre> 
			</div>
			<p dir='auto'>In the example above, we provided a function to retrieve the count of all students in a given
				system. It's up to the designers of the system to determine whether to interpret a <code>null</code>
				value retrieved for all students to be an exception case that was not expected to happen or return a
				<code>0</code>; all depending on how they manage the outcome.
				In our case here we validate the outgoing data as much as the incoming, especially if it's going to be
				used within the processing function to ensure further failures do not occur for upstream services.</p>
			</div>
			<div class="highlight">
			<h4 dir='auto'><a id='user-content-22301-combinations' class='anchor' aria-hidden='true'
					href='#22301-combinations'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.2.3.0.1 Combinations</h4>
			<p dir='auto'>The combination of multiple primitive functions from the foundation layer to achieve a
				higher-order business logic is one of the main responsibilities of a processing service. As we mentioned
				before, some of the most popular examples is for ensuring a particular student model exists as follows:
			</p>
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
	<pre><span class='pl-k'>public</span> <span class='pl-k'>async</span> <span class='pl-en'>ValueTask</span>&lt;<span class='pl-en'>Student</span>&gt; <span class='pl-en'>EnsureStudentExistsAsync</span>(<span class='pl-en'>Student</span> <span class='pl-en'>student</span>) <span class='pl-k'>=&gt;</span>
<span class='pl-en'>TryCatch</span>(<span class='pl-k'>async</span> () <span class='pl-k'>=&gt;</span>
{
	<span class='pl-en'>ValidateStudent</span>(<span class='pl-smi'>student</span>);

	<span class='pl-en'>IQueryable</span>&lt;<span class='pl-en'>Student</span>&gt; <span class='pl-en'>allStudents</span> <span class='pl-k'>=</span>
		<span class='pl-k'>this</span>.<span class='pl-smi'>studentService</span>.<span class='pl-en'>RetrieveAllStudents</span>();

	<span class='pl-en'>Student</span> <span class='pl-en'>maybeStudent</span> <span class='pl-k'>=</span> <span class='pl-smi'>allStudents</span>.<span class='pl-en'>FirstOrDefault</span>(<span class='pl-en'>retrievedStudent</span> <span class='pl-k'>=&gt;</span>
		<span class='pl-smi'>retrievedStudent</span>.<span class='pl-smi'>Id</span> <span class='pl-k'>==</span> <span class='pl-smi'>student</span>.<span class='pl-smi'>Id</span>);

	<span class='pl-k'>return</span> <span class='pl-smi'>maybeStudent</span> <span class='pl-k'>switch</span>
	{
		{} <span class='pl-k'>=&gt;</span> <span class='pl-smi'>maybeStudent</span>,
		_ <span class='pl-k'>=&gt;</span> <span class='pl-k'>await</span> <span class='pl-k'>this</span>.<span class='pl-smi'>studentService</span>.<span class='pl-en'>AddStudentAsync</span>(<span class='pl-smi'>student</span>)
	};
});</pre> 		 
			</div>
			<p dir='auto'>In the code snippet above, we combined <code>RetrieveAll</code> with <code>AddAsync</code> to
				achieve a higher-order business logic operation. The <code>EnsureAsync</code> operation which needs to
				verify something or entity exists first before trying to persist it. The terminology around these
				higher-order business logic routines is very important. Its importance lies mainly in controlling the
				expectations of the outcome and the inner functionality. But it also ensures less cognitive resources
				from the engineers are required to understand the underlying capabilities of a particular routine.
				The conventional language used in all of these services also ensures that redundant capability will not
				be created mistakenly. For instance, an engineering team without any form of standard might create
				<code>TryAddStudentAsync</code> while already having an existing functionality such as
				<code>EnsureStudentExistsAsync</code> which does exactly the same thing. The convention here with the
				limitation of the size of capabilities a particular service may have ensures redundant work shall never
				occur in any occassion.
				There are so many different instances of combinations that can produce a higher-order business logic,
				for instance we may need to implement a functionality that ensure a student is removed. We use
				<code>EnsureStudentRemovedByIdAsync</code> to combine a <code>RetrieveById</code> and a
				<code>RemoveById</code> in the same routine. It all depends on what level of capabilities an upstream
				service may need to implement such a functionality.</p>
			</div>
			<div class="highlight">
			<h3 dir='auto'><a id='user-content-2231-signature-mapping' class='anchor' aria-hidden='true'
					href='#2231-signature-mapping'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.2.3.1 Signature Mapping</h3>
			<p dir='auto'>Although processing services operate fully on local models and local contracts, they are still
				required to map foundation-level services' models to their own local models. For instance, if a
				foundation service is throwing <code>StudentValidationException</code> then processing services will map
				that exception to <code>StudentProcessingDependencyValidationException</code>. Let's talk about mapping
				in this section.</p>
			</div>
			<h4 dir='auto'><a id='user-content-22310-non-exception-local-models' class='anchor' aria-hidden='true'
					href='#22310-non-exception-local-models'><svg class='octicon octicon-link' viewBox='0 0 16 16'
						version='1.1' width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.2.3.1.0 Non-Exception Local Models</h4>
			<p dir='auto'>In general, processing services are required to map any incoming or outgoing objects with a
				specific model to its own. But that rule doesn't always apply to non-exception models. For instance, if
				a <code>StudentProcessingService</code> is operating based on a <code>Student</code> model, and there's
				no need for a special model for this service, then the processing service may be permitted to use the
				exact same model from the foundation layer.</p>
			<h4 dir='auto'><a id='user-content-22311-exception-models' class='anchor' aria-hidden='true'
					href='#22311-exception-models'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.2.3.1.1 Exception Models</h4>
			<p dir='auto'>When it comes to processing services handling exceptions from the foundation layer, it is
				important to understand that exceptions in our Standard are more expressive in their naming conventions
				and their role more than any other model. Exceptions here define the what, where and why every single
				time they are thrown.
				For instance, an exception that's called <code>StudentProcessingServiceException</code> indicates the
				entity of the exception which is the <code>Student</code> entity. Then it indicates the location of the
				exception which is the <code>StudentProcessingService</code>. And lastly it indicates the reason for
				that exception which is <code>ServiceException</code> indicating an internal error to the service that
				is not a validation or a dependency of nature that happened.
				Just like the foundation layer, processing services will do the following mapping to occurring
				exceptions from its dependencies:</p>
			<table>
				<thead>
					<tr>
						<th>Exception</th>
						<th>Wrap Inner Exception With</th>
						<th>Wrap With</th>
						<th>Log Level</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td>StudentDependencyValidationException</td>
						<td>Any inner exception</td>
						<td>StudentProcessingDependencyValidationException</td>
						<td>Error</td>
					</tr>
					<tr>
						<td>StudentValidationException</td>
						<td>Any inner exception</td>
						<td>StudentProcessingDependencyValidationException</td>
						<td>Error</td>
					</tr>
					<tr>
						<td>StudentDependencyException</td>
						<td>-</td>
						<td>StudentProcessingDependencyException</td>
						<td>Error</td>
					</tr>
					<tr>
						<td>StudentServiceException</td>
						<td>_</td>
						<td>StudentProcessingDependencyException</td>
						<td>Error</td>
					</tr>
					<tr>
						<td>Exception</td>
						<td>_</td>
						<td>StudentProcessingServiceException</td>
						<td>Error</td>
					</tr>
				</tbody>
			</table>
			<p dir='auto'>[*] <a href='https://www.youtube.com/watch?v=VgzoZ-b1A4U' rel='nofollow'>Processing services
					in Action (Part 1)</a></p>
			<p dir='auto'>[*] <a href='https://www.youtube.com/watch?v=4lfZcWzbIcE' rel='nofollow'>Processing services
					in Action (Part 2)</a></p>
			<p dir='auto'>[*] <a href='https://www.youtube.com/watch?v=R4sA4V4-_5o' rel='nofollow'>Processing services
					in Action (Part 3)</a></p>
			<p dir='auto'>[*] <a href='https://www.youtube.com/watch?v=u4uqBiB1TaI' rel='nofollow'>Processing services
					in Action (Part 4)</a></p>
		</article>
		<article class='markdown-body entry-content container-lg' itemprop='text'>
			<h1 dir='auto'><a id='user-content-23-orchestration-services-complex-higher-order-logic' class='anchor'
					aria-hidden='true' href='#23-orchestration-services-complex-higher-order-logic'><svg
						class='octicon octicon-link' viewBox='0 0 16 16' version='1.1' width='16' height='16'
						aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.3 Orchestration Services (Complex Higher Order Logic)</h1>
			<h2 dir='auto'><a id='user-content-230-introduction' class='anchor' aria-hidden='true'
					href='#230-introduction'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.3.0 Introduction</h2>
			<p dir='auto'>Orchestration services are the combinators between multiple foundation or processing services
				to perform a complex logical operation. Orchestrations main responsibility is to do a multi-entity
				logical operation and delegate the dependencies of said operation to downstream processing or foundation
				services.
				Orchestration services main responsibility is to encapsulate operations that require two or three
				business entities.</p>
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
	<pre><span class='pl-k'>public</span> <span class='pl-k'>async</span> <span class='pl-en'>ValueTask</span>&lt;<span class='pl-en'>LibraryCard</span>&gt; <span class='pl-en'>CreateStudentLibraryCardAsync</span>(<span class='pl-en'>LibraryCard</span> <span class='pl-en'>libraryCard</span>) <span class='pl-k'>=&gt;</span>
<span class='pl-en'>TryCatch</span>(<span class='pl-k'>async</span> () <span class='pl-k'>=&gt;</span>
{
	<span class='pl-en'>ValidateLibraryCard</span>(<span class='pl-smi'>libraryCard</span>);

	<span class='pl-k'>await</span> <span class='pl-k'>this</span>.<span class='pl-smi'>studentProcessingService</span>
		.<span class='pl-en'>VerifyEnrolledStudentExistsAsync</span>(<span class='pl-smi'>libraryCard</span>.<span class='pl-smi'>StudentId</span>);

	<span class='pl-k'>return</span> <span class='pl-k'>await</span> <span class='pl-k'>this</span>.<span class='pl-smi'>libraryCardProcessingService</span>.<span class='pl-en'>CreateLibraryCardAsync</span>(<span class='pl-smi'>libraryCard</span>);
});
</pre>
			</div>
			<p dir='auto'>In the above example, the <code>LibraryCardOrchestrationService</code> calls both the
				<code>StudentProcessingService</code> and <code>LibraryCardProcessingService</code> to perform a complex
				operation. First, verify the student we are creating a library card for does exist and that they are
				enrolled. Then second create the library card.</p>
			<p dir='auto'>The operation of creating a library card for any given student cannot be performed by simply
				calling the library card service. That's because the library card service (processing or foundation)
				does not have access to all the details about the student. Therefore a combination logic here needed to
				be implemented to ensure a proper flow is in place.</p>
			<p dir='auto'>Its important to understand that orchestration services are only required if and only if we
				need to combine multiple entities operations primitive or higher-order. In some architectures,
				orchestration services might not even exist. That's simply because some microservices might be simply
				responsible for applying validation logic and persisting and retrieving data from storage, no more or no
				less.</p>
				<div class="highlight">
			<h2 dir='auto'><a id='user-content-231-on-the-map' class='anchor' aria-hidden='true'
					href='#231-on-the-map'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.3.1 On The Map</h2>
			<p dir='auto'>Orchestration services are one of the core business logic components in any system. They are
				positioned between single entity services (such as processing or foundation) and advanced logic services
				such as coordination services, aggregation services or just simply exposers such as controllers, web
				components or anything else. Here's a high level overview of where orchestration services may live:</p>
			</div>
			<p align='center' style='padding: 5px;' dir='auto'>
				<a target='_blank' rel='noopener noreferrer'
					href='https://user-images.githubusercontent.com/1453985/118414675-e4fc8b80-b65a-11eb-91c8-94f67c6e68ed.png'><img
						src='https://user-images.githubusercontent.com/1453985/118414675-e4fc8b80-b65a-11eb-91c8-94f67c6e68ed.png'
						style='max-width: 100%;'></a>
			</p>
			
			<p dir='auto'>As shown above, orchestration services have quite a few dependencies and consumers. They are
				the core engine of any software. On the right hand side, you can see the dependencies an orchestration
				service may have. Since a processing service is optional based on whether a higher-order business logic
				is needed or not - orchestration services can combine multiple foundation services as well.</p>
			<p dir='auto'>The existence of an orchestration service warrants the existence of a processing service. But
				thats not always the case. There are situations where all orchestration services need to finalize a
				business flow is to interact with primitive-level functionality.</p>
			<p dir='auto'>From a consumer standpoint however, orchestration service could have several consumers. These
				consumers could range from coordination services (orchestrators of orchestrators) or aggregation
				services or simply an exposer. Exposers are like controllers, view service, UI components or simply
				another foundation or processing service in case of putting messages back on a queue - which we will
				discuss further in our Standard.</p>
			<h2 dir='auto'><a id='user-content-232-characteristics' class='anchor' aria-hidden='true'
					href='#232-characteristics'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.3.2 Characteristics</h2>
			<p dir='auto'>In general, orchestration services are concerned with combining single-entity primitive or
				higher-order business logic operations to execute a successful flow. But you can also think of them as
				the glue that ties multiple single-entity operations together.</p>
				<div class="highlight">
			<h3 dir='auto'><a id='user-content-2320-language' class='anchor' aria-hidden='true'
					href='#2320-language'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1' width='16'
						height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.3.2.0 Language</h3>
			<p dir='auto'>Just like processing services, the language used in orchestration services define the level of
				complexity and the capabilities it offers.
				Usually, orchestration services combine two or more primitive or higher-order operations from multiple
				single-entity services to execute a successful operation.</p>									
			</div>
				<div class="highlight">				
			<h4 dir='auto'><a id='user-content-23200-functions-language' class='anchor' aria-hidden='true'
					href='#23200-functions-language'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.3.2.0.0 Functions Language</h4>
			<p dir='auto'>Orchestration services have a very common charateristic when it comes to the language of it's
				functions. Orchestration services are wholistic in most of the language of its function, you will see
				functions such as <code>NotifyAllAdmins</code> where the service pulls all users with admin type and
				then calls a notification service to notify each and every one of them.</p>
			<p dir='auto'>It becomes very obvious that orchestration services offer functionality that inches closer and
				closer to a business language than perimitive technical operation. You may see almost an identical
				expression in a non-technical business requirement that matches one for one a function name in an
				orchestration service. The same pattern continues as one goes to higher and more advanced categories of
				services within that realm of business logic.</p>								
			</div>
			<h4 dir='auto'><a id='user-content-23201-pass-through' class='anchor' aria-hidden='true'
					href='#23201-pass-through'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.3.2.0.1 Pass-Through</h4>
			<p dir='auto'>Orchestration services can also be a pass-through for some operations. For instance, an
				orchestration service could allow an <code>AddStudentAsync</code> to be propagated through the service
				to unify the source of interactions with the system at the exposers level. In which case, orchestration
				services will use the very same terminology a processing or a foundation service may use to propagate
				the operation.</p>
			<h4 dir='auto'><a id='user-content-23202-class-level-language' class='anchor' aria-hidden='true'
					href='#23202-class-level-language'><svg class='octicon octicon-link' viewBox='0 0 16 16'
						version='1.1' width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.3.2.0.2 Class-Level Language</h4>
			<p dir='auto'>Orchestration services mainly combine multiple operations to support a particular entity. So,
				if the main entity of support is <code>Student</code> and the rest of the entities are just to support
				an operation mainly targetting a <code>Student</code> entity - then the name of the orchestration
				service would be <code>StudentOrchestrationService</code>.</p>
			<p dir='auto'>This level of enforcement of naming conventions ensures that any orchestration service is
				staying focused on a single entity responsibility with respect to multiple other supporting entities.
			</p>
			<p dir='auto'>For instance, if creating a library card requires ensuring the student referenced in that
				library card must be enrolled in a school. Then an orchestration service will then be named after it's
				main entity which is <code>LibraryCard</code> in this case. Our orchestration service name then would be
				<code>LibraryCardOrchestrationService</code>.</p>
			<p dir='auto'>The opposite is also true. If enrolling a student in a school has an accompanying operations
				such as creating a library card, then in this case a <code>StudentOrchestrationService</code> must be
				created with the main purpose to create a <code>Student</code> and then all other related entities once
				the aforementioned succeeds.</p>
			<p dir='auto'>The same idea applies to all exceptions created in an orchestration service such as
				<code>StudentOrchestrationValidationException</code> and
				<code>StudentOrchestrationDependencyException</code> and so on.</p>
			<h3 dir='auto'><a id='user-content-2321-dependencies' class='anchor' aria-hidden='true'
					href='#2321-dependencies'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.3.2.1 Dependencies</h3>
			<p dir='auto'>As we mentioned above, orchestration services might have a bit larger range of types of
				dependencies unlike processing and foundation services. This is only due the optionality of processing
				services. Therefore, orchestration services may have dependencies that range from foundation services or
				processing services and optionally and usually logging or any other utility brokers.</p>
			<h4 dir='auto'><a id='user-content-23210-dependency-balance-florance-pattern' class='anchor'
					aria-hidden='true' href='#23210-dependency-balance-florance-pattern'><svg
						class='octicon octicon-link' viewBox='0 0 16 16' version='1.1' width='16' height='16'
						aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.3.2.1.0 Dependency Balance (Florance Pattern)</h4>
			<p dir='auto'>There's a very important rule that govern the consistency and balance of orchestration
				services which is the 'Florance Pattern'. the rule dictates that any orchestration service may not
				combine dependencies from different categories of operation.</p>
			<p dir='auto'>What that means, is that an orchestration service cannot have a foundation and a processing
				services combined together. The dependencies has to be either all processings or all foundations. That
				rule doesn't apply to utility brokers dependencies however.</p>
			<p dir='auto'>Here's an example of an unbalanced orchestration service dependencies:</p>
			
			<p align='center' style='padding: 5px;' dir='auto'>
				<a target='_blank' rel='noopener noreferrer'
					href='https://user-images.githubusercontent.com/1453985/118415856-9e5e5f80-b661-11eb-96db-a541f89ccee7.png'><img
						src='https://user-images.githubusercontent.com/1453985/118415856-9e5e5f80-b661-11eb-96db-a541f89ccee7.png'
						style='max-width: 100%;'></a>
			</p>
			
			<p dir='auto'>An additional processing service is required to give a pass-through to a lower-level
				foundation service to balance the architecture - applying 'Florance Pattern' for symmetry would turn our
				architecture to the following:</p>
			
			<p align='center' style='padding: 5px;' dir='auto'>
				<a target='_blank' rel='noopener noreferrer'
					href='https://user-images.githubusercontent.com/1453985/118415965-33f9ef00-b662-11eb-8538-59e5c728d308.png'><img
						src='https://user-images.githubusercontent.com/1453985/118415965-33f9ef00-b662-11eb-8538-59e5c728d308.png'
						style='max-width: 100%;'></a>
			</p>
			
			<p dir='auto'>Applying 'Florance Pattern' might be very costly at the beginning as it includes creating an
				entirely new processing service (or multiple) just to balance the architecture. But its benefits
				outweighs the effort spent from a maintainability, readability and pluggability perspectives.</p>
			<h4 dir='auto'><a id='user-content-23211-two-three' class='anchor' aria-hidden='true'
					href='#23211-two-three'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.3.2.1.1 Two-Three</h4>
			<p dir='auto'>The 'Two-Three' rule is a complexity control rule. This rule dictates that an orchestration
				service may not have more than three or less than two processing or foundation services to run the
				orchestration. This rule, however, doesn't apply to utility brokers. And orchestration service may have
				a <code>DateTimeBroker</code> or a <code>LoggingBroker</code> without any issues. But an orchestration
				service may not have an entity broker, such as a <code>StorageBroker</code> or a
				<code>QueueBroker</code> which feeds directly into the core business layer of any service.</p>
			<p dir='auto'>The 'Two-Three' rule may require a layer of normalization to the categorical business function
				that is required to be accomplished. Let's talk about the different mechanisms of normalizing
				orchestration services.</p>
				<div class="highlight">
			<h5 dir='auto'><a id='user-content-232110-full-normalization' class='anchor' aria-hidden='true'
					href='#232110-full-normalization'><svg class='octicon octicon-link' viewBox='0 0 16 16'
						version='1.1' width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.3.2.1.1.0 Full-Normalization</h5>
			<p dir='auto'>Often times, there are situations where the current architecture of any given orchestration
				service ends up with one orchestration service that has three dependencies. And a new entity processing
				or foundation service is required to complete an existing process.</p>
			<p dir='auto'>For instance, let's say we have a <code>StudentContactOrchestrationService</code> and that
				service has dependencies that provide primitive-level functionality for <code>Address</code>,
				<code>Email</code> and <code>Phone</code> for each student. Here's a visualization of that state:</p>							
			</div>
			<p align='center' style='padding: 5px;' dir='auto'>
				<a target='_blank' rel='noopener noreferrer'
					href='https://user-images.githubusercontent.com/1453985/120101834-f636a500-c0fc-11eb-968b-10ed9a60bac8.png'><img
						src='https://user-images.githubusercontent.com/1453985/120101834-f636a500-c0fc-11eb-968b-10ed9a60bac8.png'
						style='max-width: 100%;'></a>
			</p>
			
			<p dir='auto'>Now, a new requirement comes in to add a student <code>SocialMedia</code> to gather more
				contact information about how to reach a certain student. We can go into full-normalization mode simply
				by finding the common ground that equally splits the contact information entities. For instance, we can
				split regular contact information versus digital contact information as in <code>Address</code> and
				<code>Phone</code> versus <code>Email</code> and <code>SocialMedia</code>. this way we split four
				dependencies into two each for their own orchestration services as follows:</p>
			
			<p align='center' style='padding: 5px;' dir='auto'>
				<a target='_blank' rel='noopener noreferrer'
					href='https://user-images.githubusercontent.com/1453985/120101983-c6d46800-c0fd-11eb-836a-496d191ef922.png'><img
						src='https://user-images.githubusercontent.com/1453985/120101983-c6d46800-c0fd-11eb-836a-496d191ef922.png'
						style='max-width: 100%;'></a>
			</p>
			
			<p dir='auto'>As you can see in the figure above, we modified the existing
				<code>StudentContactOrchestrationService</code> into
				<code>StudentRegularContactOrchestrationService</code>, then we removed one of its dependencies on the
				<code>EmailService</code>.</p>
			<p dir='auto'>Additionally, we created a new <code>StudentDigitalContactOrchestrationService</code> to have
				two dependencies on the existing <code>EmailService</code> in addition to the new
				<code>SocialMediaService</code>. But now that the normalization is over, we need an advanced order
				business logic layer, like a coordination service to provide student contact information to upstream
				consumers.</p>
			<h5 dir='auto'><a id='user-content-232111-semi-normalization' class='anchor' aria-hidden='true'
					href='#232111-semi-normalization'><svg class='octicon octicon-link' viewBox='0 0 16 16'
						version='1.1' width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.3.2.1.1.1 Semi-Normalization</h5>
			<p dir='auto'>Normalization isn't always as straightforward as the example above. Especially in situations
				where a core entity has to exist before creating or writing in additional information towards related
				entities to that very entity.</p>
			<p dir='auto'>For instance, let's say we have a <code>StudentRegistrationOrchestrationService</code> which
				relies on <code>StudentProcessingService</code>, <code>LibraryCardProcessingService</code> and
				<code>BookProcessingService</code> as follows:</p>
			
			<p align='center' style='padding: 5px;' dir='auto'>
				<a target='_blank' rel='noopener noreferrer'
					href='https://user-images.githubusercontent.com/1453985/120099527-c41f4600-c0f0-11eb-8702-1439f966d9dc.png'><img
						src='https://user-images.githubusercontent.com/1453985/120099527-c41f4600-c0f0-11eb-8702-1439f966d9dc.png'
						style='max-width: 100%;'></a>
			</p>
			
			<p dir='auto'>But now, we need a new service to handle students immunization records as
				<code>ImmunizationProcessingService</code>. We need all four services but we already have a
				<code>StudentRegistrationOrchestrationService</code> that has three dependencies. At this point a
				semi-normalization is required for the re-balancing of the architecture to honor the 'Two-Three' rule
				and eventually to control the complexity.</p>
			
			<p align='center' style='padding: 5px;' dir='auto'>
				<a target='_blank' rel='noopener noreferrer'
					href='https://user-images.githubusercontent.com/1453985/120100296-ea46e500-c0f4-11eb-888a-ed6668e9ffdb.png'><img
						src='https://user-images.githubusercontent.com/1453985/120100296-ea46e500-c0f4-11eb-888a-ed6668e9ffdb.png'
						style='max-width: 100%;'></a>
			</p>
			
			<p dir='auto'>In this case here, a further normalization or a split is required to re-balance the
				architecture. We need to think conceptually about a common ground between the primitive entities in a
				student registration process. A student requirements contain identity, health and materials. We can, in
				this scenario combine <code>LibraryCard</code> and <code>Book</code> under the same orchestration
				service as books and libraries are somewhat related. So we have
				<code>StudentLibraryOrchestrationService</code> and for the other service we would have
				<code>StudentHealthOrchestrationService</code> as follows:</p>
			
			<p align='center' style='padding: 5px;' dir='auto'>
				<a target='_blank' rel='noopener noreferrer'
					href='https://user-images.githubusercontent.com/1453985/120100597-68f05200-c0f6-11eb-9ccc-ae1c963f6de5.png'><img
						src='https://user-images.githubusercontent.com/1453985/120100597-68f05200-c0f6-11eb-9ccc-ae1c963f6de5.png'
						style='max-width: 100%;'></a>
			</p>
			
			<p dir='auto'>To complete the registration flow with a new model, a coordination service is required to
				pass-in an advanced business logic to combine all of these entities together. But more importantly, you
				will notice that each orchestration service now has a redundant dependency of
				<code>StudentProcessingService</code> to ensure no virtual dependency on any other orchestration service
				create or ensuring a student record exists.</p>
			<p dir='auto'>Virtual dependencies are very tricky. it's a hidden connection between two services of any
				category where one service implicitly assumes that a particular entity will be created and present.
				Virtual dependencies are very dangerous and threaten the true autonomy of any service. Detecting virtual
				dependencies at early stage in the design and development process could be a daunting but necessary task
				to ensure a clean Standardized architecture is in place.</p>
			<p dir='auto'>Just like model changes as it may require migrations, and additional logic and validations, a
				new requirement for an entirely new additional entity might require a restructuring of an existing
				architecture or extending it to a new version, depending in which stage the system is receiving these
				new requirements.</p>
			<p dir='auto'>It may be very enticing to just add an additional dependency to an existing orchestration
				service - but that's where the system starts to diverge from 'The Standard'. And that's when the system
				starts off the road of being an unmaintainable legacy system. But more importantly, it's when the
				engineers involved in designing and developing the system are challenged against their very principles
				and craftmanship.</p>
			<h5 dir='auto'><a id='user-content-232112-no-normalization' class='anchor' aria-hidden='true'
					href='#232112-no-normalization'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.3.2.1.1.2 No-Normalization</h5>
			<p dir='auto'>There are scenarios where any level of normalization is a challenge to achieve. While I
				believe that everything, everywhere, somehow is connected. Sometimes it might be incomprehensible for
				the mind to group multiple services together under one orchestration service.</p>
			<p dir='auto'>Because it's quite hard for my mind to come up with an example for multiple entities that have
				no connection to each other, as I truly believe it couldn't exist. I'm going to rely on some fictional
				entities to visualize a problem. So let's assume there are <code>AService</code> and
				<code>BService</code> orchestrated together with an <code>XService</code>. The existence of
				<code>XService</code> is important to ensure that both <code>A</code> and <code>B</code> can be created
				with an assurance that a core entity <code>X</code> does exist.</p>
			<p dir='auto'>Now, let's say a new service <code>CService</code> is required to be added to the mix to
				complete the existing flow. So, now we have four different dependencies under one orchestration service,
				and a split is mandatory. Since there's no relationship whatsoever between <code>A</code>,
				<code>B</code> and <code>C</code>, a 'No-Normalization' approach becomes the only option to realize a
				new design as follows:</p>
			
			<p align='center' style='padding: 5px;' dir='auto'>
				<a target='_blank' rel='noopener noreferrer'
					href='https://user-images.githubusercontent.com/1453985/120102975-4d8b4400-c102-11eb-9582-6f95d17227e7.png'><img
						src='https://user-images.githubusercontent.com/1453985/120102975-4d8b4400-c102-11eb-9582-6f95d17227e7.png'
						style='max-width: 100%;'></a>
			</p>
			
			<p dir='auto'>Each one of the above primitive services will be orchestrated with a core service
				<code>X</code> then gathered again under a coordination service. This case above is the worst case
				scenario, where a normalization of any size is impossible. Note, that the author of this Standard
				couldn't come up with a realistic example unlike any others to show you how rare it is to run into that
				situation, so let's a 'No-Normalization' approach be your very last solution if you truly run out of
				options.</p>
			<h5 dir='auto'><a id='user-content-232113-meaningful-breakdown' class='anchor' aria-hidden='true'
					href='#232113-meaningful-breakdown'><svg class='octicon octicon-link' viewBox='0 0 16 16'
						version='1.1' width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.3.2.1.1.3 Meaningful Breakdown</h5>
			<p dir='auto'>Regardless of the type of normalization that you will need to follow. You have to make sure
				that your grouped services represent a common meaning. For instance, putting together a
				<code>StudentProcessingService</code> and <code>LibraryProcessingService</code> must require a
				commonality in function between the two. A good example of that would be
				<code>StudentRegistrationOrchestrationService</code> for instance. The registration process requires
				adding a new student record and creating a library card for that very same student.</p>
			<p dir='auto'>Implementing orchestration services without intersection between two or three entities per
				operation defeats the whole purpose of having an orchestration service. This condition is satisfied if
				at least one intersection between two entities has occurred. An orchestration service may then have
				other operations that we call 'Pass-Through' where we propagate certain routines from their processing
				or foundation origins if they match the same contract.</p>
			<p dir='auto'>Here's an example:</p>
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
	<pre><span class='pl-k'>public</span> <span class='pl-k'>class</span> <span class='pl-en'>StudentOrchestrationService</span>
{
	<span class='pl-k'>public</span> <span class='pl-k'>async</span> <span class='pl-en'>ValueTask</span>&lt;<span class='pl-en'>Student</span>&gt; <span class='pl-en'>RegisterStudentAsync</span>(<span class='pl-en'>Student</span> <span class='pl-en'>student</span>)
	{
		<span class='pl-en'>Student</span> <span class='pl-en'>addedStudent</span> <span class='pl-k'>=</span>
			<span class='pl-k'>await</span> <span class='pl-k'>this</span>.<span class='pl-smi'>studentProcessingService</span>.<span class='pl-en'>AddStudentAsync</span>(<span class='pl-smi'>student</span>);
	
		<span class='pl-en'>LibraryCard</span> <span class='pl-en'>libraryCard</span> <span class='pl-k'>=</span> 
			<span class='pl-k'>await</span> <span class='pl-k'>this</span>.<span class='pl-smi'>libraryCardPorcessingService</span>.<span class='pl-en'>AddLibraryCardAsync</span>(
				<span class='pl-smi'>addedStudent</span>.<span class='pl-smi'>Id</span>);

		<span class='pl-k'>return</span> <span class='pl-smi'>addedStudent</span>;
	}
			
			
	<span class='pl-k'>public</span> <span class='pl-k'>async</span> <span class='pl-en'>ValueTask</span>&lt;<span class='pl-en'>Student</span>&gt; <span class='pl-en'>ModifyStudentAsync</span>(<span class='pl-en'>Student</span> <span class='pl-en'>student</span>) <span class='pl-k'>=&gt;</span>
		<span class='pl-k'>await</span> <span class='pl-k'>this</span>.<span class='pl-smi'>studentProcessingService</span>.<span class='pl-en'>ModifyStudentAsync</span>(<span class='pl-smi'>student</span>);
}</pre>
			</div>
			<p dir='auto'>In the example above, our <code>StudentOrchestrationService</code> had an orchestration
				routine where it combined adding a student and creating a library card for that very same student. But
				additionally it also offers a 'Pass-Through' function for a low-level processing service routine to
				modify a student.</p>
			<p dir='auto'>'Pass-Through' routines must have the exact same contract as the rest of all other routines in
				any orchestration service. That's our 'Pure Contract' principle which dictates that any service should
				allow the very same contract as input and output or primitive types.</p>
			<h3 dir='auto'><a id='user-content-2322-contracts' class='anchor' aria-hidden='true'
					href='#2322-contracts'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.3.2.2 Contracts</h3>
			<p dir='auto'>Orchestration services may combine two or three different entities and their operations to
				achieve an advanced business logic. There are two situations when it comes to contract/models for
				orchestration services. One that stays true to the main entity of purpose. And one that is complex - a
				combinator orchestration service that tries to explicitly expose it's inner target entities.</p>
			<p dir='auto'>Let's talk about these two scenarios in detail.</p>
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
				<h4 dir='auto'><a id='user-content-23220-physical-contracts' class='anchor' aria-hidden='true'
					href='#23220-physical-contracts'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.3.2.2.0 Physical Contracts</h4>
			<p dir='auto'>Some orchestration services are still single-purposed even though they may be combining two or
				three other higher order routines from multiple entities. For instance, an orchestration service that
				reacts to messages from some queue then persists these messages are single-purposed and single-entity
				orchestration services.</p>
			<p dir='auto'>Let's take a look at this code snippet:</p>
	<pre><span class='pl-k'>public</span> <span class='pl-k'>class</span> <span class='pl-en'>StudentOrchestrationService</span>
{
	<span class='pl-k'>private</span> <span class='pl-k'>readonly</span> <span class='pl-en'>IStudentEventProcessingService</span> <span class='pl-en'>studentEventProcessingService</span>;
	<span class='pl-k'>private</span> <span class='pl-k'>readonly</span> <span class='pl-en'>IStudentProcessingService</span> <span class='pl-en'>studentProcessingService</span>;

	<span class='pl-k'>public</span> <span class='pl-en'>StudentOrchestrationService</span>(
		<span class='pl-en'>IStudentEventProcessingService</span> <span class='pl-en'>studentEventProcessingService</span>,
		<span class='pl-en'>IStudentProcessingService</span> <span class='pl-en'>studentProcessingService</span>)
	{
		<span class='pl-k'>this</span>.<span class='pl-smi'>studentEventProcessingService</span> <span class='pl-k'>=</span> <span class='pl-smi'>studentEventProcessingService</span>;
		<span class='pl-k'>this</span>.<span class='pl-smi'>studentProcessingService</span> <span class='pl-k'>=</span> <span class='pl-smi'>studentProcessingService</span>;
		<span class='pl-en'>ListenToEvents</span>();
	}

	<span class='pl-k'>public</span> <span class='pl-k'>void</span> <span class='pl-en'>ListenToEvents</span>() <span class='pl-k'>=&gt;</span>
		<span class='pl-k'>this</span>.<span class='pl-smi'>studentEventService</span>.<span class='pl-en'>ListenToEvent</span>(<span class='pl-smi'>UpsertStudentAsync</span>);

	<span class='pl-k'>public</span> <span class='pl-k'>async</span> <span class='pl-en'>ValueTask</span>&lt;<span class='pl-en'>Student</span>&gt; <span class='pl-en'>UpsertStudentAsync</span>(<span class='pl-en'>Student</span> <span class='pl-en'>student</span>)
	{
		...
		<span class='pl-k'>await</span> <span class='pl-k'>this</span>.<span class='pl-smi'>studentProcessingService</span>.<span class='pl-en'>UpsertStudentAsync</span>(<span class='pl-smi'>student</span>);

		...
	}
}</pre>
			</div>
			<p dir='auto'>In the above example, the orchestration service still exposes a functionality that honors the
				physical model <code>Student</code> and internally communicates with several services that may provide
				completely different models. These are the scenarios where there's a main purpose single entity and all
				other services are supporting services to ensure a successful flow for that very entity succeeds.</p>
			<p dir='auto'>In our example here, the orchestration services <em>listens</em> to a queue where new student
				messages will be placed, then use that event to persist any incoming new students in the system. So the
				physical contract <code>Student</code> is the same language the orchestration service explicitly use as
				a model to communicate with upper stream services/exposers or others.</p>
			<p dir='auto'>But there are other scenarios where a single entity is not the only purpose/target for an
				orchestration service. Let's talk about that in detail.</p>
		
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
				<h4 dir='auto'><a id='user-content-23221-virtual-contracts' class='anchor' aria-hidden='true'
					href='#23221-virtual-contracts'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.3.2.2.1 Virtual Contracts</h4>
			<p dir='auto'>In some scenarios, an orchestration service may be required to create it's own non-physical
				contracts to complete a certain operation. For instance, consider an orchestration service that is
				required to persist a social media post with a picture attached to it. The requirement here is to
				persist the picture in one database table, and the actual post (comments, authors and others) into a
				different database table in a relational model.</p>
			<p dir='auto'>Now, the incoming model might be significantly different from what the actual physical models
				would look like. Let's take a look at how would that look like in the real-world.</p>
				<p dir='auto'>Consider having this model:</p>
	<pre><span class='pl-k'>public</span> <span class='pl-k'>class</span> <span class='pl-en'>MediaPost</span>
{
	<span class='pl-k'>public</span> <span class='pl-en'>Guid</span> <span class='pl-en'>Id</span> {<span class='pl-k'>get</span>; <span class='pl-k'>set</span>;}
	<span class='pl-k'>public</span> <span class='pl-k'>string</span> <span class='pl-en'>Content</span> {<span class='pl-k'>get</span>; <span class='pl-k'>set</span>;}
	<span class='pl-k'>public</span> <span class='pl-en'>DateTimeOffset</span> <span class='pl-en'>Date</span> {<span class='pl-k'>get</span>; <span class='pl-k'>set</span>;}
	<span class='pl-k'>public</span> <span class='pl-en'>IEnumerable</span>&lt;<span class='pl-k'>string</span>&gt; <span class='pl-en'>Base64Images</span> {<span class='pl-k'>get</span>; <span class='pl-k'>set</span>;}
}</pre>
			</div>
			<p dir='auto'>The above contract <code>MediaPost</code> contains two different physical entities combined.
				The first is the actual post, including the <code>Id</code>, <code>Content</code> and <code>Date</code>
				and the second is the list of images attached to that very post.</p>
			<p dir='auto'>here's how an orchestration service would react to this incoming virtual model:</p>
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
	<pre><span class='pl-k'>public</span> <span class='pl-k'>async</span> <span class='pl-en'>ValueTask</span>&lt;<span class='pl-en'>MediaPost</span>&gt; <span class='pl-en'>SubmitMediaPostAsync</span>(<span class='pl-en'>MediaPost</span> <span class='pl-en'>mediaPost</span>)
{
	...

	<span class='pl-en'>Post</span> <span class='pl-en'>post</span> <span class='pl-k'>=</span> <span class='pl-en'>MapToPost</span>(<span class='pl-smi'>mediaPost</span>);
	<span class='pl-en'>List</span>&lt;<span class='pl-en'>Media</span>&gt; <span class='pl-en'>medias</span> <span class='pl-k'>=</span> <span class='pl-en'>MapToMedias</span>(<span class='pl-smi'>mediaPost</span>);

	<span class='pl-en'>Post</span> <span class='pl-en'>addedPost</span> <span class='pl-k'>=</span>
		<span class='pl-k'>await</span> <span class='pl-k'>this</span>.<span class='pl-smi'>postProcessingService</span>.<span class='pl-en'>AddPostAsync</span>(<span class='pl-smi'>post</span>);
	
	<span class='pl-en'>List</span>&lt;<span class='pl-en'>Medias</span>&gt; <span class='pl-en'>addedMedias</span> <span class='pl-k'>=</span> 
		<span class='pl-k'>await</span> <span class='pl-k'>this</span>.<span class='pl-smi'>mediaProcessingService</span>.<span class='pl-en'>AddMediasAsync</span>(<span class='pl-smi'>medias</span>);

	<span class='pl-k'>return</span> <span class='pl-en'>MapToMediaPost</span>(<span class='pl-smi'>addedPost</span>, <span class='pl-smi'>addedMedias</span>); 
}

<span class='pl-k'>public</span> <span class='pl-en'>Post</span> <span class='pl-en'>MapToPost</span>(<span class='pl-en'>MediaPost</span> <span class='pl-en'>mediaPost</span>)
{
	<span class='pl-k'>return</span> <span class='pl-k'>new</span> <span class='pl-en'>Post</span>
	{
		<span class='pl-smi'>Id</span> <span class='pl-k'>=</span> <span class='pl-smi'>mediaPost</span>.<span class='pl-smi'>Id</span>,
		<span class='pl-smi'>Content</span> <span class='pl-k'>=</span> <span class='pl-smi'>mediaPost</span>.<span class='pl-smi'>Content</span>,
		<span class='pl-smi'>CreatedDate</span> <span class='pl-k'>=</span> <span class='pl-smi'>mediaPost</span>.<span class='pl-smi'>Date</span>,
		<span class='pl-smi'>UpdatedDate</span> <span class='pl-k'>=</span> <span class='pl-smi'>mediaPost</span>.<span class='pl-smi'>Date</span>
	};
}

<span class='pl-k'>public</span> <span class='pl-en'>List</span>&lt;<span class='pl-en'>Media</span>&gt; <span class='pl-en'>MapToMedias</span>(<span class='pl-en'>MediaPost</span> <span class='pl-en'>mediaPost</span>)
{
	<span class='pl-k'>return</span> <span class='pl-smi'>mediaPost</span>.<span class='pl-smi'>Base64Images</span>.<span class='pl-en'>Select</span>(<span class='pl-en'>image</span> <span class='pl-k'>=&gt;</span>
		<span class='pl-k'>new</span> <span class='pl-en'>Media</span>
		{
			<span class='pl-smi'>Id</span> <span class='pl-k'>=</span> <span class='pl-smi'>Guid</span>.<span class='pl-en'>NewGuid</span>(),
			<span class='pl-smi'>PostId</span> <span class='pl-k'>=</span> <span class='pl-smi'>mediaPost</span>.<span class='pl-smi'>Id</span>,
			<span class='pl-smi'>Image</span> <span class='pl-k'>=</span> <span class='pl-smi'>image</span>,
			<span class='pl-smi'>CreatedDate</span> <span class='pl-k'>=</span> <span class='pl-smi'>mediaPost</span>.<span class='pl-smi'>Date</span>,
			<span class='pl-smi'>UpdatedDate</span> <span class='pl-k'>=</span> <span class='pl-smi'>mediaPost</span>.<span class='pl-smi'>Date</span>
		});
}</pre>
			</div>
			<p dir='auto'>The above code snippet shows the orchestration service deconstructing a given virtual
				model/contract <code>MediaPost</code> into two physical models, each one of them has it's own separate
				processing service that handles it's persistence. There are scenarios also where the virtual model gets
				deconstructed into one single model with additional details that are used for validation and
				verification with downstream processing or foundation services.</p>
			<p dir='auto'>There are also hybrid situations where the incoming virtual model may have nested physical
				models in it. Which is something we can only allow with virtual models. Physical models shall stay
				anemic (contains no routines or constructors) and flat (contains no nested models) at all times to
				control complexity and focus responsibility.</p>
			<p dir='auto'>In summary, Orchestration services may create their own contracts. These contracts may be
				physical or virtual. And a virtual contract may be a combination of one or many physical (or nested
				virtual) contracts or simply has it's own flat design in terms of properties.</p>
			<div class="highlight">
				<h3 dir='auto'><a id='user-content-2322-cul-de-sac' class='anchor' aria-hidden='true'
					href='#2322-cul-de-sac'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.3.2.2 Cul-De-Sac</h3>
			<p dir='auto'>There are times where Orchestration services and it's equivalent (coordination, management ...
				etc.) may not need an exposer component (controller for instance). That's because these services may be
				listeners to certain events and communicating the event back into a processing or a foundation service
				at the same level where the event started or was received.</p>
			<p dir='auto'>For instance, imagine building a simple application where it gets notified with messages from
				a queue then maps these messages into some local model to persist it in storage. In this case here, the
				incoming or input for these services isn't necessarily through an exposer component anymore. The
				incoming messages can be received from a subscription to an event service or a queue. In this case the
				orchestration service would look something like the following:</p>					
			</div>
			<p align='center' style='padding: 5px;' dir='auto'>
				<a target='_blank' rel='noopener noreferrer'
					href='https://user-images.githubusercontent.com/1453985/144501231-11ea13c9-81fa-4730-8840-a891a1d9edde.png'><img
						src='https://user-images.githubusercontent.com/1453985/144501231-11ea13c9-81fa-4730-8840-a891a1d9edde.png'
						style='max-width: 100%;'></a>
			</p>
			
			<p dir='auto'>The <code>StudentEventOrchestrationService</code> in this case, listens to the messages for
				new students coming in and immediately converts that into models that can be persisted in the database.
			</p>
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
				<p dir='auto'>Here's an example:</p>
				<p dir='auto'>Let's start with a unit test for this pattern as follows:</p>
	<pre>[<span class='pl-en'>Fact</span>]
<span class='pl-k'>public</span> <span class='pl-k'>void</span> <span class='pl-en'>ShouldListenToProfileEvents</span>()
{
	<span class='pl-c'><span class='pl-c'>//</span> given . when</span>
	<span class='pl-k'>this</span>.<span class='pl-smi'>profileEventOrchestrationService</span>.<span class='pl-en'>ListenToProfileEvents</span>();

	<span class='pl-c'><span class='pl-c'>//</span> then</span>
	<span class='pl-k'>this</span>.<span class='pl-smi'>profileEventServiceMock</span>.<span class='pl-en'>Verify</span>(<span class='pl-en'>service</span> <span class='pl-k'>=&gt;</span>
		<span class='pl-smi'>service</span>.<span class='pl-en'>ListenToProfileEvent</span>(
			<span class='pl-k'>this</span>.<span class='pl-smi'>profileEventOrchestrationService</span>.<span class='pl-smi'>ProcessProfileEventAsync</span>),
				<span class='pl-smi'>Times</span>.<span class='pl-smi'>Once</span>);

	<span class='pl-k'>this</span>.<span class='pl-smi'>profileEventService</span>.<span class='pl-en'>VerifyNoOtherCalls</span>();
	<span class='pl-k'>this</span>.<span class='pl-smi'>profileServiceMock</span>.<span class='pl-en'>VerifyNoOtherCalls</span>();
	<span class='pl-k'>this</span>.<span class='pl-smi'>loggingBrokerMock</span>.<span class='pl-en'>VerifyNoOtherCalls</span>();
}

[<span class='pl-en'>Fact</span>]
<span class='pl-k'>public</span> <span class='pl-k'>async</span> <span class='pl-en'>Task</span> <span class='pl-en'>ShouldAddProfileAsync</span>()
{
	<span class='pl-c'><span class='pl-c'>//</span> given</span>
	<span class='pl-en'>ProfileEvent</span> <span class='pl-en'>randomProfileEvent</span> <span class='pl-k'>=</span>
		<span class='pl-en'>CreateRandomProfileEvent</span>();

	<span class='pl-en'>ProfileEvent</span> <span class='pl-en'>inputProfileEvent</span> <span class='pl-k'>=</span>
		<span class='pl-smi'>randomProfileEvent</span>;

	<span class='pl-k'>this</span>.<span class='pl-smi'>profileServiceMock</span>.<span class='pl-en'>Setup</span>(<span class='pl-en'>service</span> <span class='pl-k'>=&gt;</span>
		<span class='pl-smi'>service</span>.<span class='pl-en'>AddProfileAsync</span>(<span class='pl-smi'>inputProfileEvent</span>.<span class='pl-smi'>Profile</span>));

	<span class='pl-c'><span class='pl-c'>//</span> when</span>
	<span class='pl-k'>await</span> <span class='pl-k'>this</span>.<span class='pl-smi'>profileEventOrchestrationService</span>
		.<span class='pl-en'>ProcessProfileEventAsync</span>(<span class='pl-smi'>inputProfileEvent</span>);

	<span class='pl-c'><span class='pl-c'>//</span> then</span>
	<span class='pl-k'>this</span>.<span class='pl-smi'>profileServiceMock</span>.<span class='pl-en'>Verify</span>(<span class='pl-en'>service</span> <span class='pl-k'>=&gt;</span>
		<span class='pl-smi'>service</span>.<span class='pl-en'>AddProfileAsync</span>(<span class='pl-smi'>inputProfileEvent</span>.<span class='pl-smi'>Profile</span>),
			<span class='pl-smi'>Times</span>.<span class='pl-smi'>Once</span>);

	<span class='pl-k'>this</span>.<span class='pl-smi'>profileServiceMock</span>.<span class='pl-en'>VerifyNoOtherCalls</span>();
	<span class='pl-k'>this</span>.<span class='pl-smi'>loggingBrokerMock</span>.<span class='pl-en'>VerifyNoOtherCalls</span>();
	<span class='pl-k'>this</span>.<span class='pl-smi'>profileEventServiceMock</span>.<span class='pl-en'>VerifyNoOtherCalls</span>();
}</pre>	
			</div>
			<p dir='auto'>The test here indicates an event listening has to occur first, then a persistence in the
				student service must match the outcome of mapping an incoming message to a given student.</p>
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
				<p dir='auto'>Let's try to make this test pass.</p>
	<pre><span class='pl-k'>public</span> <span class='pl-k'>partial</span> <span class='pl-k'>class</span> <span class='pl-en'>ProfileEventOrchestrationService</span> : <span class='pl-en'>IProfileEventOrchestrationService</span>
{
	<span class='pl-k'>private</span> <span class='pl-k'>readonly</span> <span class='pl-en'>IProfileEventService</span> <span class='pl-en'>profileEventService</span>;
	<span class='pl-k'>private</span> <span class='pl-k'>readonly</span> <span class='pl-en'>IProfileService</span> <span class='pl-en'>profileService</span>;
	<span class='pl-k'>private</span> <span class='pl-k'>readonly</span> <span class='pl-en'>ILoggingBroker</span> <span class='pl-en'>loggingBroker</span>;

	<span class='pl-k'>public</span> <span class='pl-en'>ProfileEventOrchestrationService</span>(
		<span class='pl-en'>IProfileEventProcessingService</span> <span class='pl-en'>profileEventService</span>,
		<span class='pl-en'>IProfileProcessingService</span> <span class='pl-en'>profileService</span>,
		<span class='pl-en'>ILoggingBroker</span> <span class='pl-en'>loggingBroker</span>)
	{
		<span class='pl-k'>this</span>.<span class='pl-smi'>profileEventService</span> <span class='pl-k'>=</span> <span class='pl-smi'>profileEventService</span>;
		<span class='pl-k'>this</span>.<span class='pl-smi'>profileService</span> <span class='pl-k'>=</span> <span class='pl-smi'>profileService</span>;
		<span class='pl-k'>this</span>.<span class='pl-smi'>loggingBroker</span> <span class='pl-k'>=</span> <span class='pl-smi'>loggingBroker</span>;
	}

	<span class='pl-k'>public</span> <span class='pl-k'>void</span> <span class='pl-en'>ListenToProfileEvents</span>() <span class='pl-k'>=&gt;</span>
	<span class='pl-en'>TryCatch</span>(() <span class='pl-k'>=&gt;</span>
	{
		<span class='pl-k'>this</span>.<span class='pl-smi'>profileEventService</span>.<span class='pl-en'>ListenToProfileEvent</span>(
			<span class='pl-smi'>ProcessProfileEventAsync</span>);
	});

	<span class='pl-k'>public</span> <span class='pl-en'>ValueTask</span> <span class='pl-en'>ProcessProfileEventAsync</span>(<span class='pl-en'>ProfileEvent</span> <span class='pl-en'>profileEvent</span>) <span class='pl-k'>=&gt;</span>
	<span class='pl-en'>TryCatch</span>(<span class='pl-k'>async</span> () <span class='pl-k'>=&gt;</span>
	{
		...

		<span class='pl-k'>await</span> <span class='pl-k'>this</span>.<span class='pl-smi'>profileService</span>.<span class='pl-en'>AddProfileAsync</span>(<span class='pl-smi'>profileEvent</span>.<span class='pl-smi'>Profile</span>);
	});
}</pre>
			</div>
			<p dir='auto'>In the above example, the constructor of the Orchestration service subscribes to the events
				that would come from the <code>StudentEventService</code>, when an event occurs, the orchestration
				service will call the <code>ProcessingIncomingStudentMessageAsync</code> function to persist the
				incoming student into the database through a foundation or a processing service at the same level as the
				event service.</p>
			<p dir='auto'>This pattern or characteristic is called the Cul-De-Sac. Where an incoming message will be a
				turn and head in a different direction for a different dependency. This pattern is very common is large
				enterprise-level applications where eventual-consistency is incorporated to ensure the system can scale
				and become resilient under heavy consumption. This pattern also prevents malicious attacks against your
				API endpoints since it allows processing queue messages or events whenever the service is ready to
				process them. We will discuss the details in the 'The Standard Architecture'.</p>
			<h2 dir='auto'><a id='user-content-233-responsibilities' class='anchor' aria-hidden='true'
					href='#233-responsibilities'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.3.3 Responsibilities</h2>
			<p dir='auto'>Orchestration services provide an advanced business logic. It orchestrates multiple flows for
				multiple entities/models to complete a single flow. Let's discuss in detail what these responsibilities
				are:</p>
				<div class="highlight">
			<h3 dir='auto'><a id='user-content-2330-advanced-logic' class='anchor' aria-hidden='true'
					href='#2330-advanced-logic'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.3.3.0 Advanced Logic</h3>
			<p dir='auto'>Orchestration services cannot exist without combining multiple routines from multiple
				entities. These entities may be different in nature, but they share a common flow or purpose. For
				instance, a <code>LibraryCard</code> as a model is fundamentally different from a <code>Student</code>
				model. However, they both share common purpose when it comes to student registration process. Adding a
				student record is required to register a student, but also assigning a library card to that very same
				student is a requirement for a successful student registration process.</p>
			<p dir='auto'>Orchestration services ensures the correct routines for each entity are integrated, but also
				ensures these routines are called in the right order. Additionally, orchestration services are
				responsible for rolling back in case of a failing operation if needed. These three aspects are what
				constitutes an orchestration effort across multiple routines, entities or contracts.</p>
			<p dir='auto'>Let's talk about those in detail.</p>
		</div>
			<h4 dir='auto'><a id='user-content-23300-flow-combinations' class='anchor' aria-hidden='true'
					href='#23300-flow-combinations'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.3.3.0.0 Flow Combinations</h4>
			<p dir='auto'>We spoke earlier about orchestration services combining multiple routines to achieve a common
				purpose or a single flow. This aspect of orchestration services can serve as both a fundamental
				characteristic but also a responsibility. And orchestration service without at least one routine that
				combines two or three entities is not considered truly an orchestration. Integrating with multiple
				services without a common purpose is a better fit definition for Aggregation services which we will
				discuss later in this services chapter.</p>
			<p dir='auto'>But within the flow combination comes the unification of contract. I call it mapping and
				branching. Mapping an incoming model into multiple lower-stream services models then branching the
				responsibility across these services.</p>
			<p dir='auto'>Just like the previous services, Orchestration services are responsible during their flow
				combination to ensure the purity of the exposed input and output contracts. Which becomes a bit more
				complex when combining multiple models. Orchestration services will continue to be responsible for
				mapping incoming contracts to their respective downstream services, but also ensures to map back the
				returned results from these services into the unified model.</p>
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
				<p dir='auto'>Let's bring back a previous code snippet to illustrate that aspect:</p>

	<pre><span class='pl-k'>public</span> <span class='pl-k'>async</span> <span class='pl-en'>ValueTask</span>&lt;<span class='pl-en'>MediaPost</span>&gt; <span class='pl-en'>SubmitMediaPostAsync</span>(<span class='pl-en'>MediaPost</span> <span class='pl-en'>mediaPost</span>)
{
	...

	<span class='pl-en'>Post</span> <span class='pl-en'>post</span> <span class='pl-k'>=</span> <span class='pl-en'>MapToPost</span>(<span class='pl-smi'>mediaPost</span>);
	<span class='pl-en'>List</span>&lt;<span class='pl-en'>Media</span>&gt; <span class='pl-en'>medias</span> <span class='pl-k'>=</span> <span class='pl-en'>MapToMedias</span>(<span class='pl-smi'>mediaPost</span>);

	<span class='pl-en'>Post</span> <span class='pl-en'>addedPost</span> <span class='pl-k'>=</span>
		<span class='pl-k'>await</span> <span class='pl-k'>this</span>.<span class='pl-smi'>postProcessingService</span>.<span class='pl-en'>AddPostAsync</span>(<span class='pl-smi'>post</span>);
	
	<span class='pl-en'>List</span>&lt;<span class='pl-en'>Medias</span>&gt; <span class='pl-en'>addedMedias</span> <span class='pl-k'>=</span> 
		<span class='pl-k'>await</span> <span class='pl-k'>this</span>.<span class='pl-smi'>mediaProcessingService</span>.<span class='pl-en'>AddMediasAsync</span>(<span class='pl-smi'>medias</span>);

	<span class='pl-k'>return</span> <span class='pl-en'>MapToMediaPost</span>(<span class='pl-smi'>addedPost</span>, <span class='pl-smi'>addedMedias</span>); 
}

<span class='pl-k'>private</span> <span class='pl-en'>Post</span> <span class='pl-en'>MapToPost</span>(<span class='pl-en'>MediaPost</span> <span class='pl-en'>mediaPost</span>)
{
	<span class='pl-k'>return</span> <span class='pl-k'>new</span> <span class='pl-en'>Post</span>
	{
		<span class='pl-smi'>Id</span> <span class='pl-k'>=</span> <span class='pl-smi'>mediaPost</span>.<span class='pl-smi'>Id</span>,
		<span class='pl-smi'>Content</span> <span class='pl-k'>=</span> <span class='pl-smi'>mediaPost</span>.<span class='pl-smi'>Content</span>,
		<span class='pl-smi'>CreatedDate</span> <span class='pl-k'>=</span> <span class='pl-smi'>mediaPost</span>.<span class='pl-smi'>Date</span>,
		<span class='pl-smi'>UpdatedDate</span> <span class='pl-k'>=</span> <span class='pl-smi'>mediaPost</span>.<span class='pl-smi'>Date</span>
	};
}

<span class='pl-k'>private</span> <span class='pl-en'>List</span>&lt;<span class='pl-en'>Media</span>&gt; <span class='pl-en'>MapToMedias</span>(<span class='pl-en'>MediaPost</span> <span class='pl-en'>mediaPost</span>)
{
	<span class='pl-k'>return</span> <span class='pl-smi'>mediaPost</span>.<span class='pl-smi'>Base64Images</span>.<span class='pl-en'>Select</span>(<span class='pl-en'>image</span> <span class='pl-k'>=&gt;</span>
		<span class='pl-k'>new</span> <span class='pl-en'>Media</span>
		{
			<span class='pl-smi'>Id</span> <span class='pl-k'>=</span> <span class='pl-smi'>Guid</span>.<span class='pl-en'>NewGuid</span>(),
			<span class='pl-smi'>PostId</span> <span class='pl-k'>=</span> <span class='pl-smi'>mediaPost</span>.<span class='pl-smi'>Id</span>,
			<span class='pl-smi'>Image</span> <span class='pl-k'>=</span> <span class='pl-smi'>image</span>,
			<span class='pl-smi'>CreatedDate</span> <span class='pl-k'>=</span> <span class='pl-smi'>mediaPost</span>.<span class='pl-smi'>Date</span>,
			<span class='pl-smi'>UpdatedDate</span> <span class='pl-k'>=</span> <span class='pl-smi'>mediaPost</span>.<span class='pl-smi'>Date</span>
		});
}

<span class='pl-k'>private</span> <span class='pl-en'>MediaPost</span> <span class='pl-en'>MapToMediaPost</span>(<span class='pl-en'>Post</span> <span class='pl-en'>post</span>, <span class='pl-en'>List</span>&lt;<span class='pl-en'>Media</span>&gt; <span class='pl-en'>medias</span>)
{
	<span class='pl-k'>return</span> <span class='pl-k'>new</span> <span class='pl-en'>MediaPost</span>
	{
		<span class='pl-smi'>Id</span> <span class='pl-k'>=</span> <span class='pl-smi'>post</span>.<span class='pl-smi'>Id</span>,
		<span class='pl-smi'>Content</span> <span class='pl-k'>=</span> <span class='pl-smi'>post</span>.<span class='pl-smi'>Content</span>,
		<span class='pl-smi'>Date</span> <span class='pl-k'>=</span> <span class='pl-smi'>post</span>.<span class='pl-smi'>CreatedDate</span>,
		<span class='pl-smi'>Base64Images</span> <span class='pl-k'>=</span> <span class='pl-smi'>medias</span>.<span class='pl-en'>Select</span>(<span class='pl-en'>media</span> <span class='pl-k'>=&gt;</span> <span class='pl-smi'>media</span>.<span class='pl-smi'>Image</span>)
	}
}</pre>			
			</div>
			<p dir='auto'>As you can see in the above example, the mapping and branching doesn't just happen on the way
				in. But a reverse action has to be taken on the way out. It's a violation of The Standard to return the
				same input object that was passed in. That takes away any visibility on any potential changes that
				happened to the incoming request during persistence. The duplex mapping should substitute the need to
				dereference the incoming request to ensure no unexpected internal changes have occurred.</p>
			<p dir='auto'>Note that it's also recommended to break the mapping logic into its own aspect/partial class
				file. Something like <code>StudentOrchestrationService.Mappings.cs</code> to make sure the only thing
				left there is the business logic of orchestration.</p>
		<div class="highlight">
				<h4 dir='auto'><a id='user-content-23301-call-order' class='anchor' aria-hidden='true'
					href='#23301-call-order'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.3.3.0.1 Call Order</h4>
			<p dir='auto'>Calling routines in the right order can be crucial to any orchestration process. For instance,
				a library card cannot be created unless a student record is created first. Enforcing the order here can
				split into two different types. Let's talk about those here for a bit.</p>
			</div>
			<h5 dir='auto'><a id='user-content-233010-natural-order' class='anchor' aria-hidden='true'
					href='#233010-natural-order'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.3.3.0.1.0 Natural Order</h5>
			<p dir='auto'>The natural order here refers to certain flows that cannot be executed unless a prerequisite
				of input parameters is retrieved or persisted. For instance, imagine a situation where a library card
				cannot be created unless a student unique identifier is retrieved first. In this case here we don't have
				to worry about testing certain routines were called in the right order because it comes naturally with
				the flow.</p>
			<p dir='auto'>here's a code example of this situation:</p>
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
	<pre><span class='pl-k'>public</span> <span class='pl-k'>async</span> <span class='pl-en'>ValueTask</span>&lt;<span class='pl-en'>LibraryCard</span>&gt; <span class='pl-en'>CreateLibraryCardAsync</span>(<span class='pl-en'>LibraryCard</span> <span class='pl-en'>libraryCard</span>)
{
	<span class='pl-en'>Student</span> <span class='pl-en'>student</span> <span class='pl-k'>=</span> <span class='pl-k'>await</span> <span class='pl-k'>this</span>.<span class='pl-smi'>studentProcessingService</span>
		.<span class='pl-en'>RetrieveStudentByIdAsync</span>(<span class='pl-smi'>libraryCard</span>.<span class='pl-smi'>StudentId</span>));

	<span class='pl-k'>return</span> <span class='pl-k'>await</span> <span class='pl-k'>this</span>.<span class='pl-smi'>libraryCardProcessingService</span>
		.<span class='pl-en'>CreateLibraryCardAsync</span>(<span class='pl-smi'>libraryCard</span>, <span class='pl-smi'>student</span>.<span class='pl-smi'>Name</span>);
}</pre>	
			</div>
			<p dir='auto'>In the example above, having a student <code>Name</code> is a requirement to create a library
				card. Therefore, the orchestration of order here comes naturally as part of the flow without any
				additional effort.</p>
			<p dir='auto'>Let's talk about the second type of order - Enforced Order.</p>
			<h5 dir='auto'><a id='user-content-233011-enforced-order' class='anchor' aria-hidden='true'
					href='#233011-enforced-order'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.3.3.0.1.1 Enforced Order</h5>
			<p dir='auto'>Imagine the very same example above, but instead of the library card requiring a student name
				it instead just needs the student <code>Id</code> which is already enclosed in the incoming request
				model. Something like this:</p>
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
	<pre><span class='pl-k'>public</span> <span class='pl-k'>async</span> <span class='pl-en'>ValueTask</span>&lt;<span class='pl-en'>LibraryCard</span>&gt; <span class='pl-en'>CreateLibraryCardAsync</span>(<span class='pl-en'>LibraryCard</span> <span class='pl-en'>libraryCard</span>)
{
	<span class='pl-k'>await</span> <span class='pl-k'>this</span>.<span class='pl-smi'>studentProcessingService</span>.<span class='pl-en'>VerifyEnlistedStudentExistAsync</span>(
		<span class='pl-smi'>libraryCard</span>.<span class='pl-smi'>StudentId</span>);

	<span class='pl-k'>return</span> <span class='pl-k'>await</span> <span class='pl-k'>this</span>.<span class='pl-smi'>libraryCardProcessingService</span>.<span class='pl-en'>CreateLibraryCardAsync</span>(<span class='pl-smi'>libraryCard</span>);
}</pre>
			</div>
			<p dir='auto'>ensuring a verify enlisted student exists has happened before creating a library card might
				become a challenge to achieve naturally because there's no dependency between a return value of one
				routine and the input parameters of the next. In other words, there is nothing that the
				<code>VerifyEnlistedStudentExistAsync</code> function returns that the
				<code>CreateLibraryCardAsync</code> function cares about in terms of input parameters.</p>
			<p dir='auto'>In this case here an enforced type of order must be implemented through unit tests. A unit
				test for this routine would require to verify not just the dependency have been called with the right
				parameters, but also that they are called in the right <em>order</em> let's take a look at how that
				would be implemented:</p>
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
	<pre>[<span class='pl-en'>Fact</span>]
<span class='pl-k'>public</span> <span class='pl-k'>async</span> <span class='pl-en'>Task</span> <span class='pl-en'>ShouldCreateLibraryCardAsync</span>()
{
	<span class='pl-c'><span class='pl-c'>//</span> given</span>
	<span class='pl-en'>Student</span> <span class='pl-en'>someStudent</span> <span class='pl-k'>=</span> <span class='pl-en'>CreateRandomStudent</span>();
	<span class='pl-en'>LibraryCard</span> <span class='pl-en'>randomLibraryCard</span> <span class='pl-k'>=</span> <span class='pl-en'>CreateRandomLibraryCard</span>();
	<span class='pl-en'>LibraryCard</span> <span class='pl-en'>inputLibraryCard</span> <span class='pl-k'>=</span> <span class='pl-smi'>randomLibraryCard</span>;
	<span class='pl-en'>LibraryCard</span> <span class='pl-en'>createdLibraryCard</span> <span class='pl-k'>=</span> <span class='pl-smi'>inputLibraryCard</span>;
	<span class='pl-en'>LibraryCard</span> <span class='pl-en'>expectedLibraryCard</span> <span class='pl-k'>=</span> <span class='pl-smi'>inputLibraryCard</span>.<span class='pl-en'>DeepClone</span>();
	<span class='pl-en'>Guid</span> <span class='pl-en'>studentId</span> <span class='pl-k'>=</span> <span class='pl-smi'>inputLibraryCard</span>.<span class='pl-smi'>StudentId</span>;
	<span class='pl-k'>var</span> <span class='pl-en'>mockSequence</span> <span class='pl-k'>=</span> <span class='pl-k'>new</span> <span class='pl-en'>MockSequence</span>();

	<span class='pl-k'>this</span>.<span class='pl-smi'>studentProcessingServiceMock</span>.<span class='pl-en'>InSequence</span>(<span class='pl-smi'>mockSequence</span>).<span class='pl-en'>Setup</span>(<span class='pl-en'>service</span> <span class='pl-k'>=&gt;</span>
		<span class='pl-smi'>service</span>.<span class='pl-en'>VerifyEnlistedStudentExistAsync</span>(<span class='pl-smi'>studentId</span>))
			.<span class='pl-en'>Returns</span>(<span class='pl-smi'>someStudent</span>);

	<span class='pl-k'>this</span>.<span class='pl-smi'>libraryCardProcessingServiceMock</span>.<span class='pl-en'>InSequence</span>(<span class='pl-smi'>mockSequence</span>).<span class='pl-en'>Setup</span>(<span class='pl-en'>service</span> <span class='pl-k'>=&gt;</span>
		<span class='pl-smi'>service</span>.<span class='pl-en'>CreateLibraryCardAsync</span>(<span class='pl-smi'>inputLibraryCard</span>))
			.<span class='pl-en'>ReturnsAsync</span>(<span class='pl-smi'>createdLibraryCard</span>);

	<span class='pl-c'><span class='pl-c'>//</span> when</span>
	<span class='pl-en'>LibraryCard</span> <span class='pl-en'>actualLibraryCard</span> <span class='pl-k'>=</span> <span class='pl-k'>await</span> <span class='pl-k'>this</span>.<span class='pl-smi'>libraryCardOrchestrationService</span>
		.<span class='pl-en'>CreateLibraryCardAsync</span>(<span class='pl-smi'>inputLibraryCard</span>);

	<span class='pl-c'><span class='pl-c'>//</span> then</span>
	<span class='pl-smi'>actualLibraryCard</span>.<span class='pl-en'>Should</span>().<span class='pl-en'>BeEquivalentTo</span>(<span class='pl-smi'>expectedLibraryCard</span>);

	<span class='pl-k'>this</span>.<span class='pl-smi'>studentProcessingServiceMock</span>.<span class='pl-en'>Verify</span>(<span class='pl-en'>service</span> <span class='pl-k'>=&gt;</span>
		<span class='pl-smi'>service</span>.<span class='pl-en'>VerifyEnlistedStudentExistAsync</span>(<span class='pl-smi'>studentId</span>),
			<span class='pl-smi'>Times</span>.<span class='pl-smi'>Once</span>);

	<span class='pl-k'>this</span>.<span class='pl-smi'>libraryCardProcessingServiceMock</span>.<span class='pl-en'>Verify</span>(<span class='pl-en'>service</span> <span class='pl-k'>=&gt;</span>
		<span class='pl-smi'>service</span>.<span class='pl-en'>CreateLibraryCardAsync</span>(<span class='pl-smi'>inputLibraryCard</span>),
			<span class='pl-smi'>Times</span>.<span class='pl-smi'>Once</span>);

	<span class='pl-k'>this</span>.<span class='pl-smi'>studentProcessingServiceMock</span>.<span class='pl-en'>VerifyNoOtherCalls</span>();
	<span class='pl-k'>this</span>.<span class='pl-smi'>libraryCardProcessingServiceMock</span>.<span class='pl-en'>VerifyNoOtherCalls</span>();
	<span class='pl-k'>this</span>.<span class='pl-smi'>loggingBrokerMock</span>.<span class='pl-en'>VerifyNoOtherCalls</span>();
}
</pre>			
			</div>
			<p dir='auto'>From the example above, the mock framework here is being used to ensure a certain order is
				being enforced when it comes to calling these dependencies. This way we enforce a certain implementation
				within any given method to ensure a non-naturally connected dependencies are being sequentially called
				in the exact right order.</p>
			<p dir='auto'>It's more likely that the form of ordering leans more towards enforced than natural when
				orchestration services reach the maximum number of dependencies they may have at any point in time.</p>
			<h4 dir='auto'><a id='user-content-23302-exceptions-mapping-wrapping--unwrapping' class='anchor'
					aria-hidden='true' href='#23302-exceptions-mapping-wrapping--unwrapping'><svg
						class='octicon octicon-link' viewBox='0 0 16 16' version='1.1' width='16' height='16'
						aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.3.3.0.2 Exceptions Mapping (Wrapping &amp; Unwrapping)</h4>
			<p dir='auto'>This responsibility is very similar to flow-combinations. Except that in this case
				orchestration services unify all the exceptions that may occur out of any of its dependencies into one
				unified categorical exception model. Let's start with an illustration of what that mapping may look
				like:</p>
			
			<p align='center' style='padding: 5px;' dir='auto'>
				<a target='_blank' rel='noopener noreferrer'
					href='https://user-images.githubusercontent.com/1453985/145294325-0818a2dd-a017-43af-b1f0-fa5c93a9218c.png'><img
						src='https://user-images.githubusercontent.com/1453985/145294325-0818a2dd-a017-43af-b1f0-fa5c93a9218c.png'
						style='max-width: 100%;'></a>
			</p>		
			<p dir='auto'>In the illustration above, you will notice that validation and dependency validation
				exceptions thrown from downstream dependency services are being mapped into one unified dependency
				exception at the orchestration level. This practice allows upstream consumers of that very orchestration
				service to determine the next course of action based on one categorical exception type instead of four
				or in the case of three dependencies it would be six categorical dependencies.</p>
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
				<p dir='auto'>Let's start with a failing test to materialize our idea here:</p>
	<pre><span class='pl-k'>public</span> <span class='pl-k'>static</span> <span class='pl-en'>TheoryData</span> <span class='pl-en'>DependencyValidationExceptions</span>()
{
	<span class='pl-k'>string</span> <span class='pl-en'>exceptionMessage</span> <span class='pl-k'>=</span> <span class='pl-en'>GetRandomMessage</span>();
	<span class='pl-k'>var</span> <span class='pl-en'>innerException</span> <span class='pl-k'>=</span> <span class='pl-k'>new</span> <span class='pl-en'>Xeption</span>(<span class='pl-smi'>exceptionMessage</span>);

	<span class='pl-k'>var</span> <span class='pl-en'>studentValidationException</span> <span class='pl-k'>=</span>
		<span class='pl-k'>new</span> <span class='pl-en'>StudentValidationException</span>(<span class='pl-smi'>innerException</span>);

	<span class='pl-k'>var</span> <span class='pl-en'>studentDependencyValidationException</span> <span class='pl-k'>=</span>
		<span class='pl-k'>new</span> <span class='pl-en'>StudentDependencyValidationException</span>(<span class='pl-smi'>innerException</span>);

	<span class='pl-k'>var</span> <span class='pl-en'>libraryCardValidationException</span> <span class='pl-k'>=</span>
		<span class='pl-k'>new</span> <span class='pl-en'>LibraryCardValidationException</span>(<span class='pl-smi'>innerException</span>);

	<span class='pl-k'>var</span> <span class='pl-en'>libraryCardDependencyValidationException</span> <span class='pl-k'>=</span>
		<span class='pl-k'>new</span> <span class='pl-en'>LibraryCardDependencyValidationException</span>(<span class='pl-smi'>innerException</span>);

	<span class='pl-k'>return</span> <span class='pl-k'>new</span> <span class='pl-en'>TheoryData</span>&lt;<span class='pl-en'>Xeption</span>&gt;
	{
		<span class='pl-smi'>studentValidationException</span>,
		<span class='pl-smi'>studentDependencyValidationException</span>,
		<span class='pl-smi'>libraryCardValidationException</span>,
		<span class='pl-smi'>libraryCardDependencyValidationException</span>
	};
}

[<span class='pl-en'>Theory</span>]
[<span class='pl-en'>MemberData</span>(<span class='pl-k'>nameof</span>(<span class='pl-smi'>DependencyValidationExceptions</span>))]
<span class='pl-k'>public</span> <span class='pl-k'>async</span> <span class='pl-en'>Task</span> 
<span class='pl-en'>ShouldThrowDependencyValidationExceptionOnCreateIfDependencyValidationErrorOccursAndLogItAsync</span>(
	<span class='pl-en'>Xeption</span> <span class='pl-en'>dependencyValidationException</span>)
{
	<span class='pl-c'><span class='pl-c'>//</span> given</span>
	<span class='pl-en'>Student</span> <span class='pl-en'>someStudent</span> <span class='pl-k'>=</span> <span class='pl-en'>CreateRandomStudent</span>();

	<span class='pl-k'>var</span> <span class='pl-en'>expectedStudentOrchestrationDependencyValidationException</span> <span class='pl-k'>=</span>
		<span class='pl-k'>new</span> <span class='pl-en'>StudentOrchestrationDependencyValidationException</span>(
			<span class='pl-smi'>dependencyValidationException</span>.<span class='pl-smi'>InnerException</span> <span class='pl-en'>as</span> <span class='pl-en'>Xeption</span>);

	<span class='pl-k'>this</span>.<span class='pl-smi'>studentServiceMock</span>.<span class='pl-en'>Setup</span>(<span class='pl-en'>service</span> <span class='pl-k'>=&gt;</span>
		<span class='pl-smi'>service</span>.<span class='pl-en'>AddStudentAsync</span>(<span class='pl-smi'>It</span>.<span class='pl-en'>IsAny</span>&lt;<span class='pl-en'>Student</span>&gt;()))
			.<span class='pl-en'>ThrowsAsync</span>(<span class='pl-smi'>dependencyValidationException</span>);

	<span class='pl-c'><span class='pl-c'>//</span> when</span>
	<span class='pl-en'>ValueTask</span>&lt;<span class='pl-en'>Student</span>&gt; <span class='pl-en'>addStudentTask</span> <span class='pl-k'>=</span>
		<span class='pl-k'>await</span> <span class='pl-k'>this</span>.<span class='pl-smi'>studentOrchestrationService</span>.<span class='pl-en'>AddStudentAsync</span>(<span class='pl-smi'>someStudent</span>);

	<span class='pl-c'><span class='pl-c'>//</span> then</span>
	<span class='pl-k'>await</span> <span class='pl-smi'>Assert</span>.<span class='pl-en'>ThrowsAsync</span>&lt;<span class='pl-en'>StudentOrchestrationDependencyValidationException</span>&gt;(() <span class='pl-k'>=&gt;</span>
		<span class='pl-smi'>addStudentTask</span>.<span class='pl-en'>AsTask</span>());

	<span class='pl-k'>this</span>.<span class='pl-smi'>studentServiceMock</span>.<span class='pl-en'>Verify</span>(<span class='pl-en'>service</span> <span class='pl-k'>=&gt;</span>
		<span class='pl-smi'>service</span>.<span class='pl-en'>AddStudentAsync</span>(<span class='pl-smi'>It</span>.<span class='pl-en'>IsAny</span>&lt;<span class='pl-en'>Student</span>&gt;()),
			<span class='pl-smi'>Times</span>.<span class='pl-smi'>Once</span>);

	<span class='pl-k'>this</span>.<span class='pl-smi'>loggingBrokerMock</span>.<span class='pl-en'>Verify</span>(<span class='pl-en'>broker</span> <span class='pl-k'>=&gt;</span>
		<span class='pl-smi'>broker</span>.<span class='pl-en'>LogError</span>(<span class='pl-smi'>It</span>.<span class='pl-en'>Is</span>(<span class='pl-en'>SameExceptionAs</span>(
			<span class='pl-smi'>expectedStudentOrchestrationDependencyValidationException</span>))),
				<span class='pl-smi'>Times</span>.<span class='pl-smi'>Once</span>);

	<span class='pl-k'>this</span>.<span class='pl-smi'>libraryCardServiceMock</span>.<span class='pl-en'>Verify</span>(<span class='pl-en'>service</span> <span class='pl-k'>=&gt;</span>
		<span class='pl-smi'>service</span>.<span class='pl-en'>AddLibraryCard</span>(<span class='pl-smi'>It</span>.<span class='pl-en'>IsAny</span>&lt;<span class='pl-en'>Guid</span>&gt;()),
			<span class='pl-smi'>Times</span>.<span class='pl-smi'>Once</span>);

	<span class='pl-k'>this</span>.<span class='pl-smi'>studentServiceMock</span>.<span class='pl-en'>VerifyNoOtherCalls</span>();
	<span class='pl-k'>this</span>.<span class='pl-smi'>loggingBrokerMock</span>.<span class='pl-en'>VerifyNoOtherCalls</span>();
	<span class='pl-k'>this</span>.<span class='pl-smi'>libraryCardServiceMock</span>.<span class='pl-en'>VerifyNoOtherCalls</span>();
}</pre>
			</div>
			<p dir='auto'>In the test above, we are verifying that any of the four aforementioned exceptions on
				occurrence, they would be mapped into a <code>StudentOrchestrationDependencyValidationException</code>.
				We maintain the original localized exception as an inner exception. But we unwrap the categorical
				exception at this level to maintain the original issue as we go upstream.</p>
			<p dir='auto'>These exceptions are mapped under a dependency validation exception because they originate
				from a dependency or a dependency of a dependency downstream. For instance, if a storage broker throws
				an exception that is deemed to be a dependency validation (something like
				<code>DuplicateKeyException</code>). The broker-neighboring service would map that into a localized
				<code>StudentAlredyExistException</code> then wrap that exception in a categorical exception of type
				<code>StudentDependencyValidationException</code>. When that exception propagates upstream to a
				processing or an orchestration service, we lose the categorical exception as we have already captured it
				under the right scope of mapping. Then we continue to embed that very localized exception under the
				current service dependency validation exception.</p>
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
				<p dir='auto'>Let's try to make this test pass:</p>
	<pre><span class='pl-k'>public</span> <span class='pl-k'>partial</span> <span class='pl-k'>class</span> <span class='pl-en'>StudentOrchestrationService</span>
{
	<span class='pl-k'>private</span> <span class='pl-k'>delegate</span> <span class='pl-en'>ValueTask</span>&lt;<span class='pl-en'>Student</span>&gt; <span class='pl-en'>ReturningStudentFunction</span>();

	<span class='pl-k'>private</span> <span class='pl-k'>async</span> <span class='pl-en'>ValueTask</span>&lt;<span class='pl-en'>Student</span>&gt; <span class='pl-en'>TryCatch</span>(<span class='pl-en'>ReturningStudentFunction</span> <span class='pl-en'>returningStudentFunction</span>)
	{
		<span class='pl-k'>try</span>
		{
			<span class='pl-k'>return</span> <span class='pl-k'>await</span> <span class='pl-en'>returningStudentFunction</span>();
		}
		<span class='pl-k'>catch</span> (<span class='pl-en'>StudentValidationException</span> <span class='pl-en'>studentValidationException</span>)
		{
			<span class='pl-k'>throw</span> <span class='pl-en'>CreateAndLogDependencyValidationException</span>(<span class='pl-smi'>studentValidationException</span>);
		}
		<span class='pl-k'>catch</span> (<span class='pl-en'>StudentDependencyValidationException</span> <span class='pl-en'>studentDependencyValidationException</span>)
		{
			<span class='pl-k'>throw</span> <span class='pl-en'>CreateAndLogDependencyValidationException</span>(<span class='pl-smi'>studentDependencyValidationException</span>);
		}
		<span class='pl-k'>catch</span> (<span class='pl-en'>LibraryCardValidationException</span> <span class='pl-en'>libraryCardValidationException</span>)
		{
			<span class='pl-k'>throw</span> <span class='pl-en'>CreateAndLogDependencyValidationException</span>(<span class='pl-smi'>libraryCardValidationException</span>);
		}
		<span class='pl-k'>catch</span> (<span class='pl-en'>LibraryCardDependencyValidationException</span> <span class='pl-en'>libraryCardDependencyValidationException</span>)
		{
			<span class='pl-k'>throw</span> <span class='pl-en'>CreateAndLogDependencyValidationException</span>(<span class='pl-smi'>libraryCardDependencyValidationException</span>);
		}
	}

	<span class='pl-k'>private</span> <span class='pl-en'>StudentOrchestrationDependencyValidationException</span> <span class='pl-en'>CreateAndLogDependencyValidationException</span>(
		<span class='pl-en'>Xeption</span> <span class='pl-en'>exception</span>)
	{
		<span class='pl-k'>var</span> <span class='pl-en'>studentOrchestrationDependencyValidationException</span> <span class='pl-k'>=</span>
			<span class='pl-k'>new</span> <span class='pl-en'>StudentOrchestrationDependencyValidationException</span>(<span class='pl-smi'>exception</span>.<span class='pl-smi'>innerException</span> <span class='pl-en'>as</span> <span class='pl-en'>Xeption</span>);

		<span class='pl-k'>this</span>.<span class='pl-smi'>loggingBroker</span>.<span class='pl-en'>LogError</span>(<span class='pl-smi'>studentOrchestrationDependencyValidationException</span>);

		<span class='pl-k'>throw</span> <span class='pl-smi'>studentOrchestrationDependencyValidationException</span>;
	}
}</pre>
			</div>
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
				<p dir='auto'>Now we can use the <code>TryCatch</code> as follows:</p>
	<pre><span class='pl-k'>public</span> <span class='pl-k'>async</span> <span class='pl-en'>ValueTask</span>&lt;<span class='pl-en'>Student</span>&gt; <span class='pl-en'>AddStudentAsync</span>(<span class='pl-en'>Student</span> <span class='pl-en'>student</span>) <span class='pl-k'>=&gt;</span>
<span class='pl-en'>TryCatch</span>(<span class='pl-k'>async</span> () <span class='pl-k'>=&gt;</span> 
{
	...
	<span class='pl-en'>Student</span> <span class='pl-en'>addedStudent</span> <span class='pl-k'>=</span> <span class='pl-k'>await</span> <span class='pl-k'>this</span>.<span class='pl-smi'>studentService</span>.<span class='pl-en'>AddStudentAsync</span>(<span class='pl-smi'>student</span>);
	<span class='pl-en'>LibraryCard</span> <span class='pl-en'>libraryCard</span> <span class='pl-k'>=</span> <span class='pl-k'>await</span> <span class='pl-k'>this</span>.<span class='pl-smi'>libraryCard</span>.<span class='pl-en'>AddLibraryCard</span>(<span class='pl-smi'>addedStudent</span>.<span class='pl-smi'>Id</span>);

	<span class='pl-k'>return</span> <span class='pl-smi'>addedStudent</span>;  
});</pre>
			</div>
			<p dir='auto'>You can see now in the implementation that we mapped all four different types of external
				downstream services validation exceptions into one categorical exception and then maintained the inner
				exception for each one of them.</p>
			<p dir='auto'>The same rule applies to dependency exceptions. Dependency exceptions can be both Service and
				Dependency exceptions from downstream services. For instance, in the above example, calling a student
				service may produce <code>StudentDependencyException</code> and <code>StudentServiceException</code>.
				Both of these categorical exceptions will be unwrapped from their categorical layer and have their local
				layer wrapped in one unified new orchestration-level categorical exception under
				<code>StudentOrchestrationDependencyException</code>. The same thing applies to all other dependency
				categorical exceptions like <code>LibraryCardDependencyException</code> and
				<code>LibraryCardServiceException</code>.</p>
			<p dir='auto'>It's extremely important to unwrap and wrap localized exceptions from downstream services with
				categorical exceptions at the current service layer to ensure at the Exposers layer these exceptions can
				be easily handled and mapped into whatever the nature of the exposer component dictates. In the case of
				an Exposer component of type API Controller, the mapping would produce Http Status Codes. In the case of
				UI Exposer components it would be mapped to meaningful text to the end users.</p>
			<p dir='auto'>We will discuss further upstream in this Standard when to determine to expose localized inner
				exceptions details where end-users are not required to take any action. This is exclusive to dependency
				and service level exceptions.</p>
			<h2 dir='auto'><a id='user-content-234-variations' class='anchor' aria-hidden='true'
					href='#234-variations'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.3.4 Variations</h2>
			<p dir='auto'>Orchestration services have several variations depending on where they stand in the overall
				low-level architecture. For instance, an orchestration service depending on downstream orchestration
				services is called a Coordination Service. An orchestration service working with multiple coordination
				services as dependencies is called a Management Service. These variants are all in essence an
				orchestration service with an uber-level business logic.</p>
				<div class="highlight">
			<h3 dir='auto'><a id='user-content-2340-variants-levels' class='anchor' aria-hidden='true'
					href='#2340-variants-levels'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.3.4.0 Variants Levels</h3>
			<p dir='auto'>Let's take a look at the possible variants for orchestration services and where they would be
				positioned:</p>
			
			<p align='center' style='padding: 5px;' dir='auto'>
				<a target='_blank' rel='noopener noreferrer'
					href='https://user-images.githubusercontent.com/1453985/147461598-e7fe6b48-976a-4787-bd97-11e7faf131ee.png'><img
						src='https://user-images.githubusercontent.com/1453985/147461598-e7fe6b48-976a-4787-bd97-11e7faf131ee.png'
						style='max-width: 100%;'></a>
			</p>
			
			<p dir='auto'>In my personal experience, I've rarely had to resolve to an Uber Management service. The idea
				of the limitation here in terms of dependencies and variations of orchestration-like services is to help
				engineers re-think the complexity of their logic. But admittedly there are situations where the
				complexity is an absolute necessity, therefore Uber-Management services exist as an option.</p>
			<p dir='auto'>The following table should guide the process of developing variants of orchestration services
				based on the level:</p>
			<table>
				<thead>
					<tr>
						<th>Variant</th>
						<th>Dependencies</th>
						<th>Consumers</th>
						<th>Complexity</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td>Orchestrations Services</td>
						<td>Foundation or Processing Services</td>
						<td>Coordination Services</td>
						<td>Low</td>
					</tr>
					<tr>
						<td>Coordination Services</td>
						<td>Orchestration Services</td>
						<td>Management Services</td>
						<td>Medium</td>
					</tr>
					<tr>
						<td>Management Services</td>
						<td>Coordination Services</td>
						<td>Uber Management Services</td>
						<td>High</td>
					</tr>
					<tr>
						<td>Uber Management Services</td>
						<td>Management Services</td>
						<td>Aggregation, Views or Exposer Components</td>
						<td>Very High</td>
					</tr>
				</tbody>
			</table>
			<p dir='auto'>Working beyond Uber Management services in an orchestration manner would require a deeper
				discussion and a serious consideration of the overall architecture. Some future versions The Standard
				might be able to address this issue in what I call 'The Lake House' but that is outside of the scope of
				this version of The Standard.</p>
			</div>
			<div class="highlight">
			<h3 dir='auto'><a id='user-content-2341-unit-of-work' class='anchor' aria-hidden='true'
					href='#2341-unit-of-work'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.3.4.1 Unit of Work</h3>
			<p dir='auto'>With the variations of orchestration services, I highly recommend staying true to the unit of
				work concept. Where every request can do one thing and one thing only including it's pre-requisites. For
				instance, if you need to register a student in some school, You may require also adding a guardian,
				contact information and some other details. Eventing these actions can greatly decrease the complexity
				of the flow and lower the risk of any failures in downstream services.</p>
			<p dir='auto'>Here's a visualization for a complex single-threaded approach:</p>	
			<p align='center' style='padding: 5px;' dir='auto'>
				<a target='_blank' rel='noopener noreferrer'
					href='https://user-images.githubusercontent.com/1453985/147462984-84e6dabd-bf27-413a-8e79-2659a24c37c0.png'><img
						src='https://user-images.githubusercontent.com/1453985/147462984-84e6dabd-bf27-413a-8e79-2659a24c37c0.png'
						style='max-width: 100%;'></a>
			</p>
		</div>
 			<p dir='auto'>The solution above is a working solution for registering a student. We needed to include
				guardian information, library cards, classes ... etc. These dependencies can be broken down in terms of
				eventing and allowing other services to pick up where the single-threaded services leaves off to
				continue the registration process. Something like this:</p>		
			<p align='center' style='padding: 5px;' dir='auto'>
				<a target='_blank' rel='noopener noreferrer'
					href='https://user-images.githubusercontent.com/1453985/147463233-466a055f-ce95-4911-92cd-7b173b2a37df.png'><img
						src='https://user-images.githubusercontent.com/1453985/147463233-466a055f-ce95-4911-92cd-7b173b2a37df.png'
						style='max-width: 100%;'></a>
			</p>
			<p dir='auto'>The incoming request in the above example would be turned into events, where each one of these
				events would be notifying its own orchestration services in a cul-de-sac manner as we discussed above in
				section 2.3.2.2. What that means is that a single thread is no longer responsible for the success of
				each and every dependency in the system. Instead, every event-listening broker would handle its own
				process in a much, much simplified way.</p>
			<p dir='auto'>That approach does not guarantee an immediate response of success or failure to the requestor.
				It's an eventual-consistency pattern where the client would get an <code>Accepted</code> message or its
				equivalent based on the communication protocol to let them know that a process has started but there's
				no guarantee of any results yet until it's done.</p>
			<p dir='auto'>It's also important to mention that an extra layer of resiliency can be added to these events
				by temporarily storing them in Queue-like components or memory-based temporary storages; depending on
				the criticality of the business.</p>
			<p dir='auto'>But an eventual consistency approach isn't always a good solution if the client on the other
				side is waiting for a response. Especially in a much critical situations where an immediate response is
				required. This problem can be solved through Fire-n-Observe queues that we will discuss in future
				version of The Standard.</p>
			<p dir='auto'>[*] <a href='https://www.youtube.com/watch?v=OP6HcIpXduE' rel='nofollow'>Introduction to
					Orchestration Services</a></p>
			<p dir='auto'>[*] <a href='https://www.youtube.com/watch?v=C8Sm1kSKF1o' rel='nofollow'>Cul-De-Sac Pattern
					for Orchestration Services</a></p>
			<p dir='auto'>[*] <a href='https://www.youtube.com/watch?v=8KZIw_IJC0U' rel='nofollow'>Cul-De-Sac Pattern
					for Coordination Services</a></p>
		</article>
		<article class='markdown-body entry-content container-lg' itemprop='text'>
			<h1 dir='auto'><a id='user-content-24-aggregation-services-the-knot' class='anchor' aria-hidden='true'
					href='#24-aggregation-services-the-knot'><svg class='octicon octicon-link' viewBox='0 0 16 16'
						version='1.1' width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.4 Aggregation Services (The Knot)</h1>
			<h2 dir='auto'><a id='user-content-240-introduction' class='anchor' aria-hidden='true'
					href='#240-introduction'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.4.0 Introduction</h2>
			<p dir='auto'>Aggregation services main responsibility is to expose one single point of contact between the
				core business logic layer and any exposure layers. It ensures, if multiple services of any variation
				share the same contract, that they are aggregated and exposed to one exposer component through one
				logical layer.</p>
			<p dir='auto'>Aggregation services don't hold any business logic in themselves. They are simply a knot that
				ties together multiple services of any number. They can have any layer of services as dependencies and
				it mainly exposes the call to these services accordingly. Here's a code example of an aggregation
				service:</p>
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
	<pre><span class='pl-k'>public</span> <span class='pl-k'>async</span> <span class='pl-en'>ValueTask</span> <span class='pl-en'>ProcessStudentAsync</span>(<span class='pl-en'>Student</span> <span class='pl-en'>student</span>)
{
	<span class='pl-k'>await</span> <span class='pl-k'>this</span>.<span class='pl-smi'>studentRegistrationCoordinationService</span>.<span class='pl-en'>RegisterStudentAsync</span>(<span class='pl-smi'>student</span>);
	<span class='pl-k'>await</span> <span class='pl-k'>this</span>.<span class='pl-smi'>studentRecordsCoordinationService</span>.<span class='pl-en'>AddStudentRecordAsync</span>(<span class='pl-smi'>student</span>);
	...
	...
	<span class='pl-k'>await</span> <span class='pl-k'>this</span>.<span class='pl-smi'>anyOtherStudentRelatedCoordinationService</span>.<span class='pl-en'>DoSomethingWithStudentAsync</span>(<span class='pl-smi'>student</span>);    
}</pre>
			</div>
			<p dir='auto'>As the snippet shows above, an Aggregation service may have any number of calls in any order
				without limitation. And there may be occasions where you may or may not need to return a value to your
				exposure layers depending on the overall flow and architecture, which we will discuss shortly in this
				chapter. But more importantly Aggregation services should not be mistaken for an orchestration service
				or any of its variants.</p>
			<h2 dir='auto'><a id='user-content-241-on-the-map' class='anchor' aria-hidden='true'
					href='#241-on-the-map'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.4.1 On The Map</h2>
			<p dir='auto'>Aggregation services always sit on the other end of a core business logic layer. They are the
				last point of contact between exposure layers and logic layers. here's a visualization of where
				aggregation services would be located in an overall architecture:</p>
			
			<p align='center' style='padding: 5px;' dir='auto'>
				<a target='_blank' rel='noopener noreferrer'
					href='https://user-images.githubusercontent.com/1453985/147583126-c2b73db9-f77f-486f-806a-e9bfe32cec16.png'><img
						src='https://user-images.githubusercontent.com/1453985/147583126-c2b73db9-f77f-486f-806a-e9bfe32cec16.png'
						style='max-width: 100%;'></a>
			</p>
			
			<p dir='auto'>Let's discuss the characteristics of Aggregation services.</p>
			<h2 dir='auto'><a id='user-content-242-characteristics' class='anchor' aria-hidden='true'
					href='#242-characteristics'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.4.2 Characteristics</h2>
			<p dir='auto'>Aggregation services mainly exist when there are multiple services, sharing the same contract
				or sharing primitive types of the same contract, that require a single point of exposure. They mainly
				exist in hyper-complex applications where multiple services (usually orchestration or higher but can be
				lower) require one single point of contact through exposure layers. Let's talk in detail about the main
				characteristics for Aggregation services.</p>
			<h3 dir='auto'><a id='user-content-2420-no-dependency-limitation' class='anchor' aria-hidden='true'
					href='#2420-no-dependency-limitation'><svg class='octicon octicon-link' viewBox='0 0 16 16'
						version='1.1' width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.4.2.0 No Dependency Limitation</h3>
			<p dir='auto'>Unlike any other service, Aggregation services can have any number of dependencies as long as
				these services are of the same variation. For instance, an Aggregation service cannot aggregate between
				an Orchestration service and a Coordination service. It's a partial Florance-Like pattern where services
				have to be of the same variation but not necessary limited by the number.</p>
			<p dir='auto'>The reason for the lack of limitation of the dependencies for Aggregation services is because
				the service itself doesn't perform any level of business logic between these services. It doesn't care
				what these services do or require. It only focuses on exposing these services regardless of what was
				called before or after them.</p>
			<p dir='auto'>Here's what an Aggregation service test would look like:</p>
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
	<pre>[<span class='pl-en'>Fact</span>]
<span class='pl-k'>public</span> <span class='pl-k'>async</span> <span class='pl-en'>Task</span> <span class='pl-en'>ShouldProcessStudentAsync</span>()
{
	<span class='pl-c'><span class='pl-c'>//</span> given</span>
	<span class='pl-en'>Student</span> <span class='pl-en'>randomStudent</span> <span class='pl-k'>=</span> <span class='pl-en'>CreatedRandomStudent</span>();
	<span class='pl-en'>Student</span> <span class='pl-en'>inputStudent</span> <span class='pl-k'>=</span> <span class='pl-smi'>randomStudent</span>;

	<span class='pl-c'><span class='pl-c'>//</span> when</span>
	<span class='pl-k'>await</span> <span class='pl-k'>this</span>.<span class='pl-smi'>studentAggregationService</span>.<span class='pl-en'>ProcessStudentAsync</span>(<span class='pl-smi'>inputStudent</span>);

	<span class='pl-c'><span class='pl-c'>//</span> then</span>
	<span class='pl-k'>this</span>.<span class='pl-smi'>studentRegistrationCoordinationServiceMock</span>.<span class='pl-en'>Verify</span>(<span class='pl-en'>service</span> <span class='pl-k'>=&gt;</span>
		<span class='pl-smi'>service</span>.<span class='pl-en'>RegisterStudentAsync</span>(<span class='pl-smi'>student</span>),
			<span class='pl-smi'>Times</span>.<span class='pl-smi'>Once</span>);

	<span class='pl-k'>this</span>.<span class='pl-smi'>studentRecordsCoordinationServiceMock</span>.<span class='pl-en'>Verify</span>(<span class='pl-en'>service</span> <span class='pl-k'>=&gt;</span>
		<span class='pl-smi'>service</span>.<span class='pl-en'>AddStudentRecordAsync</span>(<span class='pl-smi'>student</span>),
			<span class='pl-smi'>Times</span>.<span class='pl-smi'>Once</span>);
	...
	...

	<span class='pl-k'>this</span>.<span class='pl-smi'>anyOtherStudentRelatedCoordinationServiceMock</span>.<span class='pl-en'>Verify</span>(<span class='pl-en'>service</span> <span class='pl-k'>=&gt;</span>
		<span class='pl-smi'>service</span>.<span class='pl-en'>DoSomethingWithStudentAsync</span>(<span class='pl-smi'>student</span>),
			<span class='pl-smi'>Times</span>.<span class='pl-smi'>Once</span>);

	<span class='pl-k'>this</span>.<span class='pl-smi'>studentRegistrationCoordinationServiceMock</span>.<span class='pl-en'>VerifyNoOtherCalls</span>();
	<span class='pl-k'>this</span>.<span class='pl-smi'>studentRecordsCoordinationServiceMock</span>.<span class='pl-en'>VerifyNoOtherCalls</span>();
	...
	...
	<span class='pl-k'>this</span>.<span class='pl-smi'>anyOtherStudentRelatedCoordinationServiceMock</span>.<span class='pl-en'>VerifyNoOtherCalls</span>();
}</pre>
			</div>
			<p dir='auto'>As you can see above, we are only verifying and testing for the aggregation aspect of calling
				these services. No return type required in this scenario but there might be in the scenarios of
				pass-through which we will be discussing shortly.</p>
			<p dir='auto'>An implementation of the above test would be as follows:</p>
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
	<pre><span class='pl-k'>public</span> <span class='pl-k'>async</span> <span class='pl-en'>ValueTask</span> <span class='pl-en'>ProcessStudentAsync</span>(<span class='pl-en'>Student</span> <span class='pl-en'>student</span>)
{
	<span class='pl-k'>await</span> <span class='pl-k'>this</span>.<span class='pl-smi'>studentRegistrationCoordinationService</span>.<span class='pl-en'>RegisterStudentAsync</span>(<span class='pl-smi'>student</span>);
	<span class='pl-k'>await</span> <span class='pl-k'>this</span>.<span class='pl-smi'>studentRecordsCoordinationService</span>.<span class='pl-en'>AddStudentRecordAsync</span>(<span class='pl-smi'>student</span>);
	...
	...
	<span class='pl-k'>await</span> <span class='pl-k'>this</span>.<span class='pl-smi'>anyOtherStudentRelatedCoordinationService</span>.<span class='pl-en'>DoSomethingWithStudentAsync</span>(<span class='pl-smi'>student</span>);    
}</pre>		
			</div>
			<div class="highlight">
			<h3 dir='auto'><a id='user-content-2421-no-order-validation' class='anchor' aria-hidden='true'
					href='#2421-no-order-validation'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.4.2.1 No Order Validation</h3>
			<p dir='auto'>By definition, Aggregation services are naturally required to call several dependencies with
				no limitation. The order of calling these dependencies is also not a concern or a responsibility for
				Aggregation services. That's simply because the call-order verification is considered a core business
				logic. which falls outside of the responsibilities of an Aggregation service. That of course includes
				both natural order of verification or enforced order of verification as we explained in section
				2.3.3.0.1 in the previous chapter.</p>
			<p dir='auto'>It's a violation of The Standard to attempt using simple techniques like a mock sequence in
				testing an Aggregation service. These responsibilities are more likely to fall on the next lower layer
				of an Aggregation service for any orchestration-like service. It is also a violation to verify reliance
				on the return value of one service call to initiate a call to the next.</p>
			</div>
			<h3 dir='auto'><a id='user-content-2422-basic-validations' class='anchor' aria-hidden='true'
					href='#2422-basic-validations'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.4.2.2 Basic Validations</h3>
			<p dir='auto'>Aggregation services are still required to validate whether the incoming data is higher-level
				structurally valid or not. For instance, an Aggregation service that takes a <code>Student</code> object
				as an input parameter will validate only if the <code>student</code> is <code>null</code> or not. But
				that's where it all stops.</p>
			<p dir='auto'>There may be an occasion where a dependency requires a property of an input parameter to be
				passed in, in which case it is also permitted to validate that property value structurally. For
				instance, if a downstream dependency requires a student name to be passed in. An Aggregation service is
				still going to be required to validate if the <code>Name</code> is <code>null</code>, empty or just
				whitespace.</p>
			<h3 dir='auto'><a id='user-content-2423-pass-through' class='anchor' aria-hidden='true'
					href='#2423-pass-through'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.4.2.3 Pass-Through</h3>
			<p dir='auto'>Aggregation services are not also required to implement their aggregation by performing
				multiple calls from one method. They can also aggregate by offering a pass-through methods for multiple
				services. For instance, assume we have <code>studentCoordinationService</code> and
				<code>studentRecordsService</code> and <code>anyOtherStudentRelatedCoordinationService</code> and each
				one of these services are independent in terms of business flow. So an aggregation here is only at the
				level of exposure but not necessarily the level of execution.</p>
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
				<p dir='auto'>Here's a code example:</p>

	<pre><span class='pl-k'>public</span> <span class='pl-k'>partial</span> <span class='pl-k'>class</span> <span class='pl-en'>StudentAggregationService</span>
{
	...

	<span class='pl-k'>public</span> <span class='pl-k'>async</span> <span class='pl-en'>ValueTask</span>&lt;<span class='pl-en'>Student</span>&gt; <span class='pl-en'>RegisterStudentAsync</span>(<span class='pl-en'>Student</span> <span class='pl-en'>student</span>)
	{
		...

		<span class='pl-k'>return</span> <span class='pl-k'>await</span> <span class='pl-k'>this</span>.<span class='pl-smi'>studentCoordinationService</span>.<span class='pl-en'>RegisterStudentAsync</span>(<span class='pl-smi'>student</span>);
	}

	<span class='pl-k'>public</span> <span class='pl-k'>async</span> <span class='pl-en'>ValueTask</span>&lt;<span class='pl-en'>Student</span>&gt; <span class='pl-en'>AddStudentRecordAsync</span>(<span class='pl-en'>Student</span> <span class='pl-en'>student</span>)
	{
		...

		<span class='pl-k'>return</span> <span class='pl-k'>await</span> <span class='pl-k'>this</span>.<span class='pl-smi'>studentRecordsCoordinationService</span>.<span class='pl-en'>AddStudentRecordAsync</span>(<span class='pl-smi'>student</span>);
	}

	...
	...

	<span class='pl-k'>public</span> <span class='pl-k'>async</span> <span class='pl-en'>ValueTask</span>&lt;<span class='pl-en'>Student</span>&gt; <span class='pl-en'>DoSomethingWithStudentAsync</span>(<span class='pl-en'>Student</span> <span class='pl-en'>student</span>)
	{
		...

		<span class='pl-k'>return</span> <span class='pl-k'>await</span> <span class='pl-k'>this</span>.<span class='pl-smi'>anyOtherStudentRelatedCoordinationService</span>.<span class='pl-en'>DoSomethingWithStudentAsync</span>(<span class='pl-smi'>student</span>);
	}
}</pre>
			</div>
			<p dir='auto'>As you can see above, each service is using the Aggregation service as a pass-through. There's
				no need in this scenario whatsoever for an aggregated routines call. This would still be a very valid
				scenario for Aggregation services.</p>
			<h3 dir='auto'><a id='user-content-2424-optionality' class='anchor' aria-hidden='true'
					href='#2424-optionality'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.4.2.4 Optionality</h3>
			<p dir='auto'>It is important to mention here that Aggregation services are optional. Unlike foundation
				services, Aggregation services may or may not exist in any architecture. Aggregation services are there
				to solve a problem with abstraction. This problem may or may not exist based on whether the architecture
				requires a single point of exposure at the border of the core business logic layer or not. This single
				responsibility of Aggregation services makes it much simpler to implement its task and perform its
				function easily. Aggregation services being optional is more likely to be than any other lower-level
				services. Even in the most complex of applications out there.</p>
			<h3 dir='auto'><a id='user-content-2425-routine-level-aggregation' class='anchor' aria-hidden='true'
					href='#2425-routine-level-aggregation'><svg class='octicon octicon-link' viewBox='0 0 16 16'
						version='1.1' width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.4.2.5 Routine-Level Aggregation</h3>
			<p dir='auto'>If an aggregation service has to make two different calls from the same dependency amongst
				other calls, It is recommended to aggregate for every dependency routine. But that's only from
				code-cleanliness perspective and it doesn't necessarily impact the architecture or the end-result in any
				way.</p>
			<div class='highlight highlight-source-cs position-relative overflow-auto'>
				<p dir='auto'>here's an example:</p>

	<pre><span class='pl-k'>public</span> <span class='pl-k'>async</span> <span class='pl-en'>ValueTask</span> <span class='pl-en'>ProcessStudent</span>(<span class='pl-en'>Student</span> <span class='pl-en'>student</span>)
{
	<span class='pl-k'>await</span> <span class='pl-k'>this</span>.<span class='pl-smi'>studentCoordinationService</span>.<span class='pl-en'>AddStudentAsync</span>(<span class='pl-smi'>student</span>);
	<span class='pl-k'>await</span> <span class='pl-en'>ProcessStudentRecordAsync</span>(<span class='pl-smi'>student</span>);
}

<span class='pl-k'>private</span> <span class='pl-k'>async</span> <span class='pl-en'>ValueTask</span> <span class='pl-en'>ProcessStudentRecordAsync</span>(<span class='pl-en'>Student</span> <span class='pl-en'>student</span>)
{
	<span class='pl-k'>await</span> <span class='pl-k'>this</span>.<span class='pl-smi'>studentRecordCoordinationService</span>.<span class='pl-en'>AddStudentRecordAsync</span>(<span class='pl-smi'>student</span>);
	<span class='pl-k'>await</span> <span class='pl-k'>this</span>.<span class='pl-smi'>studentRecordCoordinationService</span>.<span class='pl-en'>NotifyStudentRecordAdminsAsync</span>(<span class='pl-smi'>student</span>);
}
</pre>
			</div>
			<p dir='auto'>This organizational action doesn't warrant any kind of change in terms of testing or
				end-result as previously mentioned.</p>
			<h3 dir='auto'><a id='user-content-2426-pure-dependency-contracts' class='anchor' aria-hidden='true'
					href='#2426-pure-dependency-contracts'><svg class='octicon octicon-link' viewBox='0 0 16 16'
						version='1.1' width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.4.2.6 Pure Dependency Contracts</h3>
			<p dir='auto'>The most important rule/characteristic of an Aggregation service is that its dependencies
				(unlike orchestration services) must share the same contract. The input parameter for a public routine
				in any Aggregation service must be the same for all its dependencies. There may be occasions where a
				dependency may require a student id instead of of the entire student that is permitted with caution as
				long as the partial contract isn't a return type of another call within the same routine.</p>
			<h2 dir='auto'><a id='user-content-243-responsibilities' class='anchor' aria-hidden='true'
					href='#243-responsibilities'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.4.3 Responsibilities</h2>
			<p dir='auto'>Aggregation services main responsibility is to offer a single point of contact between exposer
				components and the rest of the core business logic. But in essence, abstraction is the true value
				Aggregation services offer to ensure any business component as a whole is pluggable into any system
				regardless of the style of exposure this very system may need.</p>
			<p dir='auto'>Let's talk about these responsibilities in detail.</p>
			<h3 dir='auto'><a id='user-content-2430-abstraction' class='anchor' aria-hidden='true'
					href='#2430-abstraction'><svg class='octicon octicon-link' viewBox='0 0 16 16' version='1.1'
						width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.4.3.0 Abstraction</h3>
			<p dir='auto'>An aggregation service performs into responsibility successfully when its clients or consumers
				have no idea what lies beyond the lines of its implementation. An Aggregation service could be combining
				10 different services and exposes a single routine in a fire-n-forget scenario.</p>
			<p dir='auto'>But even in pass-through scenarios, Aggregation services abstract away any identification of
				the underlying dependency from exposers at all costs. It doesn't always happen especially in terms of
				localized exceptions but close enough to make the integration seem as if it is with one single service
				that's offering all the options natively.</p>
				<div class="highlight">
			<h3 dir='auto'><a id='user-content-2431-exceptions-aggregation' class='anchor' aria-hidden='true'
					href='#2431-exceptions-aggregation'><svg class='octicon octicon-link' viewBox='0 0 16 16'
						version='1.1' width='16' height='16' aria-hidden='true'>
						<path fill-rule='evenodd'
							d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'>
						</path>
					</svg></a>2.4.3.1 Exceptions Aggregation</h3>
			<p dir='auto'>Aggregation services are also similar to orchestration-like services in terms of mapping and
				aggregating exceptions from downstream dependencies. For instance, if
				<code>studentCoordinationService</code> is throwing
				<code>StudentCoordinationValidationException</code>an Aggregation service would map that into
				<code>StudentAggregationDependencyValidationException</code>. This falls back into the concept of
				exception unwrapping then wrapping of localized exceptions which we spoke about in detail in section
				2.3.3.0.2 of this Standard.</p>
			</div>
		</article>

		<article class="markdown-body entry-content container-lg" itemprop="text">
			<h1 dir="auto"><a id="user-content-3-exposers" class="anchor" aria-hidden="true" href="#3-exposers"><svg
						class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
						aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3 Exposers</h1>
			<h2 dir="auto"><a id="user-content-30-introduction" class="anchor" aria-hidden="true" href="#30-introduction"><svg
						class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
						aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.0 Introduction</h2>
			<p dir="auto">Exposers are disposable components in any system that has the single responsibility of exposing your
				core business logic functionality by mapping its responses to a certain protocol. For instance, in RESTful
				communications, an API controller would be responsible for returning a <code>200</code> code for a successful
				response. The same thing applies to other protocols such as gRPC or SOAP or any other protocol of communication
				between distributed systems.</p>
			<p dir="auto">Exposer components are similar to Brokers. They are the last point of contact between the core
				business logic and the outside world. They are built with the intent that they will be detached from the current
				system at some point in time to allow the very same core logic to integrate with modern systems, protocols or
				interfaces.</p>
			
			<p align='center' style='padding: 5px;'  dir="auto">
				<a target="_blank" rel="noopener noreferrer"
					href="https://user-images.githubusercontent.com/1453985/147638000-d0896f11-4117-476a-9f22-43d2b5a7d732.png"><img
						src="https://user-images.githubusercontent.com/1453985/147638000-d0896f11-4117-476a-9f22-43d2b5a7d732.png"
						style="max-width: 100%;"></a>
			</p>
			<div class="highlight">
			<h2 dir="auto"><a id="user-content-300-purpose" class="anchor" aria-hidden="true" href="#300-purpose"><svg
						class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
						aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.0.0 Purpose</h2>
			<p dir="auto">In general, exposure components main responsibility is to allow someone or something to interact with
				your business logic. In that core purpose a precise mapping bit by bit to every possible response from your core
				business logic should be communicated cautiously with the consumer to that logic. I say cautiously because
				sometimes certain internal issues in the system are not required to be exposed to the outside world. This
				mapping of responses can usually be a zero effort as the protocol and the language your code business logic
				communicate are the same such as the case with libraries produced to run on the system that use the same
				technologies or programming languages.</p>
			<p dir="auto">But there are occassions where the outside world stateless protocol doesn't necessarily match the same
				value of a response. In which case it becomes an exposer component responsibility to make a successful mapping
				both ways in and out of the system. API controllers are a great example of that. They will communicate a
				<code>4xx</code> issue when there's a validation exception of some type and return a deserialized JSON value if
				the communication was successful. But there are also more details around problem details, error codes and other
				levels of mapping and communication that we will discuss in upcoming chapters within this section.</p>
			</div>
				<h3 dir="auto"><a id="user-content-3000-pure-mapping" class="anchor" aria-hidden="true"
					href="#3000-pure-mapping"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16"
						height="16" aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.0.0.0 Pure Mapping</h3>
			<p dir="auto">The most important aspect of exposure components is that they are not allowed to communicate with
				brokers of any type. And they are not allowed to contain any form of business logic within them. By business
				logic here I mean no sequence of routine calls, no iteration or selection/decision making. The same way it is
				with brokers, they only link an existing realm with the outside realm to achieve a certain value.</p>
			<h2 dir="auto"><a id="user-content-301-types-of-exposure-components" class="anchor" aria-hidden="true"
					href="#301-types-of-exposure-components"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1"
						width="16" height="16" aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.0.1 Types of Exposure Components</h2>
			<p dir="auto">Exposure components have three different types. Which are either communication protocols, user
				interfaces or simply an IO routine. Let's talk about those breifly.</p>
		<div class="highlight">
				<h3 dir="auto"><a id="user-content-3010-communication-protocols" class="anchor" aria-hidden="true"
					href="#3010-communication-protocols"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1"
						width="16" height="16" aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.0.1.0 Communication Protocols</h3>
			<p dir="auto">An exposure component that is a communication protocol can vary from simple RESTful APIs, to SOAP
				communication or gRPC. They can also be a simple client in a library where consumers would just install the
				library in their projects and consume your core logic through the client APIs. These examples are all of the
				same type of exposure components.</p>
			<p dir="auto">The differentiator here is that a communication protocol is usually event-based. Triggered by an
				incoming communication and treated with a response of any kind. Communication protocols are usually for
				system-to-system integrations but they can be accessible and understandble by humans for testing and debugging
				purposes.</p>
			</div>
				<div class="highlight">
			<h3 dir="auto"><a id="user-content-3011-user-interfaces" class="anchor" aria-hidden="true"
					href="#3011-user-interfaces"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16"
						height="16" aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.0.1.1 User Interfaces</h3>
			<p dir="auto">Another type of exposer components are user interfaces. This can vary from Web, mobile or desktop
				applications including simple command lines. They mainly target end-users for communication but can be automated
				by other systems. Especially with command line user interfaces.In this day and age, user interfaces can also
				include virtual and augmented realities, metaverses and any other form of software.</p>
			<p dir="auto">There are occasions where Human-Machine-Interfaces (HMI) can also fall into that level of exposure
				components. For instance, the buttons on a cellphone, keyboards we use everyday and any form of hardware that
				can interact directly with core business logic interfaces as an exposure component. The same theory applies to
				the Internet of Things (IoT) components and many others where a human has to utilize a component to leverage a
				certain capability to their own advantage in anyway.</p>
			</div>
			<h3 dir="auto"><a id="user-content-3012-io-components" class="anchor" aria-hidden="true"
					href="#3012-io-components"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16"
						height="16" aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.0.1.2 I/O Components</h3>
			<p dir="auto">Some exposure components are not necessarily a system interfacing with another system. Neither they
				are purposed to communicate with humans. They are daemons or IO based components that do something in the
				background without a trigger. usually these components are time-based and they may leverage existing protocols
				or just simply interface directly with the core business logic which are both viable options.</p>
			<div class="highlight">

				<h2 dir="auto"><a id="user-content-302-single-point-of-contact" class="anchor" aria-hidden="true"
					href="#302-single-point-of-contact"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1"
						width="16" height="16" aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.0.2 Single Point of Contact</h2>
			<p dir="auto">Exposure components are only allowed to communicate with one and only one service. Integrating with
				multiple services would turn an exposure component into either orchestration or aggregation services which are
				both not allowed to exist as core logic in that realm of exposure.</p>
			<p dir="auto">The single point of contact rule also ensures the ease of disposability of the exposure component
				itself. It ensures the integration is simple and single-purposed enough with controlled dependencies (only one)
				that it can be rewired to virtually any protocol at any point in time with the least cost possible.</p>				
			</div>
				<div class="highlight highlight-source-cs position-relative overflow-auto">
				<h2 dir="auto"><a id="user-content-303-examples" class="anchor" aria-hidden="true" href="#303-examples"><svg
					class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
					aria-hidden="true">
					<path fill-rule="evenodd"
						d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
					</path>
				</svg></a>3.0.3 Examples</h2>
		<p dir="auto">Let's take API controllers as an example for a real-world exposure component in any given system.</p>
<pre>[<span class="pl-en">HttpPost</span>]
<span class="pl-k">public</span> <span class="pl-k">async</span> <span class="pl-en">ValueTask</span>&lt;<span class="pl-en">ActionResult</span>&lt;<span class="pl-en">Student</span>&gt;&gt; <span class="pl-en">PostStudentAsync</span>(<span class="pl-en">Student</span> <span class="pl-en">student</span>)
{
	<span class="pl-k">try</span>
	{
		<span class="pl-en">Student</span> <span class="pl-en">registeredStudent</span> <span class="pl-k">=</span>
			<span class="pl-k">await</span> <span class="pl-k">this</span>.<span class="pl-smi">studentService</span>.<span class="pl-en">RegisterStudentAsync</span>(<span class="pl-smi">student</span>);

		<span class="pl-k">return</span> <span class="pl-en">Created</span>(<span class="pl-smi">registeredStudent</span>);
	}
	<span class="pl-k">catch</span> (<span class="pl-en">StudentValidationException</span> <span class="pl-en">studentValidationException</span>)
		<span class="pl-k">when</span> (<span class="pl-smi">studentValidationException</span>.<span class="pl-smi">InnerException</span> <span class="pl-k">is</span> <span class="pl-en">AlreadyExistsStudentException</span>)
	{
		<span class="pl-k">return</span> <span class="pl-en">Conflict</span>(<span class="pl-smi">studentValidationException</span>.<span class="pl-smi">InnerException</span>);
	}
	<span class="pl-k">catch</span> (<span class="pl-en">StudentValidationException</span> <span class="pl-en">studentValidationException</span>)
	{
		<span class="pl-k">return</span> <span class="pl-en">BadRequest</span>(<span class="pl-smi">studentValidationException</span>.<span class="pl-smi">InnerException</span>);
	}
	<span class="pl-k">catch</span> (<span class="pl-en">StudentDependencyException</span> <span class="pl-en">studentDependencyException</span>)
	{
		<span class="pl-k">return</span> <span class="pl-en">InternalServerError</span>(<span class="pl-smi">studentDependencyException</span>);
	}
	<span class="pl-k">catch</span> (<span class="pl-en">StudentServiceException</span> <span class="pl-en">studentServiceException</span>)
	{
		<span class="pl-k">return</span> <span class="pl-en">InternalServerError</span>(<span class="pl-smi">studentServiceException</span>);
	}
}
</pre> 
			</div>
			<p dir="auto">The code snippet above is for an API method that <code>POST</code> a student model into the core
				business logic of a schooling system (OtripleS). In a technology like ASP.NET, controllers take care of handling
				mapping incoming JSON request into the <code>Student</code> model so the controller can utilize that model with
				an integrated system.</p>
			<p dir="auto">However, you will also see the controller code tries to map every possible categorical exception into
				it's respective REST protocol. This is just a simple snippet to show what an exposure component may look like.
				But we will talk more about the rules and conditions for controllers in the next chapter in The Standard.</p>
		<div class="highlight">
				<h2 dir="auto"><a id="user-content-304-summary" class="anchor" aria-hidden="true" href="#304-summary"><svg
						class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
						aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.0.4 Summary</h2>
			<p dir="auto">In summary, exposure components are very thin layer that doesn't contain any intelligence or logic in
				it. it is not meant to orchestrate, or call multiple core business logic services. And it only focuses on the
				duplex mapping aspect of the communication between one system and another.</p>
			</div>
		</article>
		<article class="markdown-body entry-content container-lg" itemprop="text">
			<h1 dir="auto"><a id="user-content-31-communication-protocols" class="anchor" aria-hidden="true"
					href="#31-communication-protocols"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1"
						width="16" height="16" aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.1 Communication Protocols</h1>
			<h2 dir="auto"><a id="user-content-310-introduction" class="anchor" aria-hidden="true" href="#310-introduction"><svg
						class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
						aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.1.0 Introduction</h2>
			<p dir="auto">In the exposure realm, one of the most common methodologies to build a communication structure between
				several system is to use a communication protocol. These protocols have evolved over the years from SOAP to REST
				to so many other communication protocols and principles that manifested their own technologies to accomplish
				exposing APIs to distributed systems.</p>
			<p dir="auto">In the .NET world, technology has evolved with the evolution of architecture from SOA with WCF to
				Microservices with REST. The evolution continues but the principles change less often. In these upcoming
				chapters we will be discussing the most common communication protocols with a standardized way to implementing
				them for an enterprise-level applications.</p>
			<h3 dir="auto"><a id="user-content-3100-principles--rules" class="anchor" aria-hidden="true"
					href="#3100-principles--rules"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1"
						width="16" height="16" aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.1.0.0 Principles &amp; Rules</h3>
			<p dir="auto">Communication protocols are required to accomplish two things when integrating with core business
				logic. Results communication and Error reporting. Let's talk about those briefly:</p>
			<h4 dir="auto"><a id="user-content-31000-results-communication" class="anchor" aria-hidden="true"
					href="#31000-results-communication"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1"
						width="16" height="16" aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.1.0.0.0 Results Communication</h4>
			<p dir="auto">Any communication protocol is required to satisfy the principle of returning core business logic
				result. This result can be serialized into some unified language like <code>JSON</code> or simply be
				communicated as is. In the case of API libraries there is usually no need to serialize and deserialize data. But
				that comes with the limitation that only technologies that can integrate with these libraries can actually
				benefit from it.</p>
			<p dir="auto">Communicating results may also be encapsulated with a status of some kind. In the case of RESTful API
				communications a <code>200</code> code can accompany the returned serialized <code>JSON</code> result. These
				codes allow the consumers to understand the next course of action. Some <code>2xx</code> results may require a
				delayed action if the response is just <code>Accepted</code> but not necessarily <code>Created</code>.</p>
		<div class="highlight">
				<h4 dir="auto"><a id="user-content-31001-error-reports" class="anchor" aria-hidden="true"
					href="#31001-error-reports"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16"
						height="16" aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.1.0.0.1 Error Reports</h4>
			<p dir="auto">If the core business logic is expected to provide a detailed report of all the validation errors for
				instance that occurred in a particular request. It is the responsibility of the communication protocols to
				represent these error reports either in their original form as is, or serialize the report in a language that is
				easily deserializable and convertable back into the Exception original form on the client side.</p>
			<p dir="auto">Error reports shall also have their own codes in case they are serialized so the client knows what the
				next course of action is. It is highly recommend to follow a standardized way of communicating errors with
				documentation preferably to help guide consumers to develop the best clients for these APIs.</p>
			<h3 dir="auto"><a id="user-content-3101-common-types" class="anchor" aria-hidden="true"
					href="#3101-common-types"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16"
						height="16" aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.1.0.1 Common Types</h3>
			<p dir="auto">Let's explore some of the most common types of communication protocols in this section.</p>
		</div>
			<h4 dir="auto"><a id="user-content-31010-rest" class="anchor" aria-hidden="true" href="#31010-rest"><svg
						class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
						aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.1.0.1.0 REST</h4>
			<p dir="auto">At the time of authoring this Standard, RESTful APIs are the most common form of communication between
				distributed systems. REST is a Representational state transfer protocol with certain constraints that
				specifically defines the form of communication, error reporting and its very stateless nature. RESTful APIs are
				technology agnostic. They can be implemented by any technology or a programming language but they allow these
				technologies to communicate with each other statelessly without any hard dependency on the server or the client
				choice of technology.</p>
			<h4 dir="auto"><a id="user-content-31011-libraries" class="anchor" aria-hidden="true" href="#31011-libraries"><svg
						class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
						aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.1.0.1.1 Libraries</h4>
			<p dir="auto">The other most common communication protocol is APIs implemented within libraries. For instance, nuget
				packages are published and distributed libraries that allow developers to leverage a localized core business
				logic or communicate with an external resource to achieve a certain goal.</p>
			<h4 dir="auto"><a id="user-content-31012-other-types" class="anchor" aria-hidden="true"
					href="#31012-other-types"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16"
						height="16" aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.1.0.1.2 Other Types</h4>
			<p dir="auto">There are several other types of communication protocols. Some of them are older and some others are
				about to present themselves in the software industry. These types are like SOAP with manifestations like WCF and
				gRPC, GraphQL and several other protocols.</p>
			<p dir="auto">We will be mainly focusing on RESTful APIs as a more common communication protocols with a brief touch
				on Libraries. And as we evolve and learn further so will our Standard which will include more and more different
				communication protocols and evolve in terms of patterns as well.</p>
			<p dir="auto">Let's get started with RESTful APIs as a communication protocol and dive deeper into the different
				aspect of that exposer component.</p>
		</article>
		<article class="markdown-body entry-content container-lg" itemprop="text">
			<h1 dir="auto"><a id="user-content-311-restful-apis" class="anchor" aria-hidden="true" href="#311-restful-apis"><svg
						class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
						aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.1.1 RESTful APIs</h1>
			<h2 dir="auto"><a id="user-content-3110-introduction" class="anchor" aria-hidden="true"
					href="#3110-introduction"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16"
						height="16" aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.1.1.0 Introduction</h2>
			<p dir="auto">RESTful API controllers are a liaison between the core business logic layer and the outside world.
				They sit on the other side of the core business realm of any application. In a way, API Controllers are just
				like Brokers. They ensure a successful integration between our core logic and the rest of the world.</p>
			<h2 dir="auto"><a id="user-content-3111-on-the-map" class="anchor" aria-hidden="true" href="#3111-on-the-map"><svg
						class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
						aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.1.1.1 On the Map</h2>
			<p dir="auto">Controllers sit at the edge of any system. Regardless whether this system is a monolithic platform or
				simple microservice. API controllers today even apply to smaller lambdas or cloud functions. They play the role
				of a trigger to access these resources in any system through REST.</p>
			
			<div align='center' style='padding: 5px;'  dir="auto">
				<a target="_blank" rel="noopener noreferrer"
					href="https://user-images.githubusercontent.com/1453985/147741682-63434be5-3122-4484-b9a1-fd013f18b1b0.png"><img
						src="https://user-images.githubusercontent.com/1453985/147741682-63434be5-3122-4484-b9a1-fd013f18b1b0.png"
						style="max-width: 100%;"></a>
			</div>
			
			<p dir="auto">The consumer side of controllers can vary. In production systems these consumers can be other services
				requiring data from a particular API endpoint. They can be libraries built as wrappers around the controller
				APIs to provide a local resource with external data. But consumers can also be just engineers testing endpoints,
				validating their behaviors through swagger documents.</p>
				<div class="highlight">			<h2 dir="auto"><a id="user-content-3112-characteristics" class="anchor" aria-hidden="true"
					href="#3112-characteristics"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16"
						height="16" aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.1.1.2 Characteristics</h2>
			<p dir="auto">There are several rules and principles that govern the implementation of RESTful API endpoints. Let's
				discuss those here.</p>
			<h3 dir="auto"><a id="user-content-31120-language" class="anchor" aria-hidden="true" href="#31120-language"><svg
						class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
						aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.1.1.2.0 Language</h3>
			<p dir="auto">Controllers speak a different language when it comes to implementing their methods as compared to
				services and brokers. For instance, if a broker that interfaces with a storage uses a language such as
				<code>InsertStudentAsync</code>, and its corresponding service implementation uses something like
				<code>AddStudentAsync</code> the controller equivalent will be using RESTful language such as
				<code>PostStudentAsync</code>.</p>
			<p dir="auto">There are only a handful of terminologies a controller would use to express a certain operation. Let's
				draw the map here for clarity:</p>
			
				<table>
				<thead>
					<tr>
						<th>Controllers</th>
						<th>Services</th>
						<th>Brokers</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td>Post</td>
						<td>Add</td>
						<td>Insert</td>
					</tr>
					<tr>
						<td>Get</td>
						<td>Retrieve</td>
						<td>Select</td>
					</tr>
					<tr>
						<td>Put</td>
						<td>Modify</td>
						<td>Update</td>
					</tr>
					<tr>
						<td>Delete</td>
						<td>Remove</td>
						<td>Delete</td>
					</tr>
				</tbody>
			</table>
			<p dir="auto">The language controllers speak is called Http Verbs. Their range are wider than the aforementioned
				CRUD operations. For instance, there is PATCH which allows API consumers to update only portions of a particular
				document. PATCH is rarely used today from my experience in productionized applications. But I may specialize a
				special section for them at some point in time in future versions of The Standard.</p>
			</div>
			<h4 dir="auto"><a id="user-content-311200-beyond-crud-routines" class="anchor" aria-hidden="true"
					href="#311200-beyond-crud-routines"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1"
						width="16" height="16" aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.1.1.2.0.0 Beyond CRUD Routines</h4>
			<p dir="auto">But as we mentioned before, controller can interface with more than just a foundation service. They
				can interface with higher-order business logic function. For instance, a processing service may offer an
				<code>Upsert</code> routine. In which case a typical Http Verb wouldn't be able to satisfy a combinational
				routine such as an <code>Upsert</code>. In which case we resolve to the intial state of <code>Post</code>
				assuming the resource doesn't exist.</p>
			<p dir="auto">It may become useful to notify our consumers if we decided to modify instead of add which operation we
				decided to go with. But that's a case by case implementation and more often than ever, consumers don't really
				care to learn that piece of information. The same idea applies to other languages non-foundation services may
				use. Such as <code>Process</code> or <code>Calculate</code> or any other business-specific language higher or
				hyper advanced order services may choose.</p>
			<div class="highlight highlight-source-cs position-relative overflow-auto">
				<h4 dir="auto"><a id="user-content-311201-similar-verbs" class="anchor" aria-hidden="true"
					href="#311201-similar-verbs"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16"
						height="16" aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.1.1.2.0.1 Similar Verbs</h4>
			<p dir="auto">Sometimes, especially with basic CRUD operations, you will need the same Http Verb to describe two
				different routines. For instnace, integrating with both <code>RetrieveById</code> and <code>RetrieveAll</code>
				both resolve to a <code>Get</code> operation on the RESTful realm. In which case each function will have a
				different name, while maintainig the same verb as follows:</p>
<pre>[<span class="pl-en">HttpGet</span>]
<span class="pl-k">public</span> <span class="pl-en">ActionResult</span>&lt;<span class="pl-en">IQueryable</span>&lt;<span class="pl-en">Student</span>&gt;&gt; <span class="pl-en">GetAllStudents</span>()
{
	...
}

[<span class="pl-en">HttpGet</span>(<span class="pl-s"><span class="pl-pds">"</span>{studentId}<span class="pl-pds">"</span></span>)]
<span class="pl-k">public</span> <span class="pl-k">async</span> <span class="pl-en">ValueTask</span>&lt;<span class="pl-en">ActionResult</span>&lt;<span class="pl-en">Student</span>&gt;&gt; <span class="pl-en">GetStudentByIdAsync</span>(<span class="pl-en">Guid</span> <span class="pl-en">studentId</span>)
{
	...
}</pre> 
			</div>
			<p dir="auto">As you can see above, the differentiator here is both the function name <code>GetAllStudents</code>
				versus <code>GetStudentByIdAsync</code> but also the <code>Route</code> at the same time. We will discuss routes
				shortly, but the main aspect here is the ability to implement multiple routines with different names even if
				they resolve to the same Http Verb.</p>
			<h4 dir="auto"><a id="user-content-311202-routes-conventions" class="anchor" aria-hidden="true"
					href="#311202-routes-conventions"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1"
						width="16" height="16" aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.1.1.2.0.2 Routes Conventions</h4>
			<p dir="auto">RESTful API controllers are accessible through routes. a route is simply a url that is used combined
				with an Http Verb so the system knows which routine it needs to call to match that route. For instance, if I
				need to retrieve a student with Id <code>123</code> then my api route would be as follows:
				<code>api/students/123</code>. And if I want to retrieve all the students in some system, I could just call
				<code>api/students</code> with <code>GET</code> verb.</p>
			<h5 dir="auto"><a id="user-content-3112020-controller-routes" class="anchor" aria-hidden="true"
					href="#3112020-controller-routes"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1"
						width="16" height="16" aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.1.1.2.0.2.0 Controller Routes</h5>
			<p dir="auto">The controller class in a simple ASP.NET application can be simply setup at the top of the controller
				class declaration with a decoration as follows:</p>
			<div class="highlight highlight-source-cs position-relative overflow-auto">
<pre>[<span class="pl-en">ApiController</span>]
[<span class="pl-en">Route</span>(<span class="pl-s"><span class="pl-pds">"</span>api/[controller]<span class="pl-pds">"</span></span>)]
<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">StudentsController</span>
{
	...
}</pre> 
			</div>
			<p dir="auto">The route there is a template that defines the endpoint to start with <code>api</code> and trailed by
				omitting the term "Controller" from the class name. So <code>StudentsController</code> would endup being
				<code>api/students</code>. It's important that all controllers should have a plural version of the contract they
				are serving. Unlike services where we say <code>StudentService</code> controllers would be the plural version
				with <code>StudentsController</code>.</p>			
			<div class="highlight highlight-source-cs position-relative overflow-auto">
			<h5 dir="auto"><a id="user-content-3112021-routine-routes" class="anchor" aria-hidden="true"
				href="#3112021-routine-routes"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1"
					width="16" height="16" aria-hidden="true">
					<path fill-rule="evenodd"
						d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
					</path>
				</svg></a>3.1.1.2.0.2.1 Routine Routes</h5>
		<p dir="auto">The same idea applies to methods within the controller class. As we say in the code snippet above, we
			decorated <code>GetStudentByIdAsync</code> have had an <code>HttpGet</code> decoration with a particular route
			identified to append to the existing controller overall route. For instance if the controller route is
			<code>api/students</code>, a routine with <code>HttpGet("{studentId})</code> would result in a route that looks
			like this: <code>api/students/{studentId}</code>.</p>
		<p dir="auto">The <code>studentId</code> then would be mapped in as an input parameter variable that <em>must</em>
			match the variable defined in the route as follows:</p>
<pre>[<span class="pl-en">HttpGet</span>(<span class="pl-s"><span class="pl-pds">"</span>{studentId}<span class="pl-pds">"</span></span>)]
<span class="pl-k">public</span> <span class="pl-k">async</span> <span class="pl-en">ValueTask</span>&lt;<span class="pl-en">ActionResult</span>&lt;<span class="pl-en">Student</span>&gt;&gt; <span class="pl-en">GetStudentByIdAsync</span>(<span class="pl-en">Guid</span> <span class="pl-en">studentId</span>)
{
	...
}</pre> 
			</div>
			<p dir="auto">But sometimes these routes are not just url parameters. Sometimes they contain a request within them.
				For instance, let's say we want to post a library card against a particular student record. Our endpoint would
				look something like this: <code>api/students/{studentId}/librarycards</code> with a <code>POST</code> verb. In
				this case we have to distinguish between these two input parameters with proper naming as follows:</p>
			<div class="highlight highlight-source-cs position-relative overflow-auto">
<pre>[<span class="pl-en">HttpPost</span>(<span class="pl-s"><span class="pl-pds">"</span>{studentId}/librarycards<span class="pl-pds">"</span></span>)]
<span class="pl-k">public</span> <span class="pl-k">async</span> <span class="pl-en">ValueTask</span>&lt;<span class="pl-en">ActionResult</span>&lt;<span class="pl-en">LibraryCard</span>&gt;&gt; <span class="pl-en">PostLibraryCardAsync</span>(<span class="pl-en">Guid</span> <span class="pl-en">studentId</span>, <span class="pl-en">LibraryCard</span> <span class="pl-en">libraryCard</span>)
{
	...
}</pre> 
			</div>
			<h5 dir="auto"><a id="user-content-3112022-plural-singular-plural" class="anchor" aria-hidden="true"
					href="#3112022-plural-singular-plural"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1"
						width="16" height="16" aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.1.1.2.0.2.2 Plural Singular Plural</h5>
			<p dir="auto">When defining routes in a RESTful API, it is important to follow the global naming conventions for
				these routes. The general rule is to access a collection of resources, then target a particular entity, then
				again acess a collection of resources within that entity and so on and so forth. For instance, in the library
				card example above <code>api/students/{studentId}/librarycards/{librarycardId}</code> you can see we started by
				accessing all students, then targetted a student with a particular id, then we wanted to access all library
				cards attached to that student then target a very particular card by referencing its id.</p>
			<p dir="auto">That convention works perfectly in one-to-many relationships. But what about one-to-one relationships?
				Let's assume a student may have one and only one library card at all times. In which case our route would still
				look something like this: <code>api/students/{studentId}/librarycards</code> with a <code>POST</code> verb, and
				an error would occur as <code>CONFLICT</code> if a card is already in place regardless whether the Ids match or
				not.</p>	
			<div class="highlight highlight-source-cs position-relative overflow-auto">
				<h5 dir="auto"><a id="user-content-3112022-query-parameters--odata" class="anchor" aria-hidden="true"
					href="#3112022-query-parameters--odata"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1"
						width="16" height="16" aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.1.1.2.0.2.2 Query Parameters &amp; OData</h5>
			<p dir="auto">But the route I recommend is the flat-model route. Where every resource lives on it's own with it's
				own unique routes. In our case here pulling a library card for a particular student would be as follows:
				<code>api/librarycards?studentId={studentId}</code> or simply use a slightly advanced global technology such as
				OData where the query would just be <code>api/librarycards?$filter=studentId eq '123'</code>.</p>
				<p dir="auto">Here's an example of implementing basic query parameters:</p>
<pre>[<span class="pl-en">HttpPost</span>()]
<span class="pl-k">public</span> <span class="pl-k">async</span> <span class="pl-en">ValueTask</span>&lt;<span class="pl-en">ActionResult</span>&lt;<span class="pl-en">LibraryCard</span>&gt;&gt; <span class="pl-en">PostLibraryCardAsync</span>(<span class="pl-en">Guid</span> <span class="pl-en">studentId</span>, <span class="pl-en">LibraryCard</span> <span class="pl-en">libraryCard</span>)
{
	...
}</pre> 
			</div>
			<p dir="auto">On the OData side, an implementation would be as follows:</p>
			<div class="highlight highlight-source-cs position-relative overflow-auto">
<pre>[<span class="pl-en">HttGet</span>]
[<span class="pl-en">EnableQuery</span>]
<span class="pl-k">public</span> <span class="pl-k">async</span> <span class="pl-en">ValueTask</span>&lt;<span class="pl-en">IQueryable</span>&lt;<span class="pl-en">LibraryCard</span>&gt;&gt; <span class="pl-en">GetAllLibraryCards</span>()
{
	...
}</pre> 
			</div>
			<p dir="auto">The same idea applies to <code>POST</code> for a model. instead of posting towards:
				<code>api/students/{studentId}/librarycards</code> - we can leverage the contract itself to post against
				<code>api/librarycards</code> with a model that contains the student id within. This flat-route idea can
				simplify the implementation and aligns perfectly with the overall theme of The Standard. Keeping things simple.
			</p>
			<h3 dir="auto"><a id="user-content-31121-codes--responses" class="anchor" aria-hidden="true"
					href="#31121-codes--responses"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1"
						width="16" height="16" aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.1.1.2.1 Codes &amp; Responses</h3>
			<p dir="auto">Responses from an API controller must be mapped towards codes and responses. For instance, if we are
				trying to add a new student to a schooling system. We are going to <code>POST</code> student and in retrun we
				receive the same body we submitted with a status code <code>201</code> which means the resoruce has been
				<code>Created</code>.</p>
			<p dir="auto">There are three main categories where responses can fall into. The first is the success category.
				Where both the user and the server have done their part and the request has succeeded. The second category is
				the User Error Codes, where the user request has an issue of any type. In which case a <code>4xx</code> code
				will be returned with detailed error message to help users fix their requests for perform a successful
				operation. The third case is the System Error Codes, where the system has run into an issue of any type internal
				or external and it needs to communicate a <code>5xx</code> code to indicate to the user that something
				internally have gone wrong with the system and they need to contact support.</p>
			<p dir="auto">Let's talk about those codes and their scenarios in details here.</p>
			<div class="highlight">
			<h4 dir="auto"><a id="user-content-311210-success-codes-2xx" class="anchor" aria-hidden="true"
					href="#311210-success-codes-2xx"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1"
						width="16" height="16" aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.1.1.2.1.0 Success Codes (2xx)</h4>
			<p dir="auto">Success codes either indicates a resource has been created, updated, deleted or retreived. And some
				cases it indicates that a request has been submitted successfully in an eventual-consistency manner that may or
				may not succeed in the future. Here's the details for each:</p>
			<table>
				<thead>
					<tr>
						<th>Code</th>
						<th>Method</th>
						<th>Details</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td>200</td>
						<td>Ok</td>
						<td>Used for successful GET, PUT and DELETE operations.</td>
					</tr>
					<tr>
						<td>201</td>
						<td>Created</td>
						<td>Used for successful POST operations</td>
					</tr>
					<tr>
						<td>202</td>
						<td>Accepted</td>
						<td>Used for request that was delegated but may or may not succeed</td>
					</tr>
				</tbody>
			</table>
			<p dir="auto">Here's some examples for each:</p>
			<p dir="auto">In a retrieve non-post scenario, it's more befitting to return an <code>Ok</code> status code as
				follows:</p>
			<div class="highlight highlight-source-cs position-relative overflow-auto">
<pre>[<span class="pl-en">HttpGet</span>(<span class="pl-s"><span class="pl-pds">"</span>{studentId}<span class="pl-pds">"</span></span>)]
<span class="pl-k">public</span> <span class="pl-k">async</span> <span class="pl-en">ValueTask</span>&lt;<span class="pl-en">ActionResult</span>&lt;<span class="pl-en">Student</span>&gt;&gt; <span class="pl-en">GetStudentByIdAsync</span>(<span class="pl-en">Guid</span> <span class="pl-en">studentId</span>)
{
	<span class="pl-en">Student</span> <span class="pl-en">retrievedStudent</span> <span class="pl-k">=</span> 
		<span class="pl-k">await</span> <span class="pl-k">this</span>.<span class="pl-smi">studentService</span>.<span class="pl-en">RetrieveStudentByIdAsync</span>(<span class="pl-smi">studentId</span>);

	<span class="pl-k">return</span> <span class="pl-en">Ok</span>(<span class="pl-smi">retrievedStudent</span>);
}</pre> 
			</div>
			<p dir="auto">But in a scenario where we have to create a resource, a <code>Created</code> is more befitting for
				this case as follows:</p>
			<div class="highlight highlight-source-cs position-relative overflow-auto">
<pre>[<span class="pl-en">HttpPost</span>)]
<span class="pl-k">public</span> <span class="pl-k">async</span> <span class="pl-en">ValueTask</span>&lt;<span class="pl-en">ActionResult</span>&lt;<span class="pl-en">Student</span>&gt;&gt; <span class="pl-en">PostStudentAsync</span>(<span class="pl-en">Student</span> <span class="pl-en">student</span>)
{
	<span class="pl-en">Student</span> <span class="pl-en">retrievedStudent</span> <span class="pl-k">=</span> 
		<span class="pl-k">await</span> <span class="pl-k">this</span>.<span class="pl-smi">studentService</span>.<span class="pl-en">AddStudentAsync</span>(<span class="pl-smi">student</span>);

	<span class="pl-k">return</span> <span class="pl-en">Created</span>(<span class="pl-smi">student</span>);
}</pre> 
			</div>
			<p dir="auto">In eventual consistency cases, where a resource posted isn't really persisted yet, we enqueue the
				request and return an <code>Accepted</code> status to indicate a process will start:</p>
			<div class="highlight highlight-source-cs position-relative overflow-auto">
<pre>[<span class="pl-en">HttpPost</span>)]
<span class="pl-k">public</span> <span class="pl-k">async</span> <span class="pl-en">ValueTask</span>&lt;<span class="pl-en">ActionResult</span>&lt;<span class="pl-en">Student</span>&gt;&gt; <span class="pl-en">PostStudentAsync</span>(<span class="pl-en">Student</span> <span class="pl-en">student</span>)
{
	<span class="pl-en">Student</span> <span class="pl-en">retrievedStudent</span> <span class="pl-k">=</span> 
		<span class="pl-k">await</span> <span class="pl-k">this</span>.<span class="pl-smi">studentEventService</span>.<span class="pl-en">EnqueueStudentEventAsync</span>(<span class="pl-smi">student</span>);

	<span class="pl-k">return</span> <span class="pl-en">Accepted</span>(<span class="pl-smi">student</span>);
}</pre> 
			</div>
			<p dir="auto">The Standard rule for eventual consistency scenarios is to ensure the submitter has a token of some
				type so requestors can inquire about the status of their request with a different API call. We will discuss
				these patterns in a different book called The Standard Architecture.</p>
			</div>
			<div class="highlight highlight-source-cs position-relative overflow-auto">
				<h4 dir="auto"><a id="user-content-311211-user-error-codes-4xx" class="anchor" aria-hidden="true"
					href="#311211-user-error-codes-4xx"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1"
						width="16" height="16" aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.1.1.2.1.1 User Error Codes (4xx)</h4>
			<p dir="auto">This is the second category of API responses. Where a user request has an issue in it and the system
				is required to help the user understand why their request was not successful. For instance, assume a client is
				submitting a new student to a schooling system. If the student Id is invalid a <code>400</code> or
				<code>Bad Request</code> code should be returned with a problem detail that explains what exactly is the reason
				for the failure of the request.</p>
				<p dir="auto">Controllers are responsible for mapping the core layer categorical exceptions into proper status
					codes. Here's an example:</p>
<pre>[<span class="pl-en">HttpGet</span>(<span class="pl-s"><span class="pl-pds">"</span>{studentId}<span class="pl-pds">"</span></span>)]
<span class="pl-k">public</span> <span class="pl-k">async</span> <span class="pl-en">ValueTask</span>&lt;<span class="pl-en">ActionResult</span>&lt;<span class="pl-en">Student</span>&gt;&gt; <span class="pl-en">GetStudentByIdAsync</span>(<span class="pl-en">Guid</span> <span class="pl-en">studentId</span>)
{
	<span class="pl-k">try</span>
	{
		...
	}
	<span class="pl-k">catch</span> (<span class="pl-en">StudentValidationException</span> <span class="pl-en">studentValidationException</span>)
	{
		<span class="pl-k">return</span> <span class="pl-en">BadRequest</span>(<span class="pl-smi">studentValidationException</span>.<span class="pl-smi">InnerException</span>)
	}
}</pre> 
			</div>
			<p dir="auto">So as shown in this code snippet, we caught a categorical validation exception and mapped it into a
				<code>400</code> error code which is <code>BadRequest</code>. The access to inner exception here is for the
				purpose of extracting a problem detail out of the <code>Data</code> property on the inner exception which
				contains all the dictionary values of the error report.</p>
			<p dir="auto">But sometimes controllers have to dig deeper. Catching a particular local exception not just the
				categorical. For instance, say we want to handle <code>NotFoundStudentException</code> with an error code
				<code>404</code> or <code>NotFound</code>. Here's how we would accomplish that:</p>
			<div class="highlight highlight-source-cs position-relative overflow-auto">
<pre>[<span class="pl-en">HttpGet</span>(<span class="pl-s"><span class="pl-pds">"</span>{studentId}<span class="pl-pds">"</span></span>)]
<span class="pl-k">public</span> <span class="pl-k">async</span> <span class="pl-en">ValueTask</span>&lt;<span class="pl-en">ActionResult</span>&lt;<span class="pl-en">Student</span>&gt;&gt; <span class="pl-en">GetStudentByIdAsync</span>(<span class="pl-en">Guid</span> <span class="pl-en">studentId</span>)
{
	<span class="pl-k">try</span>
	{
		...
	}
	<span class="pl-k">catch</span> (<span class="pl-en">StudentValidationException</span> <span class="pl-en">studentValidationException</span>)
		(<span class="pl-en">when</span> <span class="pl-en">studentValidationException</span>.<span class="pl-en">InnerException</span> <span class="pl-en">is</span> <span class="pl-en">NotFoundStudentException</span>)
	{
		<span class="pl-k">return</span> <span class="pl-en">NotFound</span>(<span class="pl-smi">studentValidationException</span>.<span class="pl-smi">InnerException</span>)
	}
}</pre> 
			</div>
			<p dir="auto">In the code snippet above, we had to examine the inner exception type to validate the localized
				exception from within. This is the advantage of the unwrapping and wrapping process we discussed in section
				2.3.3.0.2 of The Standard. Controller may examine multiple types within the same block as well as follows:</p>
			<div class="highlight highlight-source-cs position-relative overflow-auto">
<pre>    ...
<span class="pl-k">catch</span> (<span class="pl-en">StudentCoordinationDependencyValidationException</span> <span class="pl-en">studentCoordinationDependencyValidationException</span>)
	(<span class="pl-en">when</span> <span class="pl-en">studentValidationException</span>.<span class="pl-en">InnerException</span> 
		<span class="pl-en">is</span> <span class="pl-en">NotFoundStudentException</span>
		<span class="pl-en">or</span> <span class="pl-en">NotFoundLibraryCardException</span>
		<span class="pl-en">or</span> <span class="pl-en">NotFoundStudentContactException</span>)
{
	<span class="pl-k">return</span> <span class="pl-en">NotFound</span>(<span class="pl-smi">studentValidationException</span>.<span class="pl-smi">InnerException</span>)
}
...</pre> 
			</div>
			<p dir="auto">With that in mind, let's detail the most common mappings from exceptions to codes:</p>
			<table>
				<thead>
					<tr>
						<th>Code</th>
						<th>Method</th>
						<th>Exception</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td>400</td>
						<td>BadRequest</td>
						<td>ValidationException or DependencyValidationException</td>
					</tr>
					<tr>
						<td>404</td>
						<td>NotFound</td>
						<td>NotFoundException</td>
					</tr>
					<tr>
						<td>409</td>
						<td>Conflict</td>
						<td>AlreadyExistException</td>
					</tr>
					<tr>
						<td>423</td>
						<td>Locked</td>
						<td>LockedException</td>
					</tr>
					<tr>
						<td>424</td>
						<td>FailedDependency</td>
						<td>InvalidReferenceException</td>
					</tr>
				</tbody>
			</table>
			<p dir="auto">There are more <code>4xx</code> status codes out there. But As of this very moment they can either be
				automatically generated by the web framework like in ASP.NET or there are no useful scenarios for them yet. For
				instance, a <code>401</code> or <code>Unauthorized</code> error can be automatically generated if the controller
				endpoint is decorated with authorization requirement.</p>
			<h4 dir="auto"><a id="user-content-311212-system-error-codes-5xx" class="anchor" aria-hidden="true"
					href="#311212-system-error-codes-5xx"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1"
						width="16" height="16" aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.1.1.2.1.2 System Error Codes (5xx)</h4>
			<p dir="auto">System error codes are the third and last possible type of codes that may occur or be returned from an
				API endpoint. Their main responsibility is to indicate in general that the consumer of the API endpoint is at no
				fault. Something bad happened in the system, and the engineering team is required to get involved to resolve the
				issue. That's why we log our exceptions with a severity level at the core business logic layer so we know how
				urgent the matter may be.</p>
			<p dir="auto">The most common http code that can be communicated on a server-side issue is the <code>500</code> or
				<code>InternalServerError</code> code. Let's take a look at a code snippet that deals with this situation:</p>
			<div class="highlight highlight-source-cs position-relative overflow-auto">
<pre>[<span class="pl-en">HttpGet</span>(<span class="pl-s"><span class="pl-pds">"</span>{studentId}<span class="pl-pds">"</span></span>)]
<span class="pl-k">public</span> <span class="pl-k">async</span> <span class="pl-en">ValueTask</span>&lt;<span class="pl-en">ActionResult</span>&lt;<span class="pl-en">Student</span>&gt;&gt; <span class="pl-en">GetStudentByIdAsync</span>(<span class="pl-en">Guid</span> <span class="pl-en">studentId</span>)
{
	<span class="pl-k">try</span>
	{
		...
	}
	...
	<span class="pl-k">catch</span> (<span class="pl-en">StudentDependencyException</span> <span class="pl-en">studentDependencyException</span>)
	{
		<span class="pl-k">return</span> <span class="pl-en">InternalServerError</span>(<span class="pl-smi">studentValidationException</span>)
	}
}</pre> 
			</div>
			<p dir="auto">In the above snippet we completely ignored the inner exception and mainly focused on the categorical
				exception for security reasons. Mainly to not allow internal server information to be exposed in an API response
				other than something as simple as <code>Dependency error occurred, contact support.</code> Since the consumer of
				the API is required to perform no action whatsoever other than creating a ticket for the support team.</p>
			<p dir="auto">Ideally, these issues should be caught out of Acceptance Tests which we will discuss shortly in this
				chapter. But there are times where there's a server blip that may cause a memory leakage of some sort or any
				other internal infrastrucrual issues that won't be caught by end-to-end testing in any way.</p>
			<p dir="auto">In terms of types of exceptions that may be handled, it's a little smaller when it comes server error
				here's the details:</p>
			<table>
				<thead>
					<tr>
						<th>Code</th>
						<th>Method</th>
						<th>Exception</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td>500</td>
						<td>InternalServerError</td>
						<td>DependencyException or ServiceException</td>
					</tr>
					<tr>
						<td>507</td>
						<td>NotFound</td>
						<td>InsufficientStorageException (Internal Only)</td>
					</tr>
				</tbody>
			</table>
			<p dir="auto">There's also an interesting case where two teams agree on a certain swagger document, and the back-end
				API development team decides to build corresponding API endpoints with methods that are not yet implemented to
				communicate to the other team that the work hasn't started yet. In which case using error code <code>501</code>
				is sufficient which is just a code for <code>NotImplemented</code>.</p>
			<p dir="auto">It is also important to mention that the native <code>500</code> error code can be communicated in
				ASP.NET applications through <code>Problem</code> method. We are relying on a library <code>RESTFulSense</code>
				to provide more codes than the native implementation can offer, but more importantly provide a problem detail
				serialization option and deserialization option on the client side.</p>
			<h4 dir="auto"><a id="user-content-311213-all-codes" class="anchor" aria-hidden="true" href="#311213-all-codes"><svg
						class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
						aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.1.1.2.1.3 All Codes</h4>
			<p dir="auto">Other than the ones mentioned in previous sections, and for documentation purposes, here's the all of
				the <code>4xx</code> and <code>5xx</code> codes an API could communicate according to the latest standardized
				API guidelines:</p>
			<table>
				<thead>
					<tr>
						<th>Status</th>
						<th>Code</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td>BadRequest</td>
						<td>400</td>
					</tr>
					<tr>
						<td>Unauthorized</td>
						<td>401</td>
					</tr>
					<tr>
						<td>PaymentRequired</td>
						<td>402</td>
					</tr>
					<tr>
						<td>Forbidden</td>
						<td>403</td>
					</tr>
					<tr>
						<td>NotFound</td>
						<td>404</td>
					</tr>
					<tr>
						<td>NotFound</td>
						<td>404</td>
					</tr>
					<tr>
						<td>MethodNotAllowed</td>
						<td>405</td>
					</tr>
					<tr>
						<td>NotAcceptable</td>
						<td>406</td>
					</tr>
					<tr>
						<td>ProxyAuthenticationRequired</td>
						<td>407</td>
					</tr>
					<tr>
						<td>RequestTimeout</td>
						<td>408</td>
					</tr>
					<tr>
						<td>Conflict</td>
						<td>409</td>
					</tr>
					<tr>
						<td>Gone</td>
						<td>410</td>
					</tr>
					<tr>
						<td>LengthRequired</td>
						<td>411</td>
					</tr>
					<tr>
						<td>PreconditionFailed</td>
						<td>412</td>
					</tr>
					<tr>
						<td>RequestEntityTooLarge</td>
						<td>413</td>
					</tr>
					<tr>
						<td>RequestUriTooLong</td>
						<td>414</td>
					</tr>
					<tr>
						<td>UnsupportedMediaType</td>
						<td>415</td>
					</tr>
					<tr>
						<td>RequestedRangeNotSatisfiable</td>
						<td>416</td>
					</tr>
					<tr>
						<td>ExpectationFailed</td>
						<td>417</td>
					</tr>
					<tr>
						<td>MisdirectedRequest</td>
						<td>421</td>
					</tr>
					<tr>
						<td>UnprocessableEntity</td>
						<td>422</td>
					</tr>
					<tr>
						<td>Locked</td>
						<td>423</td>
					</tr>
					<tr>
						<td>FailedDependency</td>
						<td>424</td>
					</tr>
					<tr>
						<td>UpgradeRequired</td>
						<td>426</td>
					</tr>
					<tr>
						<td>PreconditionRequired</td>
						<td>428</td>
					</tr>
					<tr>
						<td>TooManyRequests</td>
						<td>429</td>
					</tr>
					<tr>
						<td>RequestHeaderFieldsTooLarge</td>
						<td>431</td>
					</tr>
					<tr>
						<td>UnavailableForLegalReasons</td>
						<td>451</td>
					</tr>
					<tr>
						<td>InternalServerError</td>
						<td>500</td>
					</tr>
					<tr>
						<td>NotImplemented</td>
						<td>501</td>
					</tr>
					<tr>
						<td>BadGateway</td>
						<td>502</td>
					</tr>
					<tr>
						<td>ServiceUnavailable</td>
						<td>503</td>
					</tr>
					<tr>
						<td>GatewayTimeout</td>
						<td>504</td>
					</tr>
					<tr>
						<td>HttpVersionNotSupported</td>
						<td>505</td>
					</tr>
					<tr>
						<td>VariantAlsoNegotiates</td>
						<td>506</td>
					</tr>
					<tr>
						<td>InsufficientStorage</td>
						<td>507</td>
					</tr>
					<tr>
						<td>LoopDetected</td>
						<td>508</td>
					</tr>
					<tr>
						<td>NotExtended</td>
						<td>510</td>
					</tr>
					<tr>
						<td>NetworkAuthenticationRequired</td>
						<td>511</td>
					</tr>
				</tbody>
			</table>
			<p dir="auto">We will explore incorporating some of these codes in future revisions of The Standard as needed.</p>
			<h3 dir="auto"><a id="user-content-31122-single-dependency" class="anchor" aria-hidden="true"
					href="#31122-single-dependency"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1"
						width="16" height="16" aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.1.1.2.2 Single Dependency</h3>
			<p dir="auto">Exposer components can have one and only one dependency. This dependency must be a Service component.
				it cannot be a Broker or any other native dependency that Brokers may use to pull configurations or any other
				type of dependencies.</p>
			<p dir="auto">When implementing a controller, the constructor can be implemented as follows:</p>
			<div class="highlight highlight-source-cs position-relative overflow-auto">
<pre>[<span class="pl-en">ApiController</span>]
[<span class="pl-en">Route</span>(<span class="pl-s"><span class="pl-pds">"</span>api/[controller]<span class="pl-pds">"</span></span>)]
<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">StudentsController</span> : <span class="pl-en">RESTFulController</span>
{
	<span class="pl-k">private</span> <span class="pl-k">readonly</span> <span class="pl-en">IStudentService</span> <span class="pl-en">studentService</span>;

	<span class="pl-k">public</span> <span class="pl-en">StudentsController</span>(<span class="pl-en">IStudentService</span> <span class="pl-en">studentService</span>) <span class="pl-k">=&gt;</span>
		<span class="pl-k">this</span>.<span class="pl-smi">studentService</span> <span class="pl-k">=</span> <span class="pl-smi">studentService</span>;

	...
	...
}</pre> 
			</div>
			<h3 dir="auto"><a id="user-content-31123-single-contract" class="anchor" aria-hidden="true"
					href="#31123-single-contract"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16"
						height="16" aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.1.1.2.3 Single Contract</h3>
			<p dir="auto">This charactristic comes out of the box with the single dependency rule. If Services can only serve
				and receive one contract then the same rule will apply to controllers. They can return a contract, a list of
				objects with the same contract or portion of the contract when passing in Ids or queries.</p>
			<h2 dir="auto"><a id="user-content-3113-organization" class="anchor" aria-hidden="true"
					href="#3113-organization"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16"
						height="16" aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.1.1.3 Organization</h2>
			<p dir="auto">Controllers should be located under <code>Controllers</code> folder and belong within a
				<code>Controllers</code> namespace. Controller do not need to have their own folders or namespaces as they
				perform a simple exposure task and that's all.</p>
			<div class="highlight highlight-source-cs position-relative overflow-auto">
				<p dir="auto">Here's an example of a controller namespace:</p>
<pre><span class="pl-k">namespace</span> <span class="pl-en">GitFyle</span>.<span class="pl-en">Core</span>.<span class="pl-en">Api</span>.<span class="pl-en">Controllers</span>
{
	[<span class="pl-en">ApiController</span>]
	[<span class="pl-en">Route</span>(<span class="pl-s"><span class="pl-pds">"</span>api/[controller]<span class="pl-pds">"</span></span>)]
	<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">ContributionsController</span> : <span class="pl-en">RESTFulController</span>
	{
		...
	}
}</pre> 
			</div>
			<div class="highlight highlight-source-cs position-relative overflow-auto">
				<h2 dir="auto"><a id="user-content-3114-home-controller" class="anchor" aria-hidden="true"
					href="#3114-home-controller"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16"
						height="16" aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.1.1.4 Home Controller</h2>
			<p dir="auto">Every system should implement an API endpoint that we call <code>HomeController</code>. The controller
				only responsibility is to return a simple message to indicate that the API is still alive. Here's an example:
			</p>
<pre><span class="pl-k">using</span> <span class="pl-en">Microsoft</span>.<span class="pl-en">AspNetCore</span>.<span class="pl-en">Mvc</span>;
	
<span class="pl-k">namespace</span> <span class="pl-en">OtripleS</span>.<span class="pl-en">Web</span>.<span class="pl-en">Api</span>.<span class="pl-en">Controllers</span>
{
	[<span class="pl-en">ApiController</span>]
	[<span class="pl-en">Route</span>(<span class="pl-s"><span class="pl-pds">"</span>api/[controller]<span class="pl-pds">"</span></span>)]
	<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">HomeController</span> : <span class="pl-en">ControllerBase</span>
	{
		[<span class="pl-en">HttpGet</span>]
		<span class="pl-k">public</span> <span class="pl-en">ActionResult</span>&lt;<span class="pl-k">string</span>&gt; <span class="pl-en">Get</span>() <span class="pl-k">=&gt;</span>
			<span class="pl-en">Ok</span>(<span class="pl-s"><span class="pl-pds">"</span>Hello Mario, the princess is in another castle!<span class="pl-pds">"</span></span>);
	}
}</pre> 
			</div>
			<p dir="auto">Home controllers are not required to have any security on them. They open a gate for heartbeat tests
				to ensure the system as an entity is running without checking any external dependencies. This practice is very
				important to help engineers know when the system is down and quickly act on it.</p>
			<h2 dir="auto"><a id="user-content-3115-tests" class="anchor" aria-hidden="true" href="#3115-tests"><svg
						class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
						aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.1.1.5 Tests</h2>
			<p dir="auto">Controllers can be potentially unit tested to verify the mapping of exceptions to error codes are in
				place. But that's not a pattern I have been following myself so far. However, what is more important is
				Acceptance tests. Which verify all the components of the system are fully and successfully integrated with one
				another.</p>
			<div class="highlight highlight-source-cs position-relative overflow-auto">
				<p dir="auto">Here's an example of an acceptance test:</p>
<pre>[<span class="pl-en">Fact</span>]
<span class="pl-k">public</span> <span class="pl-k">async</span> <span class="pl-en">Task</span> <span class="pl-en">ShouldPostStudentAsync</span>()
{
	<span class="pl-c"><span class="pl-c">//</span> given</span>
	<span class="pl-en">Student</span> <span class="pl-en">randomStudent</span> <span class="pl-k">=</span> <span class="pl-en">CreateRandomStudent</span>();
	<span class="pl-en">Student</span> <span class="pl-en">inputStudent</span> <span class="pl-k">=</span> <span class="pl-smi">randomStudent</span>;
	<span class="pl-en">Student</span> <span class="pl-en">expectedStudent</span> <span class="pl-k">=</span> <span class="pl-smi">inputStudent</span>;

	<span class="pl-c"><span class="pl-c">//</span> when </span>
	<span class="pl-k">await</span> <span class="pl-k">this</span>.<span class="pl-smi">otripleSApiBroker</span>.<span class="pl-en">PostStudentAsync</span>(<span class="pl-smi">inputStudent</span>);

	<span class="pl-en">Student</span> <span class="pl-en">actualStudent</span> <span class="pl-k">=</span>
		<span class="pl-k">await</span> <span class="pl-k">this</span>.<span class="pl-smi">otripleSApiBroker</span>.<span class="pl-en">GetStudentByIdAsync</span>(<span class="pl-smi">inputStudent</span>.<span class="pl-smi">Id</span>);

	<span class="pl-c"><span class="pl-c">//</span> then</span>
	<span class="pl-smi">actualStudent</span>.<span class="pl-en">Should</span>().<span class="pl-en">BeEquivalentTo</span>(<span class="pl-smi">expectedStudent</span>);
	<span class="pl-k">await</span> <span class="pl-k">this</span>.<span class="pl-smi">otripleSApiBroker</span>.<span class="pl-en">DeleteStudentByIdAsync</span>(<span class="pl-smi">actualStudent</span>.<span class="pl-smi">Id</span>);
}</pre> 
			</div>
			<p dir="auto">Acceptance tests are required to cover every available endpoint on a controller. They are also
				responsible for cleaning up any test data after the test is completed. It is also important to mention that
				resources that are not owned by the microservice like database, must be emulated with applications such as
				<code>WireMock</code> and many others.</p>
			<p dir="auto">Acceptance tests are also implemented after the fact unlike unit tests. An endpoint has to be fully
				integrated and functional before a test is written to ensure the success of implementation is in place.</p>
		</article>

		<article class="markdown-body entry-content container-lg" itemprop="text">
			<h1 dir="auto"><a id="user-content-32-user-interfaces" class="anchor" aria-hidden="true"
					href="#32-user-interfaces"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16"
						height="16" aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.2 User Interfaces</h1>
			<h2 dir="auto"><a id="user-content-320-introduction" class="anchor" aria-hidden="true" href="#320-introduction"><svg
						class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
						aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.2.0 Introduction</h2>
			<p dir="auto">User Interfaces or UI are a type of exposer components that mainly targets humans for interaction with
				core business layer. Unlike Communication protocols which are mainly for distributed systems. UIs are forever
				evolving in terms of technologies and methedologies of which humans can interact with any given system. This
				goes from web applications to virtual/augmented realities. Voice activated systems and more recently brain-waves
				activated systems.</p>
			<p dir="auto">Developing user interfaces can be much more challenging in terms of experiences. There isn't a global
				standard today for what an inuitive experience is. It heavily relies on culture, commonalities and so many other
				forever changing variables in the world today. This Standard will outline the principles and rules for building
				modular, maintainable and pluggable UI components. But there will be a different Standard for outlining user
				experiences, human interactions and the theory of inuitiveness.</p>
			<p dir="auto">This Standard also breifly highlights certain guidelines in terms of rendering choices, server, client
				or hybrid as is the case with the tri-nature of everything. Let's dive deeper into the principles and rules that
				govern building UI components.</p>
			<h3 dir="auto"><a id="user-content-3200-principles--rules" class="anchor" aria-hidden="true"
					href="#3200-principles--rules"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1"
						width="16" height="16" aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.2.0.0 Principles &amp; Rules</h3>
			<p dir="auto">Just like every other exposer component type. UIs are required to be able to map processes, results
				and errors to their consumers. Some of these UI components will require a test-driven approach. Some others are
				more like Brokers where they are just wrappers around 3rd party or native UI components. Let's talk about these
				principles here.</p>
			<h4 dir="auto"><a id="user-content-32000-progress-loading" class="anchor" aria-hidden="true"
					href="#32000-progress-loading"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1"
						width="16" height="16" aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.2.0.0.0 Progress (Loading)</h4>
			<p dir="auto">The most important principle in building UI component is to develop intelligence to keep the user
				engaged while a certain process is going. You may have seen some of these with a simple spinner or a progress
				bar to keep users informed at all times of what's going on behind the scenes in the system.</p>
			<p dir="auto">It's a violation of The Standard to indicate a progress of any type if nothing really is going in the
				background. It falls into the practice of wasting end-users time and basically lying to them about the actual
				status of the system. But assuming the system is actually busy working on a certain request, there are three
				levels of communication that can happen on an exposer component to communicate a progress. Let's discuss those
				in detail:</p>
			<h4 dir="auto"><a id="user-content-320000-basic-progress" class="anchor" aria-hidden="true"
					href="#320000-basic-progress"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16"
						height="16" aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.2.0.0.0.0 Basic Progress</h4>
			<p dir="auto">The basic progress approach is where you present a status with a label like "Waiting ..." or a spinner
				with no further indication. This is the bare minimum of progress indication and no UI should just freeze or stop
				their hanging while requests are being processed in the background assuming an eventual-consistency pattern is
				not attainable for the current business need.</p>
			<p dir="auto">Some web applications choose to show a forever progress bar at the very top of the page to indicate a
				progress is happening. From an experience perspective and depending on the visibilty level of these progress
				bars it may or may not be easy to miss by end users. Some other engineering teams have chosen to play a simple
				animation to keep users engaged with visual progress without any indication of the details of that progress.</p>
			<h4 dir="auto"><a id="user-content-320001-remaining-progress" class="anchor" aria-hidden="true"
					href="#320001-remaining-progress"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1"
						width="16" height="16" aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.2.0.0.0.1 Remaining Progress</h4>
			<p dir="auto">A bit above the bare minimum, there are indication of remaining time or remaining progress to be
				completed before the request is processed. An indication such as "40% remaining" or something more specific like
				"5 minutes remaining ..." to help end-users understand or guestimate how long time or effort is left. There are
				patterns where engineers would indicate how tasks are left without any indication of what these tasks are.</p>
			<p dir="auto">Sometimes a reamining progress update is as detailed as UI engineers can get. For instance, if you are
				downloading a file from the internet. You can't be more detailed than saying x percent of the bits remaining to
				be downloaded with no further details. Some game developers choose to also visualize the internet speeds and
				available disk space all to just keep the end-user engaged in the system. And these are all acceptable pattern
				in this Standard.</p>
				<div class="highlight">
			<h4 dir="auto"><a id="user-content-320002-detailed-progress" class="anchor" aria-hidden="true"
					href="#320002-detailed-progress"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1"
						width="16" height="16" aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.2.0.0.0.2 Detailed Progress</h4>
			<p dir="auto">The highest level of reporting progress is the detailed progress type. Where the UI component is fully
				transparent with it's consumers by reporting every step of progress. This type of progress is more common in
				scientific applications. Engineers in debugging mode may enable a feature where all the underlying activity in
				the system is visualized through the UI.</p>
			<p dir="auto">This type helps end-users understand what is happening behind the scenes but also allows them to
				communicate better details to support engineers to help them fix an issue if the process happens to fail. But
				this process isn't always preferred in terms of experience considering that some details needs to be hidden for
				security reasons.</p>
			<p dir="auto">In summary, selecting the right type of progress in UI is mainly dependant on the business flow, type
				of users who will interact with the system and several other variable which we will be discussing in The
				Experience Standard.</p></div>
			<h4 dir="auto"><a id="user-content-32001-results" class="anchor" aria-hidden="true" href="#32001-results"><svg
						class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
						aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.2.0.0.1 Results</h4>
			<p dir="auto">UI exposer components will report a result to indicate the completion of a certain request by
				end-users. Consider registering a new student in a schooling system. There are several ways to indicate the
				registration process have been completed successfully. Let's discuss those type of results visualization in
				detail here.</p>
			<h5 dir="auto"><a id="user-content-320010-simple" class="anchor" aria-hidden="true" href="#320010-simple"><svg
						class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
						aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.2.0.0.1.0 Simple</h5>
			<p dir="auto">The simple indication of success is when the UI reports that the process was completed successfully
				without any further details. You may have seen some of these implementations for this type such as "Thank you,
				request submitted" or something as simple as a checkmark with a visualization of green color that indicates
				success in some way.</p>
			<p dir="auto">Simple results indications especially with submitted requests than retrieved data may add some more
				details in terms of the next course of action.</p>
			<div class="highlight">
				<h5 dir="auto"><a id="user-content-320011-partial-details" class="anchor" aria-hidden="true"
					href="#320011-partial-details"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1"
						width="16" height="16" aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.2.0.0.1.1 Partial Details</h5>
			<p dir="auto">The other type of results or success indication is present end-users with partial details. An overview
				of the nature of the request, where it stands in terms of status and timestamps. Partial details are usually
				useful when it comes to providing the end-user with a "ticket number" to help end-users follow up on their
				requests later to inquire about the status. This pattern is very common in e-commerce applications where every
				purchase request may be returned with a tracking number to help customers and customer support personnel assess
				with the requests.</p>
			<p dir="auto">Partial detailed results can also be very helpful for the visualiztion of the success process.
				Especially with requests that contains multiple parts. Larger requests such as submitting an application to join
				a university or the likes, it may contain attachments, multiple pages of details and confidential information
				such as payment details or social security numbers.</p>
			</div>
				<div class="highlight">
			<h5 dir="auto"><a id="user-content-320012-full-details" class="anchor" aria-hidden="true"
					href="#320012-full-details"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16"
						height="16" aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.2.0.0.1.2 Full Details</h5>
			<p dir="auto">In some cases, it might also be preferred to report full details about the submitted request.
				Especially with smaller requests where it may be useful to help end-users review their requests. Some engineers
				prefer to display full details as an extra confirmational step before actually submitting the request. But full
				details can also include more than just the request details, it could include status update from the server a
				long with assigned point of contact or an officer from maintenance and support teams.</p>
			<p dir="auto">It's a violation of The Standard to redirect end-users at the submittal of their requests with no
				indication of what happened.</p>								
			</div>
			<h4 dir="auto"><a id="user-content-32002-error-reports" class="anchor" aria-hidden="true"
					href="#32002-error-reports"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16"
						height="16" aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.2.0.0.2 Error Reports</h4>
			<p dir="auto">Error reports main responsibility is to inform end-users of what happened, why it happened and what's
				the next course of action. Some types of error reports don't necessarily indicate any course of action which can
				be a poor exprience depending on the business flow. But the bare minimum in error reporting is the basic
				indication of the error itself with basic details. Let's talk about those types in here.</p>
			<div class="highlight">
				<h5 dir="auto"><a id="user-content-320020-informational" class="anchor" aria-hidden="true"
					href="#320020-informational"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16"
						height="16" aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.2.0.0.2.0 Informational</h5>
			<p dir="auto">The bare minimum of error reports is the informational type. Indicating an error occurred and why it
				occurred. Something like: "Request failed. Try again" or "Request failed, contract support". There are also
				informational errors that are time based. Something like: "Our servers are currently experiencing a high volume
				of requests. Please try again later". These informational error reports are necessary to keep the end-user
				engaged in consuming the system in anyway.</p>
			<p dir="auto">Informational error reports are governed by the context and the type of users receiving them. In a
				scientific application the more details the better. For some other systems, it is important to shift the
				technical language of the errors to a more less technical language. For instance, we can't communicate: "Student
				Id cannot be null, empty or widespace". We should select a more readable language such as: "Please provide a
				valid student Id".</p>
			</div>
				<div class="highlight">
			<h5 dir="auto"><a id="user-content-320021-referencialimplicit-actions" class="anchor" aria-hidden="true"
					href="#320021-referencialimplicit-actions"><svg class="octicon octicon-link" viewBox="0 0 16 16"
						version="1.1" width="16" height="16" aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.2.0.0.2.1 Referencial/Implicit Actions</h5>
			<p dir="auto">The second type of error reports are the referencial type. When an erro occurs, it automatically take
				the action of informing the support team and returns a reference of a support ticket to end users so they can
				follow up on. You may see this a lot when video games fail to start, or certain applications is unable to
				initialize. Referencial error reports are the best when it comes certain business flows, since it takes care of
				all the actions, sends an email to the end user with the reference number then just follows up within a couple
				of days to report the status.</p>
			<p dir="auto">In general the less actions a certain system may require it's users to take after a certain failure
				has occurred, the better. Since end-users have already accomplished their tasks in terms of submitting requests.
				It becomes even more convenient if the original request is queued up such as the case with high volume
				enterprise systems so end-users don't have to re-submit the same data.</p>
			</div>
			<h5 dir="auto"><a id="user-content-320022-actionable" class="anchor" aria-hidden="true"
					href="#320022-actionable"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16"
						height="16" aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.2.0.0.2.2 Actionable</h5>
			<p dir="auto">The second type of error reports is the actionable reports. Errors that occur and provide an
				additional action for the users to go further in their request. For instance, there are error reports that will
				provide a button to try again. Or submitting an additional details request back to the engineering and support
				teams.</p>
			<p dir="auto">There are also reports that will provide a different route to accomplish the same task in more hybrid
				legacy and modernized applications. These actionable reports are more convenient than the informational reports,
				but they would still require their end-users to take more actions, more key strokes which leads to a certain
				level of inconvenience.</p>
			<h4 dir="auto"><a id="user-content-32003-single-dependency" class="anchor" aria-hidden="true"
					href="#32003-single-dependency"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1"
						width="16" height="16" aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.2.0.0.3 Single Dependency</h4>
			<p dir="auto">As is the case with any exposer component. it can only be integrated with a single dependency at all
				times. However, in the case of UI components, there is always the contract purity case where the UI is not
				supposed to be given more than what it needs in terms of data. This is where a new type of foundational-like
				services are implemented to ensure this pattern is enforced and all other details such as audit fields,
				timestamps and such are taken care of away from the UI component sight.</p>
			<p dir="auto">We will talk in detail about view services shortly as we progress talking about UI exposers.</p>
			<div class="highlight">
			<h4 dir="auto"><a id="user-content-32004-anatomy" class="anchor" aria-hidden="true" href="#32004-anatomy"><svg
						class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
						aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.2.0.0.4 Anatomy</h4>
			<p dir="auto">Just like the data flow in any service. We have brokers -&gt; Services -&gt; Exposers. UI components
				also form their own data flow in terms of rendering. let's take a look at the anatomy of UI exposers in this
				illustration:</p>
			
			<div align='center' style='padding: 5px;'  dir="auto">
				<a target="_blank" rel="noopener noreferrer"
					href="https://user-images.githubusercontent.com/1453985/147816980-e7d30d70-c01d-49db-9bae-6c9bc11f3ff7.png"><img
						src="https://user-images.githubusercontent.com/1453985/147816980-e7d30d70-c01d-49db-9bae-6c9bc11f3ff7.png"
						style="max-width: 100%;"></a>
			</div>
		</div>
			<p dir="auto">UI exposer components as shown above can be Bases, Components or Containers. Each one of these types
				has a specific responsibility to ensure the maintainbility and pluggability of the system is at it's highest
				scores according to The Standard. Let's discuss these three types here:</p>
			<h5 dir="auto"><a id="user-content-320040-bases" class="anchor" aria-hidden="true" href="#320040-bases"><svg
						class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
						aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.2.0.0.4.0 Bases</h5>
			<p dir="auto">Base or Base Components are just like Brokers in the data flow. They are simple thin wrappers around
				native or 3rd party components. Their main responsibility is to abstract away the hard dependency on non-local
				components to allow the configurability of the system to switch to any other external or native UI components
				with the least effort possible.</p>
			<p dir="auto">Base components also makes it easier to mock out any external or native components behavior, and
				focuses the effort on ensuring the local component is performing the way its expected. We will discuss in the
				next chapter base components for web applications in Blazor and other technologies.</p>
				<div class="highlight">
					<h5 dir="auto"><a id="user-content-320041-components" class="anchor" aria-hidden="true"
					href="#320041-components"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16"
						height="16" aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.2.0.0.4.1 Components</h5>
			<p dir="auto">UI Components are a hybrid between a Service and a Controller in the data pipeline. In a way
				components contain <em>some</em> business logic in terms of handling interactions with certain base components.
				But they are also limited by integrating with one and only one view service. Components are test-driven, they
				require writing tests to ensure they behave as expected. But they also contain almost no iteration, selection or
				sequencing data logic within them.</p>
			<p dir="auto">The most important aspect about UI components is that they are at the intersection between the UI flow
				and the data flow. They are responsible for leveraging their data dependency (view services) and their base
				components to become easily pluggable into container components (like pages with routes in web applications).
			</p>
		</div>
			<h5 dir="auto"><a id="user-content-320042-containers" class="anchor" aria-hidden="true"
					href="#320042-containers"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16"
						height="16" aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.2.0.0.4.2 Containers</h5>
			<p dir="auto">Container components are orchestrators/aggregators of components. They are the actual route or the
				page end-users interact with. Containers cannot have any level of UI logic in them. They cannot leverage base
				components. And they may have any number of UI components as the business flow requires.</p>
			<p dir="auto">As it is the case with every category of components, containers cannot integrate with other
				containers. The rule applies across the board for every data or UI component of any type.</p>
		<div class="highlight">
				<h4 dir="auto"><a id="user-content-32005-ui-component-types" class="anchor" aria-hidden="true"
					href="#32005-ui-component-types"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1"
						width="16" height="16" aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.2.0.0.5 UI Component Types</h4>
			<p dir="auto">UI components come in all different shapes and sizes. The hosting environment and the type of devices
				that serve these components play a big role in determining the technologies and the capabilities a certain UI
				component may have. Let's talk about the different types of UI components in this section.</p>
			</div>
				<h5 dir="auto"><a id="user-content-320050-web-applications" class="anchor" aria-hidden="true"
					href="#320050-web-applications"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1"
						width="16" height="16" aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.2.0.0.5.0 Web Applications</h5>
			<p dir="auto">The most popular type of UI applications are web apps. Web applications are the most popular and
				dominant due to their ease-of-use. They require no installation of any kind. They have no dependency on the
				operating system running the system or the type of devices users may be using. They can run on PCs, tablets,
				mobile phones and even TVs and watches that support web browsing.</p>
			<p dir="auto">In the last few years, web frameworks have evolved a lot due to the aforementioned popularity. There
				are frameworks that allow engineers to write web applications in so many programming languages today. The web
				assembly evolution have also opened the door for engineers to develop even more scalable frameworks with their
				preferred technologies and languages.</p>
			<p dir="auto">Web applications are developed in two different types in terms of rendering. Server-side applications
				and client-side applications. We will discuss the advantages and disadvantages of each type in addition to the
				hybrid model in the next few chapters of The Standard.</p>
			<h5 dir="auto"><a id="user-content-320051-mobile-applications" class="anchor" aria-hidden="true"
					href="#320051-mobile-applications"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1"
						width="16" height="16" aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.2.0.0.5.1 Mobile Applications</h5>
			<p dir="auto">The second most popular platform today to develop UIs is the mobile world. Developing mobile
				applications comes with its own set of challenges as they are heavily dependant on the operating system, the
				size of the phone in terms of resolution and the available native controls. Mobile applications are also always
				client-side apps. They are just like Desktop applications, they require to be compiled, provisioned and
				published to an app store so consumers can download them, install them and leverage them in their daily
				activities.</p>
			<p dir="auto">The biggest advantage of mobile applications is that they allow for offline interactions. Like mobile
				games, editing apps and streaming services with offline capabilities. But building mobile applications with web
				frameworks is becoming more and more popular. The universal eco-system that allows end-users to experience
				software the same way on their PCs, browsers and mobile applications the exact same way. This trend shall
				eventually allow engineers to develop systems for all different eco-systems at least cost possible.</p>
			<h5 dir="auto"><a id="user-content-320052-other-types" class="anchor" aria-hidden="true"
					href="#320052-other-types"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16"
						height="16" aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.2.0.0.5.2 Other Types</h5>
			<p dir="auto">There are other types for UI components that we may not cover in our Standard. These types are like,
				console/terminal applications, desktop applications, video games and virtual/augmented reality software in
				addition to wearable devices and voice activated systems. The world of Human-Machine-Interface HMI is evolving
				so rapidly in the age of metaverse that we might need to create at some point special chapters for these
				different types.</p>
		</article>
		<article class="markdown-body entry-content container-lg" itemprop="text">
			<h1 dir="auto"><a id="user-content-321-web-applications" class="anchor" aria-hidden="true"
					href="#321-web-applications"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16"
						height="16" aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.2.1 Web Applications</h1>
			<h2 dir="auto"><a id="user-content-3210-introduction" class="anchor" aria-hidden="true"
					href="#3210-introduction"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16"
						height="16" aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.2.1.0 Introduction</h2>
			<p dir="auto">Web applications are the most common type of exposer components today. They are much more easier to
				use than any other known exposer UI component in the software industry. But more importantly, web applications
				have much more divrse set of technologies than mobile applications. The web software market is also much easier
				for engineer to publish to and update than mobile applications which makes it quite attractive for newer
				engineers in general.</p>
			<p dir="auto">In this chapter, we will be using Blazor technology to demonstrate implementing The Standard
				principles for web applications. But as I previously mentioned, The Standard is technology-agnostic. Which means
				it can be applied to any web technology without any issues.</p>
			<h2 dir="auto"><a id="user-content-3211-on-the-map" class="anchor" aria-hidden="true" href="#3211-on-the-map"><svg
						class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
						aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.2.1.1 On the Map</h2>
			<p dir="auto">Web applications usually set at the other end of any system. They are the terminals that humans use to
				interact with the system. Let's take a look at where they are located on the map:</p>
			
			<div align='center' style='padding: 5px;'  dir="auto">
				<a target="_blank" rel="noopener noreferrer"
					href="https://user-images.githubusercontent.com/1453985/147833507-03db8680-8cf3-4353-9531-844b8d057ecb.png"><img
						src="https://user-images.githubusercontent.com/1453985/147833507-03db8680-8cf3-4353-9531-844b8d057ecb.png"
						style="max-width: 100%;"></a>
			</div>
			
			<p dir="auto">As shown above, web applications are somewhat similar to core APIs, except that they have a different
				group of components in terms of visualization such as Pages, Components and Bases. There's an intersection
				between two main flows in every web application. The presentation flow and the data/business flow. Depending on
				where a web application lives in terms of high-level architecture it's location determines whether it's backend
				(BFF or Backend of Frontend) is a business flow or just data flow. Let's discuss these details in the
				characteristics section in this chapter.</p>
			<h2 dir="auto"><a id="user-content-3212-charactristics" class="anchor" aria-hidden="true"
					href="#3212-charactristics"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16"
						height="16" aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.2.1.2 Charactristics</h2>
			<p dir="auto">Web applications are usually 6 basic components. Brokers, Services, View Services, Bases, Components
				and Pages. Since we've already discussed the data flow components in the Services portion of The Standard. In
				this section, we will be discussing the UI aspect (Bases, Components and Pages) with a slight detail about view
				services.</p>
			<p dir="auto">Let's discuss these charactristic here.</p>
			<h3 dir="auto"><a id="user-content-32120-anatomy" class="anchor" aria-hidden="true" href="#32120-anatomy"><svg
						class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
						aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.2.1.2.0 Anatomy</h3>
			<p dir="auto">UI components consist of base, components and pages. They all play the role of separating the
				responsibility of integration, rendering and routing users to a particular UI functionality.</p>
			<p dir="auto">Let's talk about these types in detail.</p>
			<div class="highlight">
			<h4 dir="auto"><a id="user-content-321200-base-component" class="anchor" aria-hidden="true"
					href="#321200-base-component"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16"
						height="16" aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.2.1.2.0.0 Base Component</h4>
			<p dir="auto">Base components are just like brokers, they are wrappers around native or external UI components.
				Their main responsbility is to abstract away any hard dependency on non-local UI capability. For instance, let's
				say we want to offer the capability to create text boxes for data insertion/capture. The native
				<code>&lt;input&gt;</code> tag could offer this capability. But exposing or leveraging this tag in our core UI
				components is dangerous. Because it creates a hard dependency on non-abstract UI components. If we decide at any
				point in time to use some 3rd party UI component, we would need to change these native
				<code>&lt;input&gt;</code> tags across all the components that use them. That's not an optimum strategy.</p>
			<p dir="auto">Let's take a look at a visualization for base component functionality:</p>		
			<div align='center' style='padding: 5px;'  dir="auto">
				<a target="_blank" rel="noopener noreferrer"
					href="https://user-images.githubusercontent.com/1453985/147835358-efab4f2a-8fc5-4e0b-bb83-326ef1292d01.png"><img
						src="https://user-images.githubusercontent.com/1453985/147835358-efab4f2a-8fc5-4e0b-bb83-326ef1292d01.png"
						style="max-width: 100%;"></a>
			</div>		
			<p dir="auto">As seen the above example, base components will wrap an external or native UI component then expose
				APIs to allow the interaction with that component seamlessly and programmatically. There are occasions where
				these APIs will represent parameters, functions or delegates to interact with the component based on the
				business flow.</p>
			</div>
			<div class="highlight highlight-text-html-basic position-relative overflow-auto">
				<h5 dir="auto"><a id="user-content-3212000-implementation" class="anchor" aria-hidden="true"
					href="#3212000-implementation"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1"
						width="16" height="16" aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.2.1.2.0.0.0 Implementation</h5>
			<p dir="auto">Let's take a look at a simple Base component for solving this problem:</p>
<pre><span class="pl-kos">&lt;</span><span class="pl-ent">input</span> <span class="pl-c1">@bind-value</span>=<span class="pl-s">Value</span> /&gt;</pre>
<pre><span class="pl-k">public</span> <span class="pl-k">partial</span> <span class="pl-k">class</span> <span class="pl-en">TextBoxBase</span> : <span class="pl-en">ComponentBase</span>
{
	[<span class="pl-en">Parameter</span>]
	<span class="pl-k">public</span> <span class="pl-k">string</span> <span class="pl-en">Value</span> {<span class="pl-k">get</span>; <span class="pl-k">set</span>;}

	<span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">SetValue</span>(<span class="pl-k">string</span> <span class="pl-en">value</span>) <span class="pl-k">=&gt;</span>
		<span class="pl-k">this</span>.<span class="pl-smi">Value</span> <span class="pl-k">=</span> <span class="pl-smi">value</span>;
}</pre> 
			</div>
			<p dir="auto">In the code above, we wrapped the <code>&lt;input&gt;</code> tag with our own base component
				<code>TextBoxBase</code> and we offered an input parameter <code>Value</code> to be passed into that component
				so it can pass it down to the native UI element. Additionally, we also provided a public function
				<code>SetValue</code> to allow for programmatically mimicking the users behavior to test drive the consuming
				component of this base element.</p>
			<h5 dir="auto"><a id="user-content-3212001-utilization" class="anchor" aria-hidden="true"
					href="#3212001-utilization"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16"
						height="16" aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.2.1.2.0.0.1 Utilization</h5>
			<p dir="auto">Now, when we try to leverage this base component at the core components level we can simply call it as
				follows:</p>
			<div class="highlight highlight-text-html-basic position-relative overflow-auto">
<pre><span class="pl-kos">&lt;</span><span class="pl-ent">TextBoxBase</span> <span class="pl-c1">@ref</span>=<span class="pl-s">MyTextBox</span> /&gt;</pre>
			</div>
			<p dir="auto">The <code>@ref</code> aspect will allow the backend code to interact with the base component
				programmatically behind the scenes to call any existing functionality.</p>
			<h5 dir="auto"><a id="user-content-3212002-restrictions" class="anchor" aria-hidden="true"
					href="#3212002-restrictions"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16"
						height="16" aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.2.1.2.0.0.2 Restrictions</h5>
			<p dir="auto">Base components can only be used by Core components or just components for short. They may not be used
				by pages and they may not be used by other Base components. But more importantly, it's preferred that base
				components would only wrap around one and only one non-local component.</p>
			<p dir="auto">And just like Brokers, Base Components do not have any logic in them. They don't handle exceptions, do
				any calculations or any form of sequential, iterative or selective business logic operations. These operations
				are either data-based where they belong to view services and downstream APIs or UI-based where they belong to
				Core Components.</p>
			<p dir="auto">Base components also don't handle exceptions, they don't throw their own exceptions and they don't
				perform any type of validations.</p>
				<div class="highlight">
			<h4 dir="auto"><a id="user-content-321201-core-component" class="anchor" aria-hidden="true"
					href="#321201-core-component"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16"
						height="16" aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.2.1.2.0.1 Core Component</h4>
			<p dir="auto">Core components are just like services in the data flow. They are test-driven but they are also
				restricted with one and only one dependency at all times. Core components leverage Base components to perform a
				business-specific flow. They are less generic than Base components because they orchestrate and communicate with
				the data flow.</p>
			<p dir="auto">Here's a visualization of core components architecture:</p>	
			<div align='center' style='padding: 5px;'  dir="auto">
				<a target="_blank" rel="noopener noreferrer"
					href="https://user-images.githubusercontent.com/1453985/147836385-9e2bd7af-0199-4e7d-b50d-653e626ad0d8.png"><img
						src="https://user-images.githubusercontent.com/1453985/147836385-9e2bd7af-0199-4e7d-b50d-653e626ad0d8.png"
						style="max-width: 100%;"></a>
			</div>			
			<p dir="auto">Core components in a way are orchestrators of UI and Data components. They will leverage one or many
				Base components to construct a business specific flow such as a student registration form then send the signal
				to view services to persist that data and return responses or report errors.</p>
			</div>		
			<div class="highlight highlight-source-cs position-relative overflow-auto">
				<h5 dir="auto"><a id="user-content-3212010-implementation--tests" class="anchor" aria-hidden="true"
					href="#3212010-implementation--tests"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1"
						width="16" height="16" aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.2.1.2.0.1.0 Implementation &amp; Tests</h5>
			<p dir="auto">Let's take a look at the implementation of a core component.</p>
<pre><span class="pl-k">public</span> <span class="pl-k">partial</span> <span class="pl-k">class</span> <span class="pl-en">StudentRegistrationComponent</span> : <span class="pl-en">ComponentBase</span>
{
	[<span class="pl-en">Inject</span>]
	<span class="pl-k">public</span> <span class="pl-en">IStudentViewService</span> <span class="pl-en">StudentViewService</span> {<span class="pl-k">get</span>; <span class="pl-k">set</span>;}

	<span class="pl-k">public</span> <span class="pl-en">StudentRegistrationComponentState</span> <span class="pl-en">State</span> {<span class="pl-k">get</span>; <span class="pl-k">set</span>;}
	<span class="pl-k">public</span> <span class="pl-en">StudentView</span> <span class="pl-en">StudentView</span> {<span class="pl-k">get</span>; <span class="pl-k">set</span>;}
	<span class="pl-k">public</span> <span class="pl-en">TextBoxBase</span> <span class="pl-en">StudentNameTextBox</span> {<span class="pl-k">get</span>; <span class="pl-k">set</span>;}
	<span class="pl-k">public</span> <span class="pl-en">ButtonBase</span> <span class="pl-en">SubmitButton</span> {<span class="pl-k">get</span>; <span class="pl-k">set</span>;}
	<span class="pl-k">public</span> <span class="pl-en">LabelBase</span> <span class="pl-en">StatusLabel</span> {<span class="pl-k">get</span>; <span class="pl-k">set</span>;}

	<span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">OnIntialized</span>() <span class="pl-k">=&gt;</span>
		<span class="pl-k">this</span>.<span class="pl-smi">State</span> <span class="pl-k">==</span> <span class="pl-smi">StudentRegisterationComponentState</span>.<span class="pl-smi">Content</span>;

	<span class="pl-k">public</span> <span class="pl-k">async</span> <span class="pl-en">Task</span> <span class="pl-en">SubmitStudentAsync</span>()
	{
		<span class="pl-k">try</span>
		{
			<span class="pl-k">this</span>.<span class="pl-smi">StudentViewService</span>.<span class="pl-en">AddStudentViewAsync</span>(<span class="pl-k">this</span>.<span class="pl-smi">StudentView</span>);
		}
		<span class="pl-k">catch</span> (<span class="pl-en">Exception</span> <span class="pl-en">exception</span>)
		{
			<span class="pl-k">this</span>.<span class="pl-smi">State</span> <span class="pl-k">=</span> <span class="pl-smi">StudentRegisterationComponentState</span>.<span class="pl-smi">Error</span>;
		}
	}
}</pre> 
			</div>
			<p dir="auto">The above code shows thee different types of properties within any given component, The dependency
				view service which maps raw API models/data into consumable UI models. And the <code>State</code> which
				determines whether a component should be <code>Loading</code>, <code>Content</code> or <code>Error</code>. The
				data view model to bind incoming input to one unified model <code>StudentView</code>. And the last three are
				Base level components which are used to construct the form of registration.</p>
			<p dir="auto">Let's take a look at the markup side of the core component:</p>
			<div class="highlight highlight-text-html-basic position-relative overflow-auto">
<pre><span class="pl-kos">&lt;</span><span class="pl-ent">Condition</span> <span class="pl-c1">Evaluation</span>=<span class="pl-s">IsLoading</span><span class="pl-kos">&gt;</span>
	<span class="pl-kos">&lt;</span><span class="pl-ent">Match</span><span class="pl-kos">&gt;</span>
		<span class="pl-kos">&lt;</span><span class="pl-ent">LabelBase</span> <span class="pl-c1">@ref</span>=<span class="pl-s">StatusLabel</span> <span class="pl-c1">Value</span>="<span class="pl-s">Loading ...</span>" /&gt;
	<span class="pl-kos">&lt;/</span><span class="pl-ent">Match</span><span class="pl-kos">&gt;</span>
<span class="pl-kos">&lt;/</span><span class="pl-ent">Condition</span><span class="pl-kos">&gt;</span>

<span class="pl-kos">&lt;</span><span class="pl-ent">Condition</span> <span class="pl-c1">Evaluation</span>=<span class="pl-s">IsContent</span><span class="pl-kos">&gt;</span>
	<span class="pl-kos">&lt;</span><span class="pl-ent">Match</span><span class="pl-kos">&gt;</span>
		<span class="pl-kos">&lt;</span><span class="pl-ent">TextBoxBase</span> <span class="pl-c1">@ref</span>=<span class="pl-s">StudentNameTextBox</span> <span class="pl-c1">@bind-value</span>=<span class="pl-s">StudentView.Name</span> /&gt;
		<span class="pl-kos">&lt;</span><span class="pl-ent">ButtonBase</span> <span class="pl-c1">@ref</span>=<span class="pl-s">SubmitButton</span> <span class="pl-c1">Label</span>="<span class="pl-s">Submit</span>" <span class="pl-c1">OnClick</span>=<span class="pl-s">SubmitStudentAsync</span> /&gt;
	<span class="pl-kos">&lt;/</span><span class="pl-ent">Match</span><span class="pl-kos">&gt;</span>
<span class="pl-kos">&lt;/</span><span class="pl-ent">Condition</span><span class="pl-kos">&gt;</span>

<span class="pl-kos">&lt;</span><span class="pl-ent">Condition</span> <span class="pl-c1">Evaluation</span>=<span class="pl-s">IsError</span><span class="pl-kos">&gt;</span>
	<span class="pl-kos">&lt;</span><span class="pl-ent">Match</span><span class="pl-kos">&gt;</span>
		<span class="pl-kos">&lt;</span><span class="pl-ent">LabelBase</span> <span class="pl-c1">@ref</span>=<span class="pl-s">StatusLabel</span> <span class="pl-c1">Value</span>="<span class="pl-s">Error Occurred</span>" /&gt;
	<span class="pl-kos">&lt;/</span><span class="pl-ent">Match</span><span class="pl-kos">&gt;</span>
<span class="pl-kos">&lt;/</span><span class="pl-ent">Condition</span><span class="pl-kos">&gt;</span></pre>
<p dir="auto">We linked the references of the student registeration component properties to UI components to ensure
	the rendering of these components have actually occurred and the submission of data has been executed.</p>
		</div>
		<div class="highlight highlight-source-cs position-relative overflow-auto">
			<p dir="auto">Let's take a look at a couple of tests to verify these states. a component has already loaded state.
				And post submission states.</p>
<pre>[<span class="pl-en">Fact</span>]
<span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">ShouldRenderComponent</span>()
{
	<span class="pl-c"><span class="pl-c">//</span> given</span>
	<span class="pl-en">StudentRegisterationComponentState</span> <span class="pl-en">expectedComponentState</span> <span class="pl-k">=</span>
		<span class="pl-smi">StudentRegisterationComponentState</span>.<span class="pl-smi">Content</span>;

	<span class="pl-c"><span class="pl-c">//</span> when</span>
	<span class="pl-k">this</span>.<span class="pl-smi">renderedStudentRegistrationComponent</span> <span class="pl-k">=</span>
		<span class="pl-en">RenderComponent</span>&lt;<span class="pl-en">StudentRegistrationComponent</span>&gt;();

	<span class="pl-c"><span class="pl-c">//</span> then</span>
	<span class="pl-k">this</span>.<span class="pl-smi">renderedStudentRegistrationComponent</span>.<span class="pl-smi">Instance</span>.<span class="pl-smi">StudentView</span>
		.<span class="pl-en">Should</span>().<span class="pl-en">NotBeNull</span>();

	<span class="pl-k">this</span>.<span class="pl-smi">renderedStudentRegistrationComponent</span>.<span class="pl-smi">Instance</span>.<span class="pl-smi">State</span>
		.<span class="pl-en">Should</span>().<span class="pl-en">Be</span>(<span class="pl-smi">expectedComponentState</span>);

	<span class="pl-k">this</span>.<span class="pl-smi">renderedStudentRegistrationComponent</span>.<span class="pl-smi">Instance</span>.<span class="pl-smi">StudentNameTextBox</span>
		.<span class="pl-en">Should</span>().<span class="pl-en">NotBeNull</span>();

	<span class="pl-k">this</span>.<span class="pl-smi">renderedStudentRegisterationComponent</span>.<span class="pl-smi">Instance</span>.<span class="pl-smi">SubmitButton</span>
		.<span class="pl-en">Should</span>().<span class="pl-en">NotBeNull</span>();

	<span class="pl-k">this</span>.<span class="pl-smi">renderedStudentRegistrationComponent</span>.<span class="pl-smi">Instance</span>.<span class="pl-smi">StatusLabel</span>.<span class="pl-smi">Value</span>
		.<span class="pl-en">Should</span>().<span class="pl-en">BeNull</span>();

	<span class="pl-k">this</span>.<span class="pl-smi">studentViewServiceMock</span>.<span class="pl-en">VerifyNoOtherCalls</span>();
}</pre> 
			</div>
			<p dir="auto">The test above will verify that all the components are assigned a reference property and no external
				dependency calls have been made. it validates that the code in the <code>OnIntialized</code> function on the
				component level is validated and performing as expected.</p>
			<div class="highlight highlight-source-cs position-relative overflow-auto">
				<p dir="auto">Now, let's take a look at the submittal code validations:</p>
<pre>[<span class="pl-en">Fact</span>]
<span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">ShouldSubmitStudentAsync</span>()
{
	<span class="pl-c"><span class="pl-c">//</span> given</span>
	<span class="pl-en">StudentRegisterationComponentState</span> <span class="pl-en">expectedComponentState</span> <span class="pl-k">=</span>
		<span class="pl-smi">StudentRegisterationComponentState</span>.<span class="pl-smi">Content</span>;

	<span class="pl-k">var</span> <span class="pl-en">inputStudentView</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">StudentView</span>
	{
		<span class="pl-smi">Name</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>Hassan Habib<span class="pl-pds">"</span></span>
	};

	<span class="pl-en">StudentView</span> <span class="pl-en">expectedStudentView</span> <span class="pl-k">=</span> <span class="pl-smi">inputStudentView</span>;

	<span class="pl-c"><span class="pl-c">//</span> when</span>
	<span class="pl-k">this</span>.<span class="pl-smi">renderedStudentRegistrationComponent</span> <span class="pl-k">=</span>
		<span class="pl-en">RenderComponent</span>&lt;<span class="pl-en">StudentRegistrationComponent</span>&gt;();

	<span class="pl-k">this</span>.<span class="pl-smi">renderedStudentRegistrationComponent</span>.<span class="pl-smi">Instance</span>.<span class="pl-smi">StudentName</span>
		.<span class="pl-en">SetValue</span>(<span class="pl-smi">inputStudentView</span>.<span class="pl-smi">Name</span>);

	<span class="pl-k">this</span>.<span class="pl-smi">renderedStudentRegistrationComponent</span>.<span class="pl-smi">Instance</span>.<span class="pl-smi">SubmitButton</span>.<span class="pl-en">Click</span>();

	<span class="pl-c"><span class="pl-c">//</span> then</span>
	<span class="pl-k">this</span>.<span class="pl-smi">renderedStudentRegistrationComponent</span>.<span class="pl-smi">Instance</span>.<span class="pl-smi">StudentView</span>
		.<span class="pl-en">Should</span>().<span class="pl-en">NotBeNull</span>();

	<span class="pl-k">this</span>.<span class="pl-smi">renderedStudentRegisterationComponent</span>.<span class="pl-smi">Instance</span>.<span class="pl-smi">StudentView</span>
		.<span class="pl-en">Should</span>().<span class="pl-en">BeEquivalentTo</span>(<span class="pl-smi">expectedStudentView</span>);

	<span class="pl-k">this</span>.<span class="pl-smi">renderedStudentRegistrationComponent</span>.<span class="pl-smi">Instance</span>.<span class="pl-smi">State</span>
		.<span class="pl-en">Should</span>().<span class="pl-en">Be</span>(<span class="pl-smi">expectedComponentState</span>);

	<span class="pl-k">this</span>.<span class="pl-smi">renderedStudentRegistrationComponent</span>.<span class="pl-smi">Instance</span>.<span class="pl-smi">StudentNameTextBox</span>
		.<span class="pl-en">Should</span>().<span class="pl-en">NotBeNull</span>();

	<span class="pl-k">this</span>.<span class="pl-smi">renderedStudentRegistrationComponent</span>.<span class="pl-smi">Instance</span>.<span class="pl-smi">StudentNameTextBox</span>.<span class="pl-smi">Value</span>
		.<span class="pl-en">Should</span>().<span class="pl-en">BeEquivalentTo</span>(<span class="pl-smi">studentView</span>.<span class="pl-smi">Name</span>);

	<span class="pl-k">this</span>.<span class="pl-smi">renderedStudentRegisterationComponent</span>.<span class="pl-smi">Instance</span>.<span class="pl-smi">SubmitButton</span>
		.<span class="pl-en">Should</span>().<span class="pl-en">NotBeNull</span>();

	<span class="pl-k">this</span>.<span class="pl-smi">renderedStudentRegistrationComponent</span>.<span class="pl-smi">Instance</span>.<span class="pl-smi">StatusLabel</span>.<span class="pl-smi">Value</span>
		.<span class="pl-en">Should</span>().<span class="pl-en">BeNull</span>();

	<span class="pl-k">this</span>.<span class="pl-smi">studentViewServiceMock</span>.<span class="pl-en">Verify</span>(<span class="pl-en">service</span> <span class="pl-k">=&gt;</span>
		<span class="pl-smi">service</span>.<span class="pl-en">AddStudentAsync</span>(<span class="pl-smi">inputStudentView</span>),
			<span class="pl-smi">Times</span>.<span class="pl-smi">Once</span>);

	<span class="pl-k">this</span>.<span class="pl-smi">studentViewServiceMock</span>.<span class="pl-en">VerifyNoOtherCalls</span>();
}</pre> 
<p dir="auto">The test above validates that on submittal, the student model is populated with the data set
	programmatically through base component instance, but also verifies all these components are actually rendered
	on the screen before end-users by validating each base component has an assigned instance on runtime or
	render-time.</p>
			</div>
		<div class="highlight">
			<h5 dir="auto"><a id="user-content-3212011-restrictions" class="anchor" aria-hidden="true"
					href="#3212011-restrictions"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16"
						height="16" aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.2.1.2.0.1.1 Restrictions</h5>
			<p dir="auto">Core components have similar restrictions to Base components in a way they cannot call each other at
				that level. There's a level of Orchestration Core Components that can combine multiple components to exchange
				messages but they don't render anything on their own the same way Orchestration services delegate all the work
				to their dependencies.</p>
			<p dir="auto">But Core components also are not allowed to call more then one and only one view service. And in that,
				they stay true to the view model at all times. One views service corresponds to one core component which renders
				one and only one view model.</p>
			<p dir="auto">View services may do their own orchestration-level work as well, in an extremely complex flow but it's
				highly recommend to keep things at a flat level. These very same view services perform nothing but mapping and
				adding audit fields in addition to basic structural validations.</p>
						
		</div>
				<h4 dir="auto"><a id="user-content-321202-pages" class="anchor" aria-hidden="true" href="#321202-pages"><svg
						class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
						aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.2.1.2.0.2 Pages</h4>
			<p dir="auto">In every web application, pages are a very fundamental mandatory container component that needs to
				exist so end-users could navigate to them. Pages mainly hold a route, communicate a paramter from that route and
				combine core-level components to represents a business value.</p>
			<p dir="auto">A good example for pages are dashboards. Dashboard pages are a container of multiple components like
				tiles, notifications, headers and side bars with references to other pages. Pages don't hold any business logic
				in and of themselves, but they delegate all route-related operations to their child components.</p>
			<p dir="auto">Let's take a look at a simple page implementation:</p>
			<div class="highlight highlight-text-html-basic position-relative overflow-auto">
<pre>@page '/registration'
	
<span class="pl-kos">&lt;</span><span class="pl-ent">HeaderComponent</span> /&gt;
<span class="pl-kos">&lt;</span><span class="pl-ent">StudentRegisterationComponent</span> /&gt;
<span class="pl-kos">&lt;</span><span class="pl-ent">FooterComponent</span> /&gt;</pre>
<p dir="auto">Pages are much simpler than core or base components. They don't require unit testing, and they don't
	necessarily need a backend code. They just purely reference their components without reference (unless needed)
	and they help serve that content when a route is navigated to.</p>	
</div>
		<div class="highlight">
				<h4 dir="auto"><a id="user-content-321203-unobtrusiveness" class="anchor" aria-hidden="true"
					href="#321203-unobtrusiveness"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1"
						width="16" height="16" aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.2.1.2.0.3 Unobtrusiveness</h4>
			<p dir="auto">For all UI components, it's a violation to include code from multiple technologies/languages in the
				same page. For instance, a CSS style code, C# code and HTML markup cannot all exist at the same file. They need
				to separated in their own files.</p>
			<p dir="auto">The unobtrusiveness rule helps prevent cognitive pollution for engineers building UI components, but
				also makes the system much easier to maintain. That's why every component can nest it's files beneath it if the
				IDE/Environment used for development allows for partial implementations as follows:</p>
			<ul dir="auto">
				<li>StudentRegisterationComponent.razor
					<ul dir="auto">
						<li>StudentRegisterationComponent.razor.cs</li>
						<li>StudentRegisterationComponent.razor.css</li>
					</ul>
				</li>
			</ul>
			<p dir="auto">The node file here <code>.razor</code> file has all the markup needed to kick off the initialization
				of the component. While both nested files are supporting files for simple UI logic code and styling. With this
				level of organization (especially in Blazor) doesn't require any referencing for these nested/support files.
				This may not be the case for other technologies so I urge engineers to do their very best to fit that
				model/Standard.</p>					
		</div>
			<h4 dir="auto"><a id="user-content-321204-organization" class="anchor" aria-hidden="true"
					href="#321204-organization"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16"
						height="16" aria-hidden="true">
						<path fill-rule="evenodd"
							d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
						</path>
					</svg></a>3.2.1.2.0.4 Organization</h4>
			<p dir="auto">All UI components are listed under a Views folder in the solution. let's take a look:</p>
			<ul dir="auto">
				<li>Views
					<ul dir="auto">
						<li>Bases</li>
						<li>Components</li>
						<li>Pages</li>
					</ul>
				</li>
			</ul>
			<p dir="auto">This tri-nature conforming organization should make it easier to shift reusable components and make it
				also easier to find these components based on their categories. I will leave it up to the preference of the
				engieneers to determine whether to break down these components further by folders/namespaces or leave them all
				at the same level given the nesting is in place.</p>
		</article>
	</div>
	</font>
</body>
</html>